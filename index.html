<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cripto AI - Top 100 Criptomoedas</title>
    <style> /* Reset e configurações básicas */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* Nova paleta de cores moderna e renovada */
            --primary-color: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #a5b4fc;
            --secondary-color: #10b981;
            --secondary-dark: #059669;
            --accent-color: #f59e0b;
            --accent-dark: #d97706;
            
            /* Cores de fundo renovadas */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-card: #1e293b;
            --bg-glass: rgba(30, 41, 59, 0.8);
            
            /* Cores de texto renovadas */
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --text-accent: #e2e8f0;
            
            /* Cores de status renovadas */
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
            
            /* Sistema de sombras avançado */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            /* Sistema de bordas refinado */
            --border-radius-sm: 0.375rem;
            --border-radius-md: 0.5rem;
            --border-radius-lg: 0.75rem;
            --border-radius-xl: 1rem;
            --border-radius-2xl: 1.5rem;
            
            /* Sistema de transições */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-tertiary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(6, 182, 212, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        .header {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-xl);
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            opacity: 0.5;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 16px;
            position: relative;
        }
        
        .logo::before {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius-xl);
            opacity: 0.1;
            z-index: -1;
        }
        
        .logo i {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 4px 8px rgba(99, 102, 241, 0.3));
            animation: float 3s ease-in-out infinite;
        }
        
        .logo h1 {
            font-size: 2.25rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.025em;
        }
        
        .header-stats {
            display: flex;
            gap: 30px;
        }
        
        .stat-item {
            text-align: center;
            position: relative;
            padding: 16px 24px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: var(--transition-normal);
        }
        
        .stat-item:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .stat-label {
            display: block;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Currency Switcher */
        .currency-switcher {
            cursor: pointer;
        }
        
        .currency-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: var(--transition-normal);
        }
        
        .currency-btn:hover {
            transform: scale(1.05);
        }
        
        .currency-btn i {
            font-size: 1rem;
            opacity: 0.8;
        }
        

        
        .currency-symbol {
            font-size: 1.5rem;
        }
        
        /* Status de conexão */
        .connection-status {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 2000;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .connection-status.online {
            background: rgba(0, 212, 170, 0.2);
            color: var(--success-color);
            border: 1px solid rgba(0, 212, 170, 0.3);
        }
        
        .connection-status.offline {
            background: rgba(255, 107, 107, 0.2);
            color: var(--error-color);
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
        
        .connection-status.cache {
            background: rgba(255, 165, 0, 0.2);
            color: var(--warning-color);
            border: 1px solid rgba(255, 165, 0, 0.3);
        }
        
        .connection-status.mock {
            background: rgba(160, 160, 160, 0.2);
            color: var(--text-secondary);
            border: 1px solid rgba(160, 160, 160, 0.3);
        }
        
        .connection-status i {
            font-size: 0.6rem;
        }
        
        /* Indicador de API */
        .api-indicator {
            position: fixed;
            top: 70px;
            left: 20px;
            z-index: 2000;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            background: rgba(99, 102, 241, 0.9);
            color: white;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .api-indicator.binance {
            background: rgba(240, 185, 11, 0.9);
            color: white;
        }
        
        .api-indicator.coinmarketcap {
            background: rgba(255, 107, 53, 0.9);
            color: white;
        }
        
        .api-indicator.cryptocompare {
            background: rgba(0, 188, 212, 0.9);
            color: white;
        }
        
        .api-indicator.coingecko {
            background: rgba(0, 212, 170, 0.9);
            color: white;
        }
        
        /* Main Content */
        .main {
            padding: 40px 0;
        }
        
        /* Controls */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            gap: 20px;
            flex-wrap: wrap;
        }
        

        
        .search-box {
            position: relative;
            flex: 1;
            max-width: 400px;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.1rem;
            z-index: 2;
            transition: color 0.3s ease;
        }
        
        .search-box input:focus + i {
            color: var(--primary-color);
        }
        
        .search-box:hover i {
            color: var(--primary-color);
        }
        
        .search-box input {
            width: 100%;
            padding: 16px 20px 16px 56px;
            border: none;
            border-radius: var(--border-radius-2xl);
            background: var(--bg-glass);
            color: var(--text-primary);
            font-size: 1rem;
            backdrop-filter: blur(10px);
            transition: var(--transition-normal);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
        }
        
        .search-box input:focus {
            outline: none;
            background: var(--bg-glass-hover);
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1), var(--shadow-lg);
            transform: translateY(-1px);
        }
        
        .search-box input::placeholder {
            color: var(--text-secondary);
        }
        
        .filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius-xl);
            background: var(--bg-glass);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition-normal);
            backdrop-filter: blur(10px);
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }
        
        .filter-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: var(--transition-normal);
        }
        
        .filter-btn:hover::before {
            left: 100%;
        }
        
        .filter-btn:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .filter-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .filter-btn.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            animation: shimmer 2s ease-in-out infinite;
        }
        
        .filter-btn.active.swing-trade-btn {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
            animation: pulse 2s infinite;
        }
        
        .filter-btn.active.swing-trade-btn::after {
            background: linear-gradient(90deg, var(--accent-color), var(--primary-color), var(--secondary-color));
        }
        
        .swing-trade-btn {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            color: white;
            font-weight: 700;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .swing-trade-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }
        
        .swing-trade-btn:hover::before {
            left: 100%;
        }
        
        .swing-trade-btn:hover {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(245, 158, 11, 0.5);
            border-color: rgba(255, 255, 255, 0.3);
        }
        

        
        /* Ajustes específicos para mobile */
        @media (max-width: 768px) {
            .filters {
                gap: 8px;
                justify-content: center;
            }
            
            .filter-btn {
                padding: 8px 12px;
                font-size: 0.75rem;
                min-width: 60px;
                flex: 1;
                max-width: 80px;
            }
            
            .swing-trade-btn {
                min-width: 90px;
                max-width: 100px;
            }
        }
        
        @media (max-width: 480px) {
            .filter-btn {
                padding: 6px 10px;
                font-size: 0.7rem;
                min-width: 50px;
                max-width: 70px;
            }
            
            .swing-trade-btn {
                min-width: 80px;
                max-width: 90px;
            }
            
            .filter-btn.analysis-btn {
                min-width: 60px;
                max-width: 80px;
                font-size: 0.65rem;
            }
        }
        
        .swing-trade-btn.active {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
            border-color: rgba(255, 255, 255, 0.4);
            animation: pulse 2s infinite;
        }
        
        .swing-trade-btn i {
            margin-right: 8px;
            animation: bounce 2s infinite;
        }
        
        /* Estilos para os novos botões de análise */
        .filter-btn.analysis-btn {
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .filter-btn.analysis-btn:hover {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            transform: translateY(-2px);
        }
        
        .filter-btn.analysis-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            border-color: var(--primary-light);
        }
        
        .filter-btn.analysis-btn.active::after {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        }
        
        /* Cores específicas para cada tipo de análise */
        .filter-btn[data-filter="strong-buy"].active {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .filter-btn[data-filter="medium-buy"].active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .filter-btn[data-filter="neutral"].active {
            background: linear-gradient(135deg, #6b7280, #4b5563);
        }
        
        .filter-btn[data-filter="medium-sell"].active {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .filter-btn[data-filter="strong-sell"].active {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        /* Crypto Table */
        .crypto-table-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            backdrop-filter: blur(20px);
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 20px 0;
        }
        
        /* Indicador de scroll horizontal para mobile */
        .scroll-hint {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            background: rgba(99, 102, 241, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            z-index: 10;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideInRight 0.5s ease;
            pointer-events: none;
        }
        
        /* Ocultar colunas desktop-only em mobile */
        .desktop-only {
            display: table-cell;
        }
        
        .scroll-hint.left {
            right: auto;
            left: 10px;
            animation: slideInLeft 0.5s ease;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateY(-50%) translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateY(-50%) translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInLeft {
            from {
                transform: translateY(-50%) translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(-50%) translateX(0);
                opacity: 1;
            }
        }
        

        
        .crypto-table-container::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        .crypto-table-container::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: var(--border-radius-md);
        }
        
        .crypto-table-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius-md);
        }
        
        .crypto-table-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-light), var(--secondary-light));
        }
        
        .crypto-table-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        }
        
        .crypto-table-container::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--secondary-color), transparent);
            opacity: 0.3;
        }
        
        .crypto-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }
        
        .crypto-table th {
            background: rgba(30, 41, 59, 0.8);
            padding: 20px;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* Larguras específicas para colunas para garantir alinhamento */
        .crypto-table th:nth-child(1) { width: 8%; }  /* # */
        .crypto-table th:nth-child(2) { width: 25%; } /* Nome */
        .crypto-table th:nth-child(3) { width: 15%; } /* Preço */
        .crypto-table th:nth-child(4) { width: 12%; } /* 24h % */
        .crypto-table th:nth-child(5) { width: 12%; } /* 7d % */
        .crypto-table th:nth-child(6) { width: 15%; } /* Cap. de Mercado */
        .crypto-table th:nth-child(7) { width: 15%; } /* Volume (24h) */
        .crypto-table th:nth-child(8) { width: 15%; } /* Circulação */
        .crypto-table th:nth-child(9) { width: 15%; } /* Gráfico 7d */
        
        
        
        .crypto-table th::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            opacity: 0.5;
        }
        
        
        
        .crypto-table td {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: middle;
        }
        
        
        
        .crypto-table tbody tr:last-child td {
            border-bottom: none;
        }
        
        
        
        .crypto-table tbody tr {
            cursor: pointer;
            transition: background 0.3s ease;
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
        }
        
        .crypto-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .crypto-table tbody tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.02);
        }
        
        
        
        /* Animações de entrada das linhas */
        .crypto-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
        .crypto-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
        .crypto-table tbody tr:nth-child(3) { animation-delay: 0.3s; }
        .crypto-table tbody tr:nth-child(4) { animation-delay: 0.4s; }
        .crypto-table tbody tr:nth-child(5) { animation-delay: 0.5s; }
        .crypto-table tbody tr:nth-child(6) { animation-delay: 0.6s; }
        .crypto-table tbody tr:nth-child(7) { animation-delay: 0.7s; }
        .crypto-table tbody tr:nth-child(8) { animation-delay: 0.8s; }
        .crypto-table tbody tr:nth-child(9) { animation-delay: 0.9s; }
        .crypto-table tbody tr:nth-child(10) { animation-delay: 1.0s; }
        
        .crypto-name {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .crypto-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .crypto-info h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-primary);
        }
        
        .crypto-symbol {
            font-size: 0.875rem;
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
        }
        
        
        
        .price {
            font-weight: 600;
            font-size: 1.125rem;
            color: var(--text-primary);
            text-align: right;
        }
        
        
        
        .percentage {
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            display: inline-block;
            min-width: 80px;
            text-align: center;
        }
        
        .percentage.positive {
            background: rgba(16, 185, 129, 0.15);
            color: #00d4aa;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .percentage.negative {
            background: rgba(239, 68, 68, 0.15);
            color: #ff6b6b;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .market-cap, .volume, .circulation {
            font-weight: 500;
            text-align: right;
        }
        
        .sparkline-chart {
            width: 120px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* Swing Trade Score */
        .swing-trade-score {
            margin-top: 12px;
            padding: 12px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .swing-trade-score:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .score-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-md);
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .score-bar::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius-md);
            opacity: 0.3;
            z-index: -1;
        }
        
        .score-fill {
            height: 100%;
            border-radius: var(--border-radius-md);
            transition: width var(--transition-slow);
            position: relative;
            z-index: 1;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .score-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        .score-text {
            font-size: 0.9rem;
            font-weight: 700;
            text-align: center;
            display: block;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .score-text:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }
        
        .score-text i {
            margin-right: 6px;
            color: var(--accent-color);
            animation: twinkle 1.5s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Cabeçalho de ordenação */
        .sorting-header {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(99, 102, 241, 0.15), rgba(16, 185, 129, 0.1));
            border-radius: var(--border-radius-xl);
            margin: 16px 20px;
            border: 2px solid rgba(245, 158, 11, 0.3);
            box-shadow: 
                0 8px 25px rgba(245, 158, 11, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .sorting-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-color), var(--primary-color), var(--secondary-color));
            animation: shimmer 3s ease-in-out infinite;
        }
        
        .sorting-header td {
            text-align: center;
            padding: 24px 20px;
            background: transparent;
            position: relative;
            z-index: 1;
        }
        
        .sorting-header div {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: var(--accent-color);
            font-weight: 800;
            font-size: 1.1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .sorting-header i {
            font-size: 1.4rem;
            animation: bounce 2s infinite;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        .sorting-header span {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }
        
        /* Swing Trade Banner */
        .swing-trade-banner {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
            border-radius: var(--border-radius-2xl);
            padding: 32px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(245, 158, 11, 0.2);
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }
        
        .swing-trade-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        .banner-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }
        
        .banner-header i {
            font-size: 2rem;
            color: var(--accent-color);
            filter: drop-shadow(0 4px 8px rgba(245, 158, 11, 0.3));
        }
        
        .banner-header h3 {
            font-size: 1.75rem;
            color: var(--text-primary);
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .banner-description {
            margin-bottom: 32px;
            position: relative;
            z-index: 1;
        }
        
        .banner-description p {
            margin-bottom: 20px;
            color: var(--text-secondary);
            font-size: 1.125rem;
            line-height: 1.7;
        }
        
        .banner-description ul {
            list-style: none;
            padding-left: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }
        
        .banner-description li {
            margin-bottom: 0;
            padding: 16px 20px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            position: relative;
            transition: var(--transition-normal);
        }
        
        .banner-description li:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .banner-description li:before {
            content: "🎯";
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.25rem;
        }
        
        .banner-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 24px;
            position: relative;
            z-index: 1;
        }
        
        .stat {
            text-align: center;
            padding: 24px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
        }
        
        .stat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .stat:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .stat-number {
            display: block;
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 8px;
            text-shadow: 0 4px 8px rgba(99, 102, 241, 0.3);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* Loading e Error States */
        .loading, .error {
            text-align: center;
            padding: 60px 20px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-5px); }
            60% { transform: translateY(-3px); }
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .loading p, .error p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .error i {
            font-size: 3rem;
            color: var(--error-color);
            margin-bottom: 20px;
        }
        
        .error button {
            padding: 12px 25px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .error button:hover {
            background: #00b894;
            transform: translateY(-2px);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: var(--bg-secondary);
            margin: 3% auto;
            padding: 0;
            border-radius: var(--border-radius-2xl);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-2xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            animation: fadeInUp 0.5s ease;
        }
        

        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 32px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(30, 41, 59, 0.5);
        }
        
        .modal-header h2 {
            font-size: 2rem;
            color: var(--text-primary);
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .close-btn {
            background: var(--bg-glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 12px;
            border-radius: 50%;
            transition: var(--transition-normal);
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-btn:hover {
            background: var(--bg-glass-hover);
            color: var(--text-primary);
            transform: rotate(90deg);
        }
        
        .modal-body {
            padding: 40px;
        }
        
        .crypto-details {
            color: var(--text-primary);
        }
        
        .crypto-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .crypto-basic-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .crypto-price-info h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .crypto-stats {
            margin-top: 30px;
        }
        
        .stat-card {
            background: var(--bg-glass);
            padding: 24px;
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition-normal);
        }
        
        .stat-card:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .stat-card h4 {
            color: var(--text-secondary);
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .stat-card p {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .crypto-chart {
            margin-top: 30px;
        }
        
        .crypto-chart h4 {
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        
        /* Mensagens de Aviso */
        .warning-message {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
            animation: slideInRight 0.3s ease;
        }
        
        .warning-content {
            background: rgba(255, 165, 0, 0.2);
            color: var(--warning-color);
            padding: 15px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 165, 0, 0.3);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Dashboard de Recomendações */
        .recommendations-dashboard {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius-xl);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dashboard-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .dashboard-header h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .dashboard-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .recommendation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .rec-card {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
        }
        
        .rec-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .rec-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }
        
        .rec-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .rec-content h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        .rec-count {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        .rec-content p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* Cores específicas para cada categoria */
        .rec-card.strong-buy::before {
            background: linear-gradient(90deg, #10b981, #059669);
        }
        
        .rec-card.medium-buy::before {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        }
        
        .rec-card.neutral::before {
            background: linear-gradient(90deg, #6b7280, #4b5563);
        }
        
        .rec-card.medium-sell::before {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }
        
        .rec-card.strong-sell::before {
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }
        
        .top-recommendations {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .top-recommendations h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .top-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .top-item {
            background: var(--bg-glass);
            border-radius: var(--border-radius-md);
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: var(--transition-normal);
        }
        
        .top-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-md);
        }
        
        .top-rank {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            min-width: 40px;
        }
        
        .top-info h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }
        
        .top-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 0;
        }
        
        .top-score {
            margin-left: auto;
            background: var(--primary-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        /* 🚀 ESTILOS PARA O BANNER DE OPORTUNIDADES DE CURTO PRAZO */
        .short-term-opportunities-banner {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%);
            border-radius: var(--border-radius-2xl);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(99, 102, 241, 0.2);
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }
        
        .short-term-opportunities-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        .short-term-opportunities-banner .banner-header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .short-term-opportunities-banner .banner-header h3 {
            font-size: 1.75rem;
            color: var(--text-primary);
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }
        
        .short-term-opportunities-banner .banner-header p {
            color: var(--text-secondary);
            font-size: 1.125rem;
            font-weight: 500;
        }
        
        .opportunities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .opportunity-card {
            background: var(--bg-glass);
            border-radius: var(--border-radius-xl);
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .opportunity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .opportunity-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
            border-color: rgba(99, 102, 241, 0.3);
        }
        
        .opportunity-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .opportunity-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary-color);
        }
        
        .opportunity-info h4 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .opportunity-symbol {
            font-size: 0.9rem;
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        .opportunity-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .metric-item {
            text-align: center;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .metric-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }
        
        .metric-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .opportunity-potential {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(16, 185, 129, 0.1));
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(99, 102, 241, 0.2);
        }
        
        .potential-text {
            font-size: 0.9rem;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .entry-timing {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        .banner-footer {
            text-align: center;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
        }
        
        .banner-footer p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        /* Cores específicas para cada nível de oportunidade */
        .opportunity-card.excellent::before {
            background: linear-gradient(90deg, #10b981, #059669);
        }
        
        .opportunity-card.strong::before {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        }
        
        .opportunity-card.medium::before {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }
        
        /* Responsividade para mobile */
        @media (max-width: 768px) {
            .recommendations-dashboard {
                padding: 1rem;
            }
            
            .recommendation-cards {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 1rem;
            }
            
            .rec-card {
                padding: 1rem;
            }
            
            .rec-icon {
                font-size: 2rem;
            }
            
            .rec-count {
                font-size: 1.5rem;
            }
            
            .top-list {
                grid-template-columns: 1fr;
            }
        }
        
        /* Estilos para a coluna de Score de Compra */
        .buy-score {
            text-align: center;
            vertical-align: middle;
        }
        
        .buy-score-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .score-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 0 auto;
        }
        
        .score-text {
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
            z-index: 1;
        }
        
        .recommendation-text {
            font-size: 0.7rem;
            font-weight: 600;
            text-align: center;
            padding: 2px 6px;
            border-radius: var(--border-radius-sm);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .recommendation-text.positive {
            color: var(--success-color);
        }
        
        .recommendation-text.negative {
            color: var(--danger-color);
        }
        
        /* Banner de Análise Inteligente */
        .analysis-info-banner {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: var(--border-radius-xl);
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px);
        }
        
        .analysis-info-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .analysis-decoration {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
        
        .analysis-decoration.decoration-1 {
            width: 100px;
            height: 100px;
            top: -50px;
            right: -50px;
            animation-delay: 0s;
        }
        
        .analysis-decoration.decoration-2 {
            width: 60px;
            height: 60px;
            bottom: -30px;
            left: -30px;
            animation-delay: 2s;
        }
        
        .analysis-decoration.decoration-3 {
            width: 80px;
            height: 80px;
            top: 50%;
            right: 10%;
            animation-delay: 4s;
        }
        
        .analysis-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1.5rem;
            padding: 10px 15px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: var(--success-color);
            font-weight: 600;
        }
        
        .analysis-btn-large {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: var(--border-radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        
        .analysis-btn-large:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(99, 102, 241, 0.4);
        }
        
        /* CSS para o botão swing-trade-btn-large */
        .swing-trade-btn-large {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: var(--border-radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }
        
        .swing-trade-btn-large:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(245, 158, 11, 0.4);
        }

        /* Footer */
        .footer {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px 0;
            text-align: center;
            margin-top: 80px;
            position: relative;
        }
        
        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        }
        
        .footer p {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            display: inline-block;
        }
        
        .footer p::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: var(--transition-normal);
        }
        
        .footer:hover p::after {
            width: 100%;
        }
        
        /* ===== ANIMAÇÕES DE PREÇO EM TEMPO REAL ===== */
        
        .price-updating {
            transition: all 0.3s ease;
        }
        
        .price-up {
            animation: priceUp 2s ease-out;
            background: rgba(0, 212, 170, 0.1);
            border-radius: 4px;
            padding: 2px 6px;
        }
        
        .price-down {
            animation: priceDown 2s ease-out;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 4px;
            padding: 2px 6px;
        }
        
        @keyframes priceUp {
            0% {
                background: rgba(0, 212, 170, 0.3);
                transform: scale(1.05);
            }
            50% {
                background: rgba(0, 212, 170, 0.2);
                transform: scale(1.02);
            }
            100% {
                background: rgba(0, 212, 170, 0.1);
                transform: scale(1);
            }
        }
        
        @keyframes priceDown {
            0% {
                background: rgba(255, 107, 107, 0.3);
                transform: scale(1.05);
            }
            50% {
                background: rgba(255, 107, 107, 0.2);
                transform: scale(1.02);
            }
            100% {
                background: rgba(255, 107, 107, 0.1);
                transform: scale(1);
            }
        }
        
        /* Controles de Tempo Real */
        .real-time-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-primary);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }
        
        .control-btn:active {
            transform: scale(0.95);
        }
        
        .control-btn i {
            font-size: 0.9rem;
        }
        
        /* Indicador de atualização em tempo real */
        .real-time-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1500;
            background: rgba(0, 212, 170, 0.2);
            color: var(--success-color);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 170, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-stats {
                gap: 20px;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: none;
            }
            
            .filters {
                justify-content: center;
            }
            
                    /* ===== NOVO LAYOUT MOBILE EM LISTA VERTICAL ===== */
        /* Layout mobile completamente reorganizado para lista vertical */
        @media (max-width: 768px) {
            /* Ocultar elementos desktop */
            .crypto-table-container {
                display: none !important;
            }
            
            /* Mostrar lista mobile */
            .crypto-list-mobile {
                display: block !important;
            }
            
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-stats {
                gap: 20px;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: none;
            }
            
            .filters {
                justify-content: center;
            }
            
            /* ===== NOVO LAYOUT MOBILE EM LISTA VERTICAL ===== */
            
            /* Ocultar tabela desktop em mobile */
            .crypto-table-container {
                display: none !important;
            }
            
            /* Mostrar lista mobile */
            .crypto-list-mobile {
                display: block !important;
            }
            
            /* Container da lista mobile */
            .crypto-list-mobile {
                display: none;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 16px;
                backdrop-filter: blur(20px);
                overflow: hidden;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.1);
                margin: 20px 0;
            }
            
            /* Cabeçalho da lista mobile */
            .mobile-list-header {
                display: flex;
                background: rgba(30, 41, 59, 0.8);
                padding: 20px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                font-weight: 600;
                color: var(--text-primary);
                font-size: 0.875rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
            }
            
            .mobile-list-header .col-name {
                flex: 2;
            }
            
            .mobile-list-header .col-24h {
                flex: 1;
                text-align: center;
            }
            
            .mobile-list-header .col-7d {
                flex: 1;
                text-align: center;
            }
            
            /* Card individual de criptomoeda */
            .crypto-card {
                display: flex;
                align-items: center;
                padding: 20px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                transition: background 0.3s ease;
                cursor: pointer;
            }
            
            .crypto-card:last-child {
                border-bottom: none;
            }
            
            .crypto-card:hover {
                background: rgba(255, 255, 255, 0.05);
            }
            
            .crypto-card:nth-child(even) {
                background: rgba(255, 255, 255, 0.02);
            }
            
            /* Coluna do nome (flex: 2) */
            .crypto-card .col-name {
                flex: 2;
                display: flex;
                align-items: center;
                gap: 15px;
            }
            
            /* Ícone de estrela para favoritos */
            .favorite-star {
                color: var(--text-muted);
                font-size: 1.2rem;
                cursor: pointer;
                transition: var(--transition-normal);
                margin-right: 10px;
            }
            
            .favorite-star:hover {
                color: var(--accent-color);
                transform: scale(1.1);
            }
            
            .favorite-star.active {
                color: var(--accent-color);
            }
            
            /* Informações da criptomoeda */
            .crypto-info-mobile h3 {
                font-size: 1.125rem;
                font-weight: 700;
                margin-bottom: 4px;
                color: var(--text-primary);
                background: linear-gradient(135deg, var(--text-primary), var(--primary-light));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .crypto-symbol-mobile {
                font-size: 0.875rem;
                color: var(--text-secondary);
                font-weight: 600;
                background: var(--bg-tertiary);
                padding: 4px 8px;
                border-radius: var(--border-radius-md);
                display: inline-block;
            }
            
            .crypto-price-mobile {
                font-size: 1.125rem;
                font-weight: 600;
                color: var(--text-primary);
                margin: 8px 0;
                padding: 6px 12px;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 8px;
                display: inline-block;
                text-align: center;
                min-width: 120px;
            }
            

            
            /* Colunas de porcentagem (flex: 1 cada) */
            .crypto-card .col-24h,
            .crypto-card .col-7d {
                flex: 1;
                text-align: center;
            }
            
            /* Porcentagens com design melhorado */
            .percentage-mobile {
                font-weight: 600;
                padding: 8px 12px;
                border-radius: 20px;
                font-size: 0.875rem;
                display: inline-block;
                min-width: 70px;
                text-align: center;
            }
            
            .percentage-mobile.positive {
                background: rgba(16, 185, 129, 0.15);
                color: #00d4aa;
                border: 1px solid rgba(16, 185, 129, 0.3);
            }
            
            .percentage-mobile.negative {
                background: rgba(239, 68, 68, 0.15);
                color: #ff6b6b;
                border: 1px solid rgba(239, 68, 68, 0.3);
            }
            
            /* Score de swing trade para mobile */
            .swing-trade-score-mobile {
                margin-top: 10px;
                padding: 10px;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border-radius: var(--border-radius-lg);
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                transition: all 0.3s ease;
            }
            
            .swing-trade-score-mobile:hover {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            }
            
            .score-bar-mobile {
                width: 100%;
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: var(--border-radius-md);
                overflow: hidden;
                margin-bottom: 8px;
                position: relative;
                box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .score-fill-mobile {
                height: 100%;
                border-radius: var(--border-radius-md);
                transition: width var(--transition-slow);
                position: relative;
                z-index: 1;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
            }
            
            .score-text-mobile {
                font-size: 0.85rem;
                font-weight: 700;
                text-align: center;
                display: block;
                padding: 5px 10px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: var(--border-radius-md);
                border: 1px solid rgba(255, 255, 255, 0.1);
                transition: all 0.3s ease;
            }
            
            .score-text-mobile:hover {
                background: rgba(255, 255, 255, 0.15);
                transform: scale(1.05);
            }
            
            .score-text-mobile i {
                margin-right: 5px;
                color: var(--accent-color);
                animation: twinkle 1.5s infinite;
            }
            
            /* Animações para mobile */
            .crypto-card {
                animation: fadeInUp 0.4s ease forwards;
                opacity: 0;
                transform: translateY(15px);
            }
            
            .crypto-card:nth-child(1) { animation-delay: 0.1s; }
            .crypto-card:nth-child(2) { animation-delay: 0.2s; }
            .crypto-card:nth-child(3) { animation-delay: 0.3s; }
            .crypto-card:nth-child(4) { animation-delay: 0.4s; }
            .crypto-card:nth-child(5) { animation-delay: 0.5s; }
            
            @keyframes fadeInUp {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            /* Melhorias nos controles para mobile */
            .filter-btn {
                padding: 12px 18px;
                font-size: 0.85rem;
                min-width: 90px;
            }
            
            .swing-trade-btn {
                min-width: 130px;
            }
            
            /* Otimizações para header mobile */
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .logo i {
                font-size: 2rem;
            }
            
            .stat-item {
                padding: 12px 16px;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
            
            .stat-label {
                font-size: 0.7rem;
            }
            
            /* Melhorias específicas para dispositivos móveis */
            .connection-status {
                top: 10px;
                left: 10px;
                right: 10px;
                text-align: center;
                font-size: 0.75rem;
                position: fixed;
                z-index: 2000;
            }
            
            .real-time-indicator {
                top: 60px;
                right: 10px;
                left: 10px;
                text-align: center;
                font-size: 0.75rem;
            }
        }
            
            /* Ocultar colunas desktop-only em mobile */
            .desktop-only {
                display: none !important;
            }
            
            /* Larguras específicas para mobile (3 colunas) */
            .crypto-table th:nth-child(1) { width: 25%; }  /* Nome */
            .crypto-table th:nth-child(2) { width: 37.5%; }  /* 24h % */
            .crypto-table th:nth-child(3) { width: 37.5%; }  /* 7d % */
            
            .crypto-table-container::-webkit-scrollbar {
                height: 8px;
            }
            
            .crypto-table-container::-webkit-scrollbar-track {
                background: var(--bg-secondary);
                border-radius: var(--border-radius-md);
            }
            
            .crypto-table-container::-webkit-scrollbar-thumb {
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                border-radius: var(--border-radius-md);
            }
            
            .crypto-table {
                min-width: 700px; /* Largura mínima para 3 colunas mobile */
                table-layout: fixed; /* Layout fixo para melhor performance */
                border-collapse: separate;
                border-spacing: 0;
            }
            
            /* Melhorar legibilidade das linhas no mobile */
            .crypto-table tbody tr {
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                transition: var(--transition-normal);
            }
            
                    .crypto-table tbody tr:hover {
            background: var(--bg-glass-hover);
            transform: scale(1.002);
            box-shadow: var(--shadow-md);
        }
            
            /* Otimizar células para mobile */
            .crypto-table th,
            .crypto-table td {
                padding: 16px 16px;
                font-size: 0.85rem;
                vertical-align: middle;
                white-space: nowrap; /* Evitar quebra de linha */
            }
            
            /* Melhorar exibição do nome da cripto no mobile */
            .crypto-name {
                min-width: 160px;
                gap: 12px;
            }
            
            .crypto-icon {
                width: 40px;
                height: 40px;
                border: 2px solid rgba(255, 255, 255, 0.2);
                flex-shrink: 0; /* Evitar que a imagem encolha */
            }
            
            .crypto-info h3 {
                font-size: 1rem;
                font-weight: 700;
                margin-bottom: 4px;
                line-height: 1.2;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            .crypto-symbol {
                font-size: 0.8rem;
                padding: 4px 8px;
                white-space: nowrap;
            }
            
            /* Otimizar preços para mobile */
            .price {
                font-size: 1.1rem;
                font-weight: 700;
                color: var(--text-primary);
                text-align: right;
                white-space: nowrap;
            }
            
            /* Melhorar porcentagens para mobile */
            .percentage {
                padding: 8px 12px;
                min-width: 70px;
                font-size: 0.85rem;
                font-weight: 600;
                white-space: nowrap;
                text-align: center;
                display: inline-block;
            }
            
            /* Melhorar alinhamento das colunas mobile */
            .crypto-table th:nth-child(2),
            .crypto-table th:nth-child(3) {
                text-align: center;
            }
            
            .crypto-table td:nth-child(2),
            .crypto-table td:nth-child(3) {
                text-align: center;
            }
            
            /* Otimizar estatísticas para mobile */
            .market-cap, .volume, .circulation {
                font-size: 0.85rem;
                font-weight: 500;
                color: var(--text-secondary);
                text-align: right;
                white-space: nowrap;
            }
            
            /* Melhorar gráfico sparkline no mobile */
            .sparkline-chart {
                width: 100px;
                height: 35px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: var(--border-radius-md);
                background: rgba(255, 255, 255, 0.02);
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Score de swing trade otimizado para mobile */
            .swing-trade-score {
                margin-top: 8px;
            }
            
            .score-bar {
                width: 100%;
                height: 6px;
                margin-bottom: 6px;
            }
            
            .score-text {
                font-size: 0.8rem;
                font-weight: 600;
            }
            
            /* Animações suaves para mobile */
            .crypto-table tbody tr {
                animation: fadeInUp 0.4s ease forwards;
                opacity: 0;
                transform: translateY(15px);
            }
            
            .crypto-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
            .crypto-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
            .crypto-table tbody tr:nth-child(3) { animation-delay: 0.3s; }
            .crypto-table tbody tr:nth-child(4) { animation-delay: 0.4s; }
            .crypto-table tbody tr:nth-child(5) { animation-delay: 0.5s; }
            
            @keyframes fadeInUp {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            /* Melhorias nos controles para mobile */
            .filter-btn {
                padding: 12px 18px;
                font-size: 0.85rem;
                min-width: 90px;
            }
            
            .swing-trade-btn {
                min-width: 130px;
            }
            
            /* Otimizações para header mobile */
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .logo i {
                font-size: 2rem;
            }
            
            .stat-item {
                padding: 12px 16px;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
            
            .stat-label {
                font-size: 0.7rem;
            }
            
            /* Melhorias específicas para dispositivos móveis */
            .connection-status {
                top: 10px;
                left: 10px;
                right: 10px;
                text-align: center;
                font-size: 0.75rem;
                position: fixed;
                z-index: 2000;
            }
            
            .real-time-indicator {
                top: 60px;
                right: 10px;
                left: 10px;
                text-align: center;
                font-size: 0.75rem;
            }
            

        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .filters {
                gap: 6px;
                justify-content: center;
            }
            
            .filter-btn {
                padding: 6px 10px;
                font-size: 0.7rem;
                min-width: 50px;
                max-width: 70px;
                flex: 1;
            }
            
            .swing-trade-btn {
                min-width: 80px;
                max-width: 90px;
            }
            
            /* Otimizações para lista mobile em telas muito pequenas */
            .crypto-card {
                padding: 16px;
            }
            
            .crypto-info-mobile h3 {
                font-size: 1rem;
            }
            
            .crypto-symbol-mobile {
                font-size: 0.8rem;
                padding: 3px 6px;
            }
            
            .crypto-price-mobile {
                font-size: 1rem;
                padding: 5px 10px;
                min-width: 100px;
            }
            

            
            .percentage-mobile {
                padding: 6px 10px;
                min-width: 60px;
                font-size: 0.8rem;
            }
            
            .score-bar-mobile {
                height: 5px;
                margin-bottom: 4px;
            }
            
                    .score-text-mobile {
                font-size: 0.7rem;
            }
            
            .currency-switcher {
                order: -1;
                margin-bottom: 8px;
            }
            
            .currency-btn {
                font-size: 1.2rem;
            }
            
            .currency-symbol {
                font-size: 1.2rem;
            }
        
        /* Estilos para o gráfico TradingView */
        .tradingview-widget-container {
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }
        
        /* Botões do gráfico */
        .chart-controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        
        .chart-btn {
            padding: 8px 16px;
            border-radius: var(--border-radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-normal);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .chart-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .chart-btn.primary {
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            background: transparent;
        }
        
        .chart-btn.primary:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .chart-btn.accent {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-light));
            color: white;
            border: none;
        }
        
        .chart-btn.accent:hover {
            background: linear-gradient(135deg, var(--accent-light), var(--accent-color));
        }
        

        

        
        .oversold-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(239, 68, 68, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        .oversold-banner-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }
        
        .oversold-banner-header i {
            font-size: 2rem;
            color: #ef4444;
            filter: drop-shadow(0 4px 8px rgba(239, 68, 68, 0.3));
        }
        
        .oversold-banner-header h3 {
            font-size: 1.75rem;
            color: var(--text-primary);
            font-weight: 800;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .oversold-banner-description {
            margin-bottom: 32px;
            position: relative;
            z-index: 1;
        }
        
        .oversold-banner-description p {
            margin-bottom: 20px;
            color: var(--text-secondary);
            font-size: 1.125rem;
            line-height: 1.7;
        }
        
        .oversold-banner-description ul {
            list-style: none;
            padding-left: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }
        
        .oversold-banner-description li {
            margin-bottom: 0;
            padding: 16px 20px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            position: relative;
            transition: var(--transition-normal);
        }
        
        .oversold-banner-description li:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .oversold-banner-description li:before {
            content: "📉";
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.25rem;
        }
        
        .oversold-banner-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 24px;
            position: relative;
            z-index: 1;
        }
        
        .oversold-stat-card {
            background: var(--bg-glass);
            border-radius: var(--border-radius-lg);
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            transition: var(--transition-normal);
        }
        .oversold-stat-card:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .oversold-stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: #ef4444;
            margin-bottom: 8px;
        }
        
        .oversold-stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        /* Lista de Sobrevenda - Estilo Premium */
        .oversold-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 32px;
        }
        
        .oversold-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 24px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition-normal);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .oversold-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(239, 68, 68, 0.1), transparent);
            transition: left 0.6s ease;
        }
        
        .oversold-item:hover::before {
            left: 100%;
        }
        
        .oversold-item:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-xl);
            border-color: rgba(239, 68, 68, 0.3);
        }
        
        .oversold-rank {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            min-width: 60px;
            text-align: center;
            padding: 12px;
            border-radius: var(--border-radius-lg);
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
        
        .oversold-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .oversold-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .oversold-details h4 {
            margin: 0;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .oversold-symbol {
            font-size: 0.9rem;
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        .oversold-price {
            text-align: center;
            min-width: 120px;
        }
        
        .oversold-price .current-price {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .oversold-price .price-change {
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .oversold-price .price-change.positive {
            color: #00d4aa;
        }
        
        .oversold-price .price-change.negative {
            color: #ef4444;
        }
        
        .oversold-rsi {
            text-align: center;
            min-width: 80px;
        }
        
        .rsi-value {
            font-size: 1.4rem;
            font-weight: 800;
            margin-bottom: 8px;
            padding: 8px 12px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid;
        }
        
        .rsi-value.rsi-extreme {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.15);
            border-color: rgba(239, 68, 68, 0.4);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.2);
        }
        
        .rsi-value.rsi-strong {
            color: #f59e0b;
            background: rgba(245, 158, 11, 0.15);
            border-color: rgba(245, 158, 11, 0.4);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.2);
        }
        
        .rsi-value.rsi-moderate {
            color: #3b82f6;
            background: rgba(59, 130, 246, 0.15);
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
        }
        
        /* Estilos para RSI na tabela de sobrevenda */
        .crypto-table .rsi-value {
            display: inline-block;
            min-width: 60px;
            text-align: center;
            font-weight: 700;
            font-size: 1.1rem;
            border-radius: 10px;
            padding: 8px 12px;
            border: 2px solid;
            transition: all 0.3s ease;
        }
        
        .crypto-table .rsi-value:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .rsi-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .oversold-action {
            min-width: 120px;
        }
        
        .oversold-action .chart-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .oversold-action .chart-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }
        
        .oversold-action .chart-btn:hover::before {
            left: 100%;
        }
        
        .oversold-action .chart-btn:hover {
            background: linear-gradient(135deg, #dc2626, #ef4444);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
        }
        
        .oversold-footer {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));
            border-radius: 16px;
            border: 1px solid rgba(239, 68, 68, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .oversold-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.05) 50%, transparent 70%);
            animation: shimmer 4s infinite;
        }
        
        .oversold-footer p {
            margin: 0;
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }
        
        /* ===== GRÁFICO DE CRIPTO ===== */
        
        .chart-container {
            width: 100%;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .crypto-info-chart {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .crypto-icon-chart {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .crypto-info-chart h3 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .crypto-symbol-chart {
            font-size: 0.9rem;
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        .price-info-chart {
            text-align: right;
        }
        
        .current-price-chart {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .price-change-chart {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .price-change-chart.positive {
            color: #00d4aa;
        }
        
        .price-change-chart.negative {
            color: #ef4444;
        }
        
        .tradingview-chart {
            margin-bottom: 20px;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .chart-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .chart-controls .chart-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
        }
        
        .chart-controls .chart-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }
        
        .chart-controls .chart-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* ===== MODAL RESPONSIVO PARA MOBILE ===== */
        /* ===== DESIGN MODERNO PARA MODAL MOBILE ===== */
        
        @media (max-width: 768px) {
            .modal-content {
                margin: 0;
                width: 100%;
                height: 100vh;
                max-height: 100vh;
                border-radius: 0;
                overflow-y: auto;
                background: linear-gradient(135deg, #0f172a, #1e293b);
            }
            
            /* Mostrar lista mobile e ocultar tabela desktop no modal de sobrevenda */
            .modal-content .crypto-table-container {
                display: none !important;
            }
            
            .modal-content .crypto-list-mobile {
                display: block !important;
            }
            

            
            .modal-header {
                padding: 20px;
                position: sticky;
                top: 0;
                background: rgba(15, 23, 42, 0.95);
                z-index: 10;
                backdrop-filter: blur(20px);
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .modal-header h2 {
                font-size: 1.5rem;
                flex: 1;
                margin-right: 15px;
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .close-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
                padding: 8px;
                flex-shrink: 0;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                transition: all 0.3s ease;
            }
            
            .close-btn:hover {
                background: rgba(255, 255, 255, 0.2);
                transform: rotate(90deg);
            }
            
            .modal-body {
                padding: 20px;
            }
            
            /* ===== HEADER HERO SECTION ===== */
            .crypto-header-mobile {
                margin-bottom: 30px;
            }
            
            .crypto-hero-section {
                display: flex;
                align-items: center;
                gap: 20px;
                margin-bottom: 25px;
                padding: 20px;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
            }
            
            .crypto-avatar-container {
                position: relative;
                flex-shrink: 0;
            }
            
            .crypto-avatar {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                border: 3px solid var(--primary-color);
                box-shadow: 0 0 25px rgba(0, 212, 170, 0.4);
                transition: all 0.3s ease;
            }
            
            .crypto-avatar:hover {
                transform: scale(1.05);
                box-shadow: 0 0 35px rgba(0, 212, 170, 0.6);
            }
            
            .crypto-status-indicator {
                position: absolute;
                bottom: 5px;
                right: 5px;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                border: 3px solid var(--bg-secondary);
            }
            
            .crypto-status-indicator.positive {
                background: var(--primary-color);
                box-shadow: 0 0 10px rgba(0, 212, 170, 0.6);
            }
            
            .crypto-status-indicator.negative {
                background: var(--secondary-color);
                box-shadow: 0 0 10px rgba(255, 107, 53, 0.6);
            }
            
            .crypto-title-section {
                flex: 1;
            }
            
            .crypto-name {
                font-size: 1.8rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 8px;
                background: linear-gradient(135deg, var(--text-primary), var(--primary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .crypto-symbol-badge {
                display: inline-block;
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                color: white;
                padding: 6px 12px;
                border-radius: 20px;
                font-size: 0.9rem;
                font-weight: 600;
                margin-bottom: 8px;
                box-shadow: 0 4px 15px rgba(0, 212, 170, 0.3);
            }
            
            .crypto-rank {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            /* ===== PRICE SECTION ===== */
            .crypto-price-section {
                text-align: center;
                padding: 25px;
                background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(255, 107, 53, 0.05));
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
            }
            
            .current-price {
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 20px;
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .price-changes {
                display: flex;
                justify-content: center;
                gap: 20px;
                flex-wrap: wrap;
            }
            
            .price-change-item {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 12px 20px;
                border-radius: 25px;
                font-weight: 600;
                font-size: 0.95rem;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                transition: all 0.3s ease;
            }
            
            .price-change-item.positive {
                background: rgba(0, 212, 170, 0.2);
                color: var(--primary-color);
                border-color: rgba(0, 212, 170, 0.3);
            }
            
            .price-change-item.negative {
                background: rgba(255, 107, 53, 0.2);
                color: var(--secondary-color);
                border-color: rgba(255, 107, 53, 0.3);
            }
            
            .price-change-item:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            }
            
            .change-period {
                font-size: 0.8rem;
                opacity: 0.8;
            }
            
            /* ===== STATS CARDS ===== */
            .crypto-stats-mobile {
                margin-bottom: 30px;
            }
            
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .stat-card-mobile {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 20px;
                padding: 20px;
                backdrop-filter: blur(20px);
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }
            
            .stat-card-mobile::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            }
            
            .stat-card-mobile:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            
            .stat-card-mobile.market-cap::before { background: linear-gradient(90deg, #00d4aa, #0099cc); }
            .stat-card-mobile.volume::before { background: linear-gradient(90deg, #ff6b35, #ffa500); }
            .stat-card-mobile.supply::before { background: linear-gradient(90deg, #9c27b0, #e91e63); }
            .stat-card-mobile.ath::before { background: linear-gradient(90deg, #ffd700, #ff6b35); }
            
            .stat-icon {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 15px;
                font-size: 1.2rem;
                color: var(--primary-color);
            }
            
            .stat-content {
                text-align: center;
            }
            
            .stat-label {
                color: var(--text-secondary);
                font-size: 0.85rem;
                font-weight: 500;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                margin-bottom: 8px;
            }
            
            .stat-value {
                color: var(--text-primary);
                font-size: 1.1rem;
                font-weight: 700;
                margin-bottom: 5px;
            }
            
            .stat-symbol {
                color: var(--primary-color);
                font-size: 0.8rem;
                font-weight: 600;
            }
            
            
        




        /* ===== CHART SECTION ===== */
        .crypto-chart-mobile {
            margin-bottom: 30px;
        }
            
            .chart-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .chart-title {
                color: var(--text-primary);
                font-size: 1.2rem;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .chart-title i {
                color: var(--primary-color);
            }
            
            .chart-period-selector {
                display: flex;
                gap: 8px;
            }
            
            .period-btn {
                padding: 8px 16px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                background: rgba(255, 255, 255, 0.05);
                color: var(--text-secondary);
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .period-btn.active,
            .period-btn:hover {
                background: var(--primary-color);
                color: white;
                border-color: var(--primary-color);
                transform: translateY(-2px);
            }
            
            .chart-container {
                background: rgba(255, 255, 255, 0.03);
                border-radius: 20px;
                padding: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                margin-bottom: 20px;
            }
            
            .tradingview-widget {
                height: 350px;
                border-radius: 15px;
                overflow: hidden;
            }
            
            .chart-actions {
                display: flex;
                gap: 15px;
                flex-wrap: wrap;
            }
            
            .action-btn {
                flex: 1;
                min-width: 150px;
                padding: 15px 20px;
                border: none;
                border-radius: 25px;
                font-weight: 600;
                font-size: 0.95rem;
                text-decoration: none;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
                transition: all 0.3s ease;
                cursor: pointer;
                text-align: center;
            }
            
            .action-btn.primary {
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                color: white;
                box-shadow: 0 4px 15px rgba(0, 212, 170, 0.3);
            }
            
            .action-btn.secondary {
                background: linear-gradient(135deg, var(--secondary-color), var(--secondary-light));
                color: white;
                box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
            }
            
            .action-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            }
            
            /* ===== SWING TRADE ANALYSIS ===== */
            .swing-trade-mobile {
                margin-bottom: 30px;
            }
            
            .analysis-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 25px;
                flex-wrap: wrap;
                gap: 20px;
            }
            
            .analysis-title {
                color: var(--text-primary);
                font-size: 1.2rem;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .analysis-title i {
                color: var(--primary-color);
            }
            
            .overall-score {
                text-align: center;
            }
            
            .score-circle {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 10px;
                font-weight: 800;
                font-size: 1.2rem;
                color: white;
                position: relative;
            }
            
            .score-circle.excellent { background: linear-gradient(135deg, #00d4aa, #00b894); }
            .score-circle.good { background: linear-gradient(135deg, #0099cc, #0077b3); }
            .score-circle.average { background: linear-gradient(135deg, #ffa500, #ff8c00); }
            .score-circle.below-average { background: linear-gradient(135deg, #ff6b35, #ff5722); }
            .score-circle.poor { background: linear-gradient(135deg, #ff6b6b, #ff4757); }
            
            .score-circle::before {
                content: '';
                position: absolute;
                top: -3px;
                left: -3px;
                right: -3px;
                bottom: -3px;
                border-radius: 50%;
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                z-index: -1;
                opacity: 0.3;
            }
            
            .score-label {
                color: var(--text-secondary);
                font-size: 0.85rem;
                font-weight: 500;
            }
            
            .metrics-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .metric-card {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                padding: 18px;
                backdrop-filter: blur(20px);
                transition: all 0.3s ease;
            }
            
            .metric-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }
            
            .metric-header {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-bottom: 12px;
                color: var(--text-secondary);
                font-size: 0.85rem;
                font-weight: 500;
            }
            
            .metric-header i {
                color: var(--primary-color);
                font-size: 0.9rem;
            }
            
            .metric-score {
                font-size: 1.1rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 10px;
                text-align: center;
            }
            
            .metric-bar {
                width: 100%;
                height: 6px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 3px;
                overflow: hidden;
            }
            
            .metric-fill {
                height: 100%;
                background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
                border-radius: 3px;
                transition: width 1s ease;
            }
            
            /* ===== ADDITIONAL INFO ===== */
            .additional-info {
                margin-bottom: 30px;
            }
            
            .info-card {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 20px;
                padding: 20px;
                backdrop-filter: blur(20px);
            }
            
            .info-header {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 20px;
                color: var(--text-primary);
                font-size: 1.1rem;
                font-weight: 600;
            }
            
            .info-header i {
                color: var(--primary-color);
            }
            
            .info-content {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }
            
            .info-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 12px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .info-row:last-child {
                border-bottom: none;
            }
            
            .info-label {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            .info-value {
                color: var(--text-primary);
                font-size: 0.9rem;
                font-weight: 600;
            }
        }
        
        @media (max-width: 480px) {
            .modal-header {
                padding: 15px;
            }
            
            .modal-header h2 {
                font-size: 1.3rem;
            }
            
            .close-btn {
                width: 36px;
                height: 36px;
                font-size: 1.1rem;
            }
            
            .modal-body {
                padding: 15px;
            }
            
            .crypto-hero-section {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .crypto-avatar {
                width: 70px;
                height: 70px;
            }
            
            .crypto-name {
                font-size: 1.5rem;
            }
            
            .current-price {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .stat-card-mobile {
                padding: 18px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .tradingview-widget {
                height: 300px;
            }
            
            .chart-actions {
                flex-direction: column;
            }
            
            .action-btn {
                min-width: auto;
            }
        }
        
        /* ===== ANIMAÇÕES ESPECIAIS PARA MOBILE ===== */
        
        @media (max-width: 768px) {
            .modal-content {
                animation: slideInUp 0.4s ease;
            }
            
            @keyframes slideInUp {
                from {
                    transform: translateY(100%);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }
            
            .crypto-hero-section {
                animation: fadeInUp 0.6s ease;
            }
            
            .crypto-price-section {
                animation: fadeInUp 0.8s ease;
            }
            
            .stat-card-mobile {
                animation: fadeInUp 1s ease;
                animation-fill-mode: both;
            }
            
            .stat-card-mobile:nth-child(1) { animation-delay: 0.1s; }
            .stat-card-mobile:nth-child(2) { animation-delay: 0.2s; }
            .stat-card-mobile:nth-child(3) { animation-delay: 0.3s; }
            .stat-card-mobile:nth-child(4) { animation-delay: 0.4s; }
            
            .crypto-chart-mobile {
                animation: fadeInUp 1.2s ease;
            }
            
            .swing-trade-mobile {
                animation: fadeInUp 1.4s ease;
            }
            
            .additional-info {
                animation: fadeInUp 1.6s ease;
            }
        }
        


            /* Header Desktop */
            .crypto-header-desktop {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 40px;
                gap: 40px;
            }
            
            .crypto-hero-desktop {
                display: flex;
                align-items: center;
                gap: 30px;
                flex: 1;
            }
            
            .crypto-avatar-container-desktop {
                position: relative;
                flex-shrink: 0;
            }
            
            .crypto-avatar-desktop {
                width: 120px;
                height: 120px;
                border-radius: 50%;
                border: 4px solid var(--primary-color);
                box-shadow: 0 0 35px rgba(0, 212, 170, 0.5);
                transition: all 0.3s ease;
            }
            
            .crypto-avatar-desktop:hover {
                transform: scale(1.05);
                box-shadow: 0 0 45px rgba(0, 212, 170, 0.7);
            }
            
            .crypto-status-indicator-desktop {
                position: absolute;
                bottom: 8px;
                right: 8px;
                width: 28px;
                height: 28px;
                border-radius: 50%;
                border: 4px solid var(--bg-secondary);
            }
            
            .crypto-status-indicator-desktop.positive {
                background: var(--primary-color);
                box-shadow: 0 0 15px rgba(0, 212, 170, 0.7);
            }
            
            .crypto-status-indicator-desktop.negative {
                background: var(--secondary-color);
                box-shadow: 0 0 15px rgba(255, 107, 53, 0.7);
            }
            
            .crypto-title-section-desktop {
                flex: 1;
            }
            
            .crypto-name-desktop {
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 12px;
                background: linear-gradient(135deg, var(--text-primary), var(--primary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .crypto-symbol-badge-desktop {
                display: inline-block;
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                color: white;
                padding: 8px 16px;
                border-radius: 25px;
                font-size: 1rem;
                font-weight: 600;
                margin-bottom: 12px;
                box-shadow: 0 6px 20px rgba(0, 212, 170, 0.4);
        }
            .crypto-rank-desktop {
                color: var(--text-secondary);
                font-size: 1rem;
                font-weight: 500;
            }
            
            /* Price Section Desktop */
            .crypto-price-section-desktop {
                text-align: right;
                padding: 30px;
                background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(255, 107, 53, 0.05));
                border-radius: 25px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                min-width: 300px;
            }
            
            .current-price-desktop {
                font-size: 3rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 20px;
                text-shadow: 0 0 20px rgba(0, 212, 170, 0.3);
            }
            
            .price-changes-desktop {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }
            
            .price-change-item-desktop {
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 12px 20px;
                border-radius: 15px;
                font-weight: 600;
                font-size: 1.1rem;
                transition: all 0.3s ease;
            }
            
            .price-change-item-desktop.positive {
                background: rgba(0, 212, 170, 0.15);
                color: var(--primary-color);
                border: 1px solid rgba(0, 212, 170, 0.3);
            }
            
            .price-change-item-desktop.negative {
                background: rgba(255, 107, 53, 0.15);
                color: var(--secondary-color);
                border: 1px solid rgba(255, 107, 53, 0.3);
            }
            
            .price-change-item-desktop:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }
            
            /* Stats Desktop */
            .crypto-stats-desktop {
                margin-bottom: 40px;
            }
            
            .stats-grid-desktop {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 25px;
            }
            
            .stat-card-desktop {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                padding: 30px;
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                transition: all 0.3s ease;
                text-align: center;
            }
            
            .stat-card-desktop:hover {
                transform: translateY(-5px);
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            }
            
            .stat-icon-desktop {
                width: 60px;
                height: 60px;
                margin: 0 auto 20px;
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                color: white;
                box-shadow: 0 8px 25px rgba(0, 212, 170, 0.4);
            }
            
            .stat-label-desktop {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
                margin-bottom: 10px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .stat-value-desktop {
                font-size: 1.4rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 5px;
            }
            
            .stat-symbol-desktop {
                color: var(--primary-color);
                font-size: 0.9rem;
                font-weight: 600;
            }
            
            /* Chart Desktop */
            .crypto-chart-desktop {
                margin-bottom: 40px;
            }
            
            .chart-header-desktop {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 25px;
            }
            
            .chart-title-desktop {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--text-primary);
                display: flex;
                align-items: center;
                gap: 12px;
            }
            
            .chart-period-selector-desktop {
                display: flex;
                gap: 10px;
            }
            
            .period-btn-desktop {
                padding: 10px 20px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                background: rgba(255, 255, 255, 0.05);
                color: var(--text-secondary);
                border-radius: 12px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .period-btn-desktop:hover,
            .period-btn-desktop.active {
                background: var(--primary-color);
                color: white;
                border-color: var(--primary-color);
                transform: translateY(-2px);
            }
            
            .chart-container-desktop {
                height: 500px;
                background: rgba(255, 255, 255, 0.02);
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                overflow: hidden;
            }
            
            .tradingview-widget-desktop {
                width: 100%;
                height: 100%;
            }
            
            .chart-actions-desktop {
                display: flex;
                gap: 15px;
                margin-top: 20px;
                justify-content: center;
            }
            
            .action-btn-desktop {
                padding: 12px 24px;
                border: none;
                border-radius: 15px;
                font-weight: 600;
                font-size: 1rem;
                cursor: pointer;
                transition: all 0.3s ease;
                text-decoration: none;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .action-btn-desktop.primary {
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                color: white;
            }
            
            .action-btn-desktop.secondary {
                background: rgba(255, 255, 255, 0.1);
                color: var(--text-primary);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .action-btn-desktop:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            
            /* Swing Trade Desktop */
            .swing-trade-desktop {
                margin-bottom: 40px;
            }
            
            .analysis-header-desktop {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 30px;
            }
            
            .analysis-title-desktop {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--text-primary);
                display: flex;
                align-items: center;
                gap: 12px;
            }
            
            .overall-score-desktop {
                text-align: center;
            }
            
            .score-circle-desktop {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 10px;
                font-size: 1.2rem;
                font-weight: 800;
                color: white;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            }
            
            .score-circle-desktop.excellent { background: linear-gradient(135deg, #10b981, #34d399); }
            .score-circle-desktop.good { background: linear-gradient(135deg, #3b82f6, #60a5fa); }
            .score-circle-desktop.average { background: linear-gradient(135deg, #f59e0b, #fbbf24); }
            .score-circle-desktop.below-average { background: linear-gradient(135deg, #f97316, #fb923c); }
            .score-circle-desktop.poor { background: linear-gradient(135deg, #ef4444, #f87171); }
            
            .score-label-desktop {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            .metrics-grid-desktop {
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 20px;
            }
            
            .metric-card-desktop {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                padding: 25px;
                border-radius: 18px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                transition: all 0.3s ease;
            }
            
            .metric-card-desktop:hover {
                transform: translateY(-3px);
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
            }
            
            .metric-header-desktop {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 15px;
                color: var(--text-secondary);
                font-weight: 600;
            }
            
            .metric-score-desktop {
                font-size: 1.1rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 12px;
            }
            
            .metric-bar-desktop {
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 4px;
                overflow: hidden;
            }
            
            .metric-fill-desktop {
                height: 100%;
                background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
                border-radius: 4px;
                transition: width 0.8s ease;
            }
            
            /* Additional Info Desktop */
            .additional-info-desktop {
                margin-bottom: 40px;
            }
            
            .info-card-desktop {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                padding: 30px;
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
            }
            
            .info-header-desktop {
                display: flex;
                align-items: center;
                gap: 12px;
                margin-bottom: 25px;
                font-size: 1.3rem;
                font-weight: 700;
                color: var(--text-primary);
            }
            
            .info-content-desktop {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            .info-row-desktop {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }
            
            .info-label-desktop {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            .info-value-desktop {
                color: var(--text-primary);
                font-size: 1.1rem;
                font-weight: 600;
            }
            
            /* Animações Desktop */
            .crypto-header-desktop {
                animation: fadeInUp 0.6s ease;
            }
            
            .crypto-stats-desktop {
                animation: fadeInUp 0.8s ease;
            }
            
            .stat-card-desktop {
                animation: fadeInUp 1s ease;
                animation-fill-mode: both;
            }
            
            .stat-card-desktop:nth-child(1) { animation-delay: 0.1s; }
            .stat-card-desktop:nth-child(2) { animation-delay: 0.2s; }
            .stat-card-desktop:nth-child(3) { animation-delay: 0.3s; }
            .stat-card-desktop:nth-child(4) { animation-delay: 0.4s; }
            
            .crypto-chart-desktop {
                animation: fadeInUp 1.2s ease;
            }
            
            .swing-trade-desktop {
                animation: fadeInUp 1.4s ease;
            }
            
            /* CSS específico para mobile - Botões mais compactos */
            @media (max-width: 768px) {
                .filters {
                    gap: 8px;
                    justify-content: center;
                }
                
                .filter-btn {
                    padding: 8px 12px;
                    font-size: 0.75rem;
                    min-width: 60px;
                    max-width: 80px;
                    flex: 1;
                }
                
                .swing-trade-btn {
                    min-width: 90px;
                    max-width: 100px;
                }
            }
            
            @media (max-width: 480px) {
                .filters {
                    gap: 6px;
                    justify-content: center;
                }
                
                .filter-btn {
                    padding: 6px 10px;
                    font-size: 0.7rem;
                    min-width: 50px;
                    max-width: 70px;
                    flex: 1;
                }
                
                .swing-trade-btn {
                    min-width: 80px;
                    max-width: 90px;
                }
            }
            

    }
        </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- TradingView Widget -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
</head>
<body>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cripto AI - Top 100 Criptomoedas</title>
    <style> /* Reset e configurações básicas */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* Nova paleta de cores moderna e renovada */
            --primary-color: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #a5b4fc;
            --secondary-color: #10b981;
            --secondary-dark: #059669;
            --accent-color: #f59e0b;
            --accent-dark: #d97706;
            
            /* Cores de fundo renovadas */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-card: #1e293b;
            --bg-glass: rgba(30, 41, 59, 0.8);
            
            /* Cores de texto renovadas */
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --text-accent: #e2e8f0;
            
            /* Cores de status renovadas */
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
            
            /* Sistema de sombras avançado */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            /* Sistema de bordas refinado */
            --border-radius-sm: 0.375rem;
            --border-radius-md: 0.5rem;
            --border-radius-lg: 0.75rem;
            --border-radius-xl: 1rem;
            --border-radius-2xl: 1.5rem;
            
            /* Sistema de transições */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-tertiary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(6, 182, 212, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        .header {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-xl);
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            opacity: 0.5;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 16px;
            position: relative;
        }
        
        .logo::before {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius-xl);
            opacity: 0.1;
            z-index: -1;
        }
        
        .logo i {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 4px 8px rgba(99, 102, 241, 0.3));
            animation: float 3s ease-in-out infinite;
        }
        
        .logo h1 {
            font-size: 2.25rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.025em;
        }
        
        .header-stats {
            display: flex;
            gap: 30px;
        }
        
        .stat-item {
            text-align: center;
            position: relative;
            padding: 16px 24px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: var(--transition-normal);
        }
        
        .stat-item:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .stat-label {
            display: block;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Currency Switcher */
        .currency-switcher {
            cursor: pointer;
        }
        
        .currency-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: var(--transition-normal);
        }
        
        .currency-btn:hover {
            transform: scale(1.05);
        }
        
        .currency-btn i {
            font-size: 1rem;
            opacity: 0.8;
        }
        

        
        .currency-symbol {
            font-size: 1.5rem;
        }
        
        /* Status de conexão */
        .connection-status {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 2000;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .connection-status.online {
            background: rgba(0, 212, 170, 0.2);
            color: var(--success-color);
            border: 1px solid rgba(0, 212, 170, 0.3);
        }
        
        .connection-status.offline {
            background: rgba(255, 107, 107, 0.2);
            color: var(--error-color);
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
        
        .connection-status.cache {
            background: rgba(255, 165, 0, 0.2);
            color: var(--warning-color);
            border: 1px solid rgba(255, 165, 0, 0.3);
        }
        
        .connection-status.mock {
            background: rgba(160, 160, 160, 0.2);
            color: var(--text-secondary);
            border: 1px solid rgba(160, 160, 160, 0.3);
        }
        
        .connection-status i {
            font-size: 0.6rem;
        }
        
        /* Indicador de API */
        .api-indicator {
            position: fixed;
            top: 70px;
            left: 20px;
            z-index: 2000;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            background: rgba(99, 102, 241, 0.9);
            color: white;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .api-indicator.binance {
            background: rgba(240, 185, 11, 0.9);
            color: white;
        }
        
        .api-indicator.coinmarketcap {
            background: rgba(255, 107, 53, 0.9);
            color: white;
        }
        
        .api-indicator.cryptocompare {
            background: rgba(0, 188, 212, 0.9);
            color: white;
        }
        
        .api-indicator.coingecko {
            background: rgba(0, 212, 170, 0.9);
            color: white;
        }
        
        /* Main Content */
        .main {
            padding: 40px 0;
        }
        
        /* Controls */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            gap: 20px;
            flex-wrap: wrap;
        }
        

        
        .search-box {
            position: relative;
            flex: 1;
            max-width: 400px;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.1rem;
            z-index: 2;
            transition: color 0.3s ease;
        }
        
        .search-box input:focus + i {
            color: var(--primary-color);
        }
        
        .search-box:hover i {
            color: var(--primary-color);
        }
        
        .search-box input {
            width: 100%;
            padding: 16px 20px 16px 56px;
            border: none;
            border-radius: var(--border-radius-2xl);
            background: var(--bg-glass);
            color: var(--text-primary);
            font-size: 1rem;
            backdrop-filter: blur(10px);
            transition: var(--transition-normal);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
        }
        
        .search-box input:focus {
            outline: none;
            background: var(--bg-glass-hover);
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1), var(--shadow-lg);
            transform: translateY(-1px);
        }
        
        .search-box input::placeholder {
            color: var(--text-secondary);
        }
        
        .filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius-xl);
            background: var(--bg-glass);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition-normal);
            backdrop-filter: blur(10px);
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }
        
        .filter-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: var(--transition-normal);
        }
        
        .filter-btn:hover::before {
            left: 100%;
        }
        
        .filter-btn:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .filter-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .filter-btn.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            animation: shimmer 2s ease-in-out infinite;
        }
        
        .filter-btn.active.swing-trade-btn {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
            animation: pulse 2s infinite;
        }
        
        .filter-btn.active.swing-trade-btn::after {
            background: linear-gradient(90deg, var(--accent-color), var(--primary-color), var(--secondary-color));
        }
        
        .swing-trade-btn {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            color: white;
            font-weight: 700;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .swing-trade-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }
        
        .swing-trade-btn:hover::before {
            left: 100%;
        }
        
        .swing-trade-btn:hover {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(245, 158, 11, 0.5);
            border-color: rgba(255, 255, 255, 0.3);
        }
        

        
        /* Ajustes específicos para mobile */
        @media (max-width: 768px) {
            .filters {
                gap: 8px;
                justify-content: center;
            }
            
            .filter-btn {
                padding: 8px 12px;
                font-size: 0.75rem;
                min-width: 60px;
                flex: 1;
                max-width: 80px;
            }
            
            .swing-trade-btn {
                min-width: 90px;
                max-width: 100px;
            }
        }
        
        @media (max-width: 480px) {
            .filter-btn {
                padding: 6px 10px;
                font-size: 0.7rem;
                min-width: 50px;
                max-width: 70px;
            }
            
            .swing-trade-btn {
                min-width: 80px;
                max-width: 90px;
            }
            
            .filter-btn.analysis-btn {
                min-width: 60px;
                max-width: 80px;
                font-size: 0.65rem;
            }
        }
        
        .swing-trade-btn.active {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
            border-color: rgba(255, 255, 255, 0.4);
            animation: pulse 2s infinite;
        }
        
        .swing-trade-btn i {
            margin-right: 8px;
            animation: bounce 2s infinite;
        }
        
        /* Estilos para os novos botões de análise */
        .filter-btn.analysis-btn {
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .filter-btn.analysis-btn:hover {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            transform: translateY(-2px);
        }
        
        .filter-btn.analysis-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            border-color: var(--primary-light);
        }
        
        .filter-btn.analysis-btn.active::after {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        }
        
        /* Cores específicas para cada tipo de análise */
        .filter-btn[data-filter="strong-buy"].active {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .filter-btn[data-filter="medium-buy"].active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .filter-btn[data-filter="neutral"].active {
            background: linear-gradient(135deg, #6b7280, #4b5563);
        }
        
        .filter-btn[data-filter="medium-sell"].active {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .filter-btn[data-filter="strong-sell"].active {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        /* Crypto Table */
        .crypto-table-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            backdrop-filter: blur(20px);
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 20px 0;
        }
        
        /* Indicador de scroll horizontal para mobile */
        .scroll-hint {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            background: rgba(99, 102, 241, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            z-index: 10;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideInRight 0.5s ease;
            pointer-events: none;
        }
        
        /* Ocultar colunas desktop-only em mobile */
        .desktop-only {
            display: table-cell;
        }
        
        .scroll-hint.left {
            right: auto;
            left: 10px;
            animation: slideInLeft 0.5s ease;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateY(-50%) translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateY(-50%) translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInLeft {
            from {
                transform: translateY(-50%) translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(-50%) translateX(0);
                opacity: 1;
            }
        }
        

        
        .crypto-table-container::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        .crypto-table-container::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: var(--border-radius-md);
        }
        
        .crypto-table-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius-md);
        }
        
        .crypto-table-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-light), var(--secondary-light));
        }
        
        .crypto-table-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        }
        
        .crypto-table-container::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--secondary-color), transparent);
            opacity: 0.3;
        }
        
        .crypto-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }
        
        .crypto-table th {
            background: rgba(30, 41, 59, 0.8);
            padding: 20px;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* Larguras específicas para colunas para garantir alinhamento */
        .crypto-table th:nth-child(1) { width: 8%; }  /* # */
        .crypto-table th:nth-child(2) { width: 25%; } /* Nome */
        .crypto-table th:nth-child(3) { width: 15%; } /* Preço */
        .crypto-table th:nth-child(4) { width: 12%; } /* 24h % */
        .crypto-table th:nth-child(5) { width: 12%; } /* 7d % */
        .crypto-table th:nth-child(6) { width: 15%; } /* Cap. de Mercado */
        .crypto-table th:nth-child(7) { width: 15%; } /* Volume (24h) */
        .crypto-table th:nth-child(8) { width: 15%; } /* Circulação */
        .crypto-table th:nth-child(9) { width: 15%; } /* Gráfico 7d */
        
        
        
        .crypto-table th::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            opacity: 0.5;
        }
        
        
        
        .crypto-table td {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: middle;
        }
        
        
        
        .crypto-table tbody tr:last-child td {
            border-bottom: none;
        }
        
        
        
        .crypto-table tbody tr {
            cursor: pointer;
            transition: background 0.3s ease;
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
        }
        
        .crypto-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .crypto-table tbody tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.02);
        }
        
        
        
        /* Animações de entrada das linhas */
        .crypto-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
        .crypto-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
        .crypto-table tbody tr:nth-child(3) { animation-delay: 0.3s; }
        .crypto-table tbody tr:nth-child(4) { animation-delay: 0.4s; }
        .crypto-table tbody tr:nth-child(5) { animation-delay: 0.5s; }
        .crypto-table tbody tr:nth-child(6) { animation-delay: 0.6s; }
        .crypto-table tbody tr:nth-child(7) { animation-delay: 0.7s; }
        .crypto-table tbody tr:nth-child(8) { animation-delay: 0.8s; }
        .crypto-table tbody tr:nth-child(9) { animation-delay: 0.9s; }
        .crypto-table tbody tr:nth-child(10) { animation-delay: 1.0s; }
        
        .crypto-name {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .crypto-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .crypto-info h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-primary);
        }
        
        .crypto-symbol {
            font-size: 0.875rem;
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
        }
        
        
        
        .price {
            font-weight: 600;
            font-size: 1.125rem;
            color: var(--text-primary);
            text-align: right;
        }
        
        
        
        .percentage {
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            display: inline-block;
            min-width: 80px;
            text-align: center;
        }
        
        .percentage.positive {
            background: rgba(16, 185, 129, 0.15);
            color: #00d4aa;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .percentage.negative {
            background: rgba(239, 68, 68, 0.15);
            color: #ff6b6b;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .market-cap, .volume, .circulation {
            font-weight: 500;
            text-align: right;
        }
        
        .sparkline-chart {
            width: 120px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* Swing Trade Score */
        .swing-trade-score {
            margin-top: 12px;
            padding: 12px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .swing-trade-score:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .score-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-md);
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .score-bar::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius-md);
            opacity: 0.3;
            z-index: -1;
        }
        
        .score-fill {
            height: 100%;
            border-radius: var(--border-radius-md);
            transition: width var(--transition-slow);
            position: relative;
            z-index: 1;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .score-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        .score-text {
            font-size: 0.9rem;
            font-weight: 700;
            text-align: center;
            display: block;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .score-text:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }
        
        .score-text i {
            margin-right: 6px;
            color: var(--accent-color);
            animation: twinkle 1.5s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Cabeçalho de ordenação */
        .sorting-header {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(99, 102, 241, 0.15), rgba(16, 185, 129, 0.1));
            border-radius: var(--border-radius-xl);
            margin: 16px 20px;
            border: 2px solid rgba(245, 158, 11, 0.3);
            box-shadow: 
                0 8px 25px rgba(245, 158, 11, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .sorting-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-color), var(--primary-color), var(--secondary-color));
            animation: shimmer 3s ease-in-out infinite;
        }
        
        .sorting-header td {
            text-align: center;
            padding: 24px 20px;
            background: transparent;
            position: relative;
            z-index: 1;
        }
        
        .sorting-header div {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: var(--accent-color);
            font-weight: 800;
            font-size: 1.1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .sorting-header i {
            font-size: 1.4rem;
            animation: bounce 2s infinite;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        .sorting-header span {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }
        
        /* Swing Trade Banner */
        .swing-trade-banner {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
            border-radius: var(--border-radius-2xl);
            padding: 32px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(245, 158, 11, 0.2);
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }
        
        .swing-trade-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        .banner-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }
        
        .banner-header i {
            font-size: 2rem;
            color: var(--accent-color);
            filter: drop-shadow(0 4px 8px rgba(245, 158, 11, 0.3));
        }
        
        .banner-header h3 {
            font-size: 1.75rem;
            color: var(--text-primary);
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .banner-description {
            margin-bottom: 32px;
            position: relative;
            z-index: 1;
        }
        
        .banner-description p {
            margin-bottom: 20px;
            color: var(--text-secondary);
            font-size: 1.125rem;
            line-height: 1.7;
        }
        
        .banner-description ul {
            list-style: none;
            padding-left: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }
        
        .banner-description li {
            margin-bottom: 0;
            padding: 16px 20px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            position: relative;
            transition: var(--transition-normal);
        }
        
        .banner-description li:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .banner-description li:before {
            content: "🎯";
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.25rem;
        }
        
        .banner-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 24px;
            position: relative;
            z-index: 1;
        }
        
        .stat {
            text-align: center;
            padding: 24px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
        }
        
        .stat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .stat:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .stat-number {
            display: block;
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 8px;
            text-shadow: 0 4px 8px rgba(99, 102, 241, 0.3);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* Loading e Error States */
        .loading, .error {
            text-align: center;
            padding: 60px 20px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-5px); }
            60% { transform: translateY(-3px); }
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .loading p, .error p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .error i {
            font-size: 3rem;
            color: var(--error-color);
            margin-bottom: 20px;
        }
        
        .error button {
            padding: 12px 25px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .error button:hover {
            background: #00b894;
            transform: translateY(-2px);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: var(--bg-secondary);
            margin: 3% auto;
            padding: 0;
            border-radius: var(--border-radius-2xl);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-2xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            animation: fadeInUp 0.5s ease;
        }
        

        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 32px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(30, 41, 59, 0.5);
        }
        
        .modal-header h2 {
            font-size: 2rem;
            color: var(--text-primary);
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .close-btn {
            background: var(--bg-glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 12px;
            border-radius: 50%;
            transition: var(--transition-normal);
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-btn:hover {
            background: var(--bg-glass-hover);
            color: var(--text-primary);
            transform: rotate(90deg);
        }
        
        .modal-body {
            padding: 40px;
        }
        
        .crypto-details {
            color: var(--text-primary);
        }
        
        .crypto-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .crypto-basic-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .crypto-price-info h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .crypto-stats {
            margin-top: 30px;
        }
        
        .stat-card {
            background: var(--bg-glass);
            padding: 24px;
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition-normal);
        }
        
        .stat-card:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .stat-card h4 {
            color: var(--text-secondary);
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .stat-card p {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .crypto-chart {
            margin-top: 30px;
        }
        
        .crypto-chart h4 {
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        
        /* Mensagens de Aviso */
        .warning-message {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
            animation: slideInRight 0.3s ease;
        }
        
        .warning-content {
            background: rgba(255, 165, 0, 0.2);
            color: var(--warning-color);
            padding: 15px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 165, 0, 0.3);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Dashboard de Recomendações */
        .recommendations-dashboard {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius-xl);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dashboard-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .dashboard-header h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .dashboard-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .recommendation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .rec-card {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
        }
        
        .rec-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .rec-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }
        
        .rec-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .rec-content h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        .rec-count {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        .rec-content p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* Cores específicas para cada categoria */
        .rec-card.strong-buy::before {
            background: linear-gradient(90deg, #10b981, #059669);
        }
        
        .rec-card.medium-buy::before {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        }
        
        .rec-card.neutral::before {
            background: linear-gradient(90deg, #6b7280, #4b5563);
        }
        
        .rec-card.medium-sell::before {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }
        
        .rec-card.strong-sell::before {
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }
        
        .top-recommendations {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .top-recommendations h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .top-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .top-item {
            background: var(--bg-glass);
            border-radius: var(--border-radius-md);
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: var(--transition-normal);
        }
        
        .top-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-md);
        }
        
        .top-rank {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            min-width: 40px;
        }
        
        .top-info h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }
        
        .top-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 0;
        }
        
        .top-score {
            margin-left: auto;
            background: var(--primary-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        /* Responsividade para mobile */
        @media (max-width: 768px) {
            .recommendations-dashboard {
                padding: 1rem;
            }
            
            .recommendation-cards {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 1rem;
            }
            
            .rec-card {
                padding: 1rem;
            }
            
            .rec-icon {
                font-size: 2rem;
            }
            
            .rec-count {
                font-size: 1.5rem;
            }
            
            .top-list {
                grid-template-columns: 1fr;
            }
        }
        
        /* Estilos para a coluna de Score de Compra */
        .buy-score {
            text-align: center;
            vertical-align: middle;
        }
        
        .buy-score-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .score-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 0 auto;
        }
        
        .score-text {
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
            z-index: 1;
        }
        
        .recommendation-text {
            font-size: 0.7rem;
            font-weight: 600;
            text-align: center;
            padding: 2px 6px;
            border-radius: var(--border-radius-sm);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .recommendation-text.positive {
            color: var(--success-color);
        }
        
        .recommendation-text.negative {
            color: var(--danger-color);
        }
        
        /* Banner de Análise Inteligente */
        .analysis-info-banner {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: var(--border-radius-xl);
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px);
        }
        
        .analysis-info-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .analysis-decoration {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
        
        .analysis-decoration.decoration-1 {
            width: 100px;
            height: 100px;
            top: -50px;
            right: -50px;
            animation-delay: 0s;
        }
        
        .analysis-decoration.decoration-2 {
            width: 60px;
            height: 60px;
            bottom: -30px;
            left: -30px;
            animation-delay: 2s;
        }
        
        .analysis-decoration.decoration-3 {
            width: 80px;
            height: 80px;
            top: 50%;
            right: 10%;
            animation-delay: 4s;
        }
        
        .analysis-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1.5rem;
            padding: 10px 15px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: var(--success-color);
            font-weight: 600;
        }
        
        .analysis-btn-large {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: var(--border-radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        
        .analysis-btn-large:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(99, 102, 241, 0.4);
        }
        
        /* CSS para o botão swing-trade-btn-large */
        .swing-trade-btn-large {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: var(--border-radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }
        
        .swing-trade-btn-large:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(245, 158, 11, 0.4);
        }

        /* Footer */
        .footer {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px 0;
            text-align: center;
            margin-top: 80px;
            position: relative;
        }
        
        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        }
        
        .footer p {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            display: inline-block;
        }
        
        .footer p::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: var(--transition-normal);
        }
        
        .footer:hover p::after {
            width: 100%;
        }
        
        /* ===== ANIMAÇÕES DE PREÇO EM TEMPO REAL ===== */
        
        .price-updating {
            transition: all 0.3s ease;
        }
        
        .price-up {
            animation: priceUp 2s ease-out;
            background: rgba(0, 212, 170, 0.1);
            border-radius: 4px;
            padding: 2px 6px;
        }
        
        .price-down {
            animation: priceDown 2s ease-out;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 4px;
            padding: 2px 6px;
        }
        
        @keyframes priceUp {
            0% {
                background: rgba(0, 212, 170, 0.3);
                transform: scale(1.05);
            }
            50% {
                background: rgba(0, 212, 170, 0.2);
                transform: scale(1.02);
            }
            100% {
                background: rgba(0, 212, 170, 0.1);
                transform: scale(1);
            }
        }
        
        @keyframes priceDown {
            0% {
                background: rgba(255, 107, 107, 0.3);
                transform: scale(1.05);
            }
            50% {
                background: rgba(255, 107, 107, 0.2);
                transform: scale(1.02);
            }
            100% {
                background: rgba(255, 107, 107, 0.1);
                transform: scale(1);
            }
        }
        
        /* Controles de Tempo Real */
        .real-time-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-primary);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }
        
        .control-btn:active {
            transform: scale(0.95);
        }
        
        .control-btn i {
            font-size: 0.9rem;
        }
        
        /* Indicador de atualização em tempo real */
        .real-time-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1500;
            background: rgba(0, 212, 170, 0.2);
            color: var(--success-color);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 170, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-stats {
                gap: 20px;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: none;
            }
            
            .filters {
                justify-content: center;
            }
            
                    /* ===== NOVO LAYOUT MOBILE EM LISTA VERTICAL ===== */
        /* Layout mobile completamente reorganizado para lista vertical */
        @media (max-width: 768px) {
            /* Ocultar elementos desktop */
            .crypto-table-container {
                display: none !important;
            }
            
            /* Mostrar lista mobile */
            .crypto-list-mobile {
                display: block !important;
            }
            
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-stats {
                gap: 20px;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: none;
            }
            
            .filters {
                justify-content: center;
            }
            
            /* ===== NOVO LAYOUT MOBILE EM LISTA VERTICAL ===== */
            
            /* Ocultar tabela desktop em mobile */
            .crypto-table-container {
                display: none !important;
            }
            
            /* Mostrar lista mobile */
            .crypto-list-mobile {
                display: block !important;
            }
            
            /* Container da lista mobile */
            .crypto-list-mobile {
                display: none;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 16px;
                backdrop-filter: blur(20px);
                overflow: hidden;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.1);
                margin: 20px 0;
            }
            
            /* Cabeçalho da lista mobile */
            .mobile-list-header {
                display: flex;
                background: rgba(30, 41, 59, 0.8);
                padding: 20px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                font-weight: 600;
                color: var(--text-primary);
                font-size: 0.875rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
            }
            
            .mobile-list-header .col-name {
                flex: 2;
            }
            
            .mobile-list-header .col-24h {
                flex: 1;
                text-align: center;
            }
            
            .mobile-list-header .col-7d {
                flex: 1;
                text-align: center;
            }
            
            /* Card individual de criptomoeda */
            .crypto-card {
                display: flex;
                align-items: center;
                padding: 20px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                transition: background 0.3s ease;
                cursor: pointer;
            }
            
            .crypto-card:last-child {
                border-bottom: none;
            }
            
            .crypto-card:hover {
                background: rgba(255, 255, 255, 0.05);
            }
            
            .crypto-card:nth-child(even) {
                background: rgba(255, 255, 255, 0.02);
            }
            
            /* Coluna do nome (flex: 2) */
            .crypto-card .col-name {
                flex: 2;
                display: flex;
                align-items: center;
                gap: 15px;
            }
            
            /* Ícone de estrela para favoritos */
            .favorite-star {
                color: var(--text-muted);
                font-size: 1.2rem;
                cursor: pointer;
                transition: var(--transition-normal);
                margin-right: 10px;
            }
            
            .favorite-star:hover {
                color: var(--accent-color);
                transform: scale(1.1);
            }
            
            .favorite-star.active {
                color: var(--accent-color);
            }
            
            /* Informações da criptomoeda */
            .crypto-info-mobile h3 {
                font-size: 1.125rem;
                font-weight: 700;
                margin-bottom: 4px;
                color: var(--text-primary);
                background: linear-gradient(135deg, var(--text-primary), var(--primary-light));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .crypto-symbol-mobile {
                font-size: 0.875rem;
                color: var(--text-secondary);
                font-weight: 600;
                background: var(--bg-tertiary);
                padding: 4px 8px;
                border-radius: var(--border-radius-md);
                display: inline-block;
            }
            
            .crypto-price-mobile {
                font-size: 1.125rem;
                font-weight: 600;
                color: var(--text-primary);
                margin: 8px 0;
                padding: 6px 12px;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 8px;
                display: inline-block;
                text-align: center;
                min-width: 120px;
            }
            

            
            /* Colunas de porcentagem (flex: 1 cada) */
            .crypto-card .col-24h,
            .crypto-card .col-7d {
                flex: 1;
                text-align: center;
            }
            
            /* Porcentagens com design melhorado */
            .percentage-mobile {
                font-weight: 600;
                padding: 8px 12px;
                border-radius: 20px;
                font-size: 0.875rem;
                display: inline-block;
                min-width: 70px;
                text-align: center;
            }
            
            .percentage-mobile.positive {
                background: rgba(16, 185, 129, 0.15);
                color: #00d4aa;
                border: 1px solid rgba(16, 185, 129, 0.3);
            }
            
            .percentage-mobile.negative {
                background: rgba(239, 68, 68, 0.15);
                color: #ff6b6b;
                border: 1px solid rgba(239, 68, 68, 0.3);
            }
            
            /* Score de swing trade para mobile */
            .swing-trade-score-mobile {
                margin-top: 10px;
                padding: 10px;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border-radius: var(--border-radius-lg);
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                transition: all 0.3s ease;
            }
            
            .swing-trade-score-mobile:hover {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            }
            
            .score-bar-mobile {
                width: 100%;
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: var(--border-radius-md);
                overflow: hidden;
                margin-bottom: 8px;
                position: relative;
                box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .score-fill-mobile {
                height: 100%;
                border-radius: var(--border-radius-md);
                transition: width var(--transition-slow);
                position: relative;
                z-index: 1;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
            }
            
            .score-text-mobile {
                font-size: 0.85rem;
                font-weight: 700;
                text-align: center;
                display: block;
                padding: 5px 10px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: var(--border-radius-md);
                border: 1px solid rgba(255, 255, 255, 0.1);
                transition: all 0.3s ease;
            }
            
            .score-text-mobile:hover {
                background: rgba(255, 255, 255, 0.15);
                transform: scale(1.05);
            }
            
            .score-text-mobile i {
                margin-right: 5px;
                color: var(--accent-color);
                animation: twinkle 1.5s infinite;
            }
            
            /* Animações para mobile */
            .crypto-card {
                animation: fadeInUp 0.4s ease forwards;
                opacity: 0;
                transform: translateY(15px);
            }
            
            .crypto-card:nth-child(1) { animation-delay: 0.1s; }
            .crypto-card:nth-child(2) { animation-delay: 0.2s; }
            .crypto-card:nth-child(3) { animation-delay: 0.3s; }
            .crypto-card:nth-child(4) { animation-delay: 0.4s; }
            .crypto-card:nth-child(5) { animation-delay: 0.5s; }
            
            @keyframes fadeInUp {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            /* Melhorias nos controles para mobile */
            .filter-btn {
                padding: 12px 18px;
                font-size: 0.85rem;
                min-width: 90px;
            }
            
            .swing-trade-btn {
                min-width: 130px;
            }
            
            /* Otimizações para header mobile */
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .logo i {
                font-size: 2rem;
            }
            
            .stat-item {
                padding: 12px 16px;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
            
            .stat-label {
                font-size: 0.7rem;
            }
            
            /* Melhorias específicas para dispositivos móveis */
            .connection-status {
                top: 10px;
                left: 10px;
                right: 10px;
                text-align: center;
                font-size: 0.75rem;
                position: fixed;
                z-index: 2000;
            }
            
            .real-time-indicator {
                top: 60px;
                right: 10px;
                left: 10px;
                text-align: center;
                font-size: 0.75rem;
            }
        }
            
            /* Ocultar colunas desktop-only em mobile */
            .desktop-only {
                display: none !important;
            }
            
            /* Larguras específicas para mobile (3 colunas) */
            .crypto-table th:nth-child(1) { width: 25%; }  /* Nome */
            .crypto-table th:nth-child(2) { width: 37.5%; }  /* 24h % */
            .crypto-table th:nth-child(3) { width: 37.5%; }  /* 7d % */
            
            .crypto-table-container::-webkit-scrollbar {
                height: 8px;
            }
            
            .crypto-table-container::-webkit-scrollbar-track {
                background: var(--bg-secondary);
                border-radius: var(--border-radius-md);
            }
            
            .crypto-table-container::-webkit-scrollbar-thumb {
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                border-radius: var(--border-radius-md);
            }
            
            .crypto-table {
                min-width: 700px; /* Largura mínima para 3 colunas mobile */
                table-layout: fixed; /* Layout fixo para melhor performance */
                border-collapse: separate;
                border-spacing: 0;
            }
            
            /* Melhorar legibilidade das linhas no mobile */
            .crypto-table tbody tr {
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                transition: var(--transition-normal);
            }
            
                    .crypto-table tbody tr:hover {
            background: var(--bg-glass-hover);
            transform: scale(1.002);
            box-shadow: var(--shadow-md);
        }
            
            /* Otimizar células para mobile */
            .crypto-table th,
            .crypto-table td {
                padding: 16px 16px;
                font-size: 0.85rem;
                vertical-align: middle;
                white-space: nowrap; /* Evitar quebra de linha */
            }
            
            /* Melhorar exibição do nome da cripto no mobile */
            .crypto-name {
                min-width: 160px;
                gap: 12px;
            }
            
            .crypto-icon {
                width: 40px;
                height: 40px;
                border: 2px solid rgba(255, 255, 255, 0.2);
                flex-shrink: 0; /* Evitar que a imagem encolha */
            }
            
            .crypto-info h3 {
                font-size: 1rem;
                font-weight: 700;
                margin-bottom: 4px;
                line-height: 1.2;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            .crypto-symbol {
                font-size: 0.8rem;
                padding: 4px 8px;
                white-space: nowrap;
            }
            
            /* Otimizar preços para mobile */
            .price {
                font-size: 1.1rem;
                font-weight: 700;
                color: var(--text-primary);
                text-align: right;
                white-space: nowrap;
            }
            
            /* Melhorar porcentagens para mobile */
            .percentage {
                padding: 8px 12px;
                min-width: 70px;
                font-size: 0.85rem;
                font-weight: 600;
                white-space: nowrap;
                text-align: center;
                display: inline-block;
            }
            
            /* Melhorar alinhamento das colunas mobile */
            .crypto-table th:nth-child(2),
            .crypto-table th:nth-child(3) {
                text-align: center;
            }
            
            .crypto-table td:nth-child(2),
            .crypto-table td:nth-child(3) {
                text-align: center;
            }
            
            /* Otimizar estatísticas para mobile */
            .market-cap, .volume, .circulation {
                font-size: 0.85rem;
                font-weight: 500;
                color: var(--text-secondary);
                text-align: right;
                white-space: nowrap;
            }
            
            /* Melhorar gráfico sparkline no mobile */
            .sparkline-chart {
                width: 100px;
                height: 35px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: var(--border-radius-md);
                background: rgba(255, 255, 255, 0.02);
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Score de swing trade otimizado para mobile */
            .swing-trade-score {
                margin-top: 8px;
            }
            
            .score-bar {
                width: 100%;
                height: 6px;
                margin-bottom: 6px;
            }
            
            .score-text {
                font-size: 0.8rem;
                font-weight: 600;
            }
            
            /* Animações suaves para mobile */
            .crypto-table tbody tr {
                animation: fadeInUp 0.4s ease forwards;
                opacity: 0;
                transform: translateY(15px);
            }
            
            .crypto-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
            .crypto-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
            .crypto-table tbody tr:nth-child(3) { animation-delay: 0.3s; }
            .crypto-table tbody tr:nth-child(4) { animation-delay: 0.4s; }
            .crypto-table tbody tr:nth-child(5) { animation-delay: 0.5s; }
            
            @keyframes fadeInUp {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            /* Melhorias nos controles para mobile */
            .filter-btn {
                padding: 12px 18px;
                font-size: 0.85rem;
                min-width: 90px;
            }
            
            .swing-trade-btn {
                min-width: 130px;
            }
            
            /* Otimizações para header mobile */
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .logo i {
                font-size: 2rem;
            }
            
            .stat-item {
                padding: 12px 16px;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
            
            .stat-label {
                font-size: 0.7rem;
            }
            
            /* Melhorias específicas para dispositivos móveis */
            .connection-status {
                top: 10px;
                left: 10px;
                right: 10px;
                text-align: center;
                font-size: 0.75rem;
                position: fixed;
                z-index: 2000;
            }
            
            .real-time-indicator {
                top: 60px;
                right: 10px;
                left: 10px;
                text-align: center;
                font-size: 0.75rem;
            }
            

        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .filters {
                gap: 6px;
                justify-content: center;
            }
            
            .filter-btn {
                padding: 6px 10px;
                font-size: 0.7rem;
                min-width: 50px;
                max-width: 70px;
                flex: 1;
            }
            
            .swing-trade-btn {
                min-width: 80px;
                max-width: 90px;
            }
            
            /* Otimizações para lista mobile em telas muito pequenas */
            .crypto-card {
                padding: 16px;
            }
            
            .crypto-info-mobile h3 {
                font-size: 1rem;
            }
            
            .crypto-symbol-mobile {
                font-size: 0.8rem;
                padding: 3px 6px;
            }
            
            .crypto-price-mobile {
                font-size: 1rem;
                padding: 5px 10px;
                min-width: 100px;
            }
            

            
            .percentage-mobile {
                padding: 6px 10px;
                min-width: 60px;
                font-size: 0.8rem;
            }
            
            .score-bar-mobile {
                height: 5px;
                margin-bottom: 4px;
            }
            
                    .score-text-mobile {
                font-size: 0.7rem;
            }
            
            .currency-switcher {
                order: -1;
                margin-bottom: 8px;
            }
            
            .currency-btn {
                font-size: 1.2rem;
            }
            
            .currency-symbol {
                font-size: 1.2rem;
            }
        
        /* Estilos para o gráfico TradingView */
        .tradingview-widget-container {
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }
        
        /* Botões do gráfico */
        .chart-controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        
        .chart-btn {
            padding: 8px 16px;
            border-radius: var(--border-radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-normal);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .chart-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .chart-btn.primary {
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            background: transparent;
        }
        
        .chart-btn.primary:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .chart-btn.accent {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-light));
            color: white;
            border: none;
        }
        
        .chart-btn.accent:hover {
            background: linear-gradient(135deg, var(--accent-light), var(--accent-color));
        }
        

        

        
        .oversold-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(239, 68, 68, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        .oversold-banner-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }
        
        .oversold-banner-header i {
            font-size: 2rem;
            color: #ef4444;
            filter: drop-shadow(0 4px 8px rgba(239, 68, 68, 0.3));
        }
        
        .oversold-banner-header h3 {
            font-size: 1.75rem;
            color: var(--text-primary);
            font-weight: 800;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .oversold-banner-description {
            margin-bottom: 32px;
            position: relative;
            z-index: 1;
        }
        
        .oversold-banner-description p {
            margin-bottom: 20px;
            color: var(--text-secondary);
            font-size: 1.125rem;
            line-height: 1.7;
        }
        
        .oversold-banner-description ul {
            list-style: none;
            padding-left: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }
        
        .oversold-banner-description li {
            margin-bottom: 0;
            padding: 16px 20px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            position: relative;
            transition: var(--transition-normal);
        }
        
        .oversold-banner-description li:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .oversold-banner-description li:before {
            content: "📉";
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.25rem;
        }
        
        .oversold-banner-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 24px;
            position: relative;
            z-index: 1;
        }
        
        .oversold-stat-card {
            background: var(--bg-glass);
            border-radius: var(--border-radius-lg);
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            transition: var(--transition-normal);
        }
        .oversold-stat-card:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .oversold-stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: #ef4444;
            margin-bottom: 8px;
        }
        
        .oversold-stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        /* Lista de Sobrevenda - Estilo Premium */
        .oversold-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 32px;
        }
        
        .oversold-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 24px;
            background: var(--bg-glass);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition-normal);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .oversold-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(239, 68, 68, 0.1), transparent);
            transition: left 0.6s ease;
        }
        
        .oversold-item:hover::before {
            left: 100%;
        }
        
        .oversold-item:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-xl);
            border-color: rgba(239, 68, 68, 0.3);
        }
        
        .oversold-rank {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            min-width: 60px;
            text-align: center;
            padding: 12px;
            border-radius: var(--border-radius-lg);
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
        
        .oversold-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .oversold-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .oversold-details h4 {
            margin: 0;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .oversold-symbol {
            font-size: 0.9rem;
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        .oversold-price {
            text-align: center;
            min-width: 120px;
        }
        
        .oversold-price .current-price {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .oversold-price .price-change {
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .oversold-price .price-change.positive {
            color: #00d4aa;
        }
        
        .oversold-price .price-change.negative {
            color: #ef4444;
        }
        
        .oversold-rsi {
            text-align: center;
            min-width: 80px;
        }
        
        .rsi-value {
            font-size: 1.4rem;
            font-weight: 800;
            margin-bottom: 8px;
            padding: 8px 12px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid;
        }
        
        .rsi-value.rsi-extreme {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.15);
            border-color: rgba(239, 68, 68, 0.4);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.2);
        }
        
        .rsi-value.rsi-strong {
            color: #f59e0b;
            background: rgba(245, 158, 11, 0.15);
            border-color: rgba(245, 158, 11, 0.4);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.2);
        }
        
        .rsi-value.rsi-moderate {
            color: #3b82f6;
            background: rgba(59, 130, 246, 0.15);
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
        }
        
        /* Estilos para RSI na tabela de sobrevenda */
        .crypto-table .rsi-value {
            display: inline-block;
            min-width: 60px;
            text-align: center;
            font-weight: 700;
            font-size: 1.1rem;
            border-radius: 10px;
            padding: 8px 12px;
            border: 2px solid;
            transition: all 0.3s ease;
        }
        
        .crypto-table .rsi-value:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .rsi-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .oversold-action {
            min-width: 120px;
        }
        
        .oversold-action .chart-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .oversold-action .chart-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }
        
        .oversold-action .chart-btn:hover::before {
            left: 100%;
        }
        
        .oversold-action .chart-btn:hover {
            background: linear-gradient(135deg, #dc2626, #ef4444);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
        }
        
        .oversold-footer {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));
            border-radius: 16px;
            border: 1px solid rgba(239, 68, 68, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .oversold-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.05) 50%, transparent 70%);
            animation: shimmer 4s infinite;
        }
        
        .oversold-footer p {
            margin: 0;
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }
        
        /* ===== GRÁFICO DE CRIPTO ===== */
        
        .chart-container {
            width: 100%;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .crypto-info-chart {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .crypto-icon-chart {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .crypto-info-chart h3 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .crypto-symbol-chart {
            font-size: 0.9rem;
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        .price-info-chart {
            text-align: right;
        }
        
        .current-price-chart {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .price-change-chart {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .price-change-chart.positive {
            color: #00d4aa;
        }
        
        .price-change-chart.negative {
            color: #ef4444;
        }
        
        .tradingview-chart {
            margin-bottom: 20px;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .chart-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .chart-controls .chart-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
        }
        
        .chart-controls .chart-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }
        
        .chart-controls .chart-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* ===== MODAL RESPONSIVO PARA MOBILE ===== */
        /* ===== DESIGN MODERNO PARA MODAL MOBILE ===== */
        
        @media (max-width: 768px) {
            .modal-content {
                margin: 0;
                width: 100%;
                height: 100vh;
                max-height: 100vh;
                border-radius: 0;
                overflow-y: auto;
                background: linear-gradient(135deg, #0f172a, #1e293b);
            }
            
            /* Mostrar lista mobile e ocultar tabela desktop no modal de sobrevenda */
            .modal-content .crypto-table-container {
                display: none !important;
            }
            
            .modal-content .crypto-list-mobile {
                display: block !important;
            }
            

            
            .modal-header {
                padding: 20px;
                position: sticky;
                top: 0;
                background: rgba(15, 23, 42, 0.95);
                z-index: 10;
                backdrop-filter: blur(20px);
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .modal-header h2 {
                font-size: 1.5rem;
                flex: 1;
                margin-right: 15px;
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .close-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
                padding: 8px;
                flex-shrink: 0;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                transition: all 0.3s ease;
            }
            
            .close-btn:hover {
                background: rgba(255, 255, 255, 0.2);
                transform: rotate(90deg);
            }
            
            .modal-body {
                padding: 20px;
            }
            
            /* ===== HEADER HERO SECTION ===== */
            .crypto-header-mobile {
                margin-bottom: 30px;
            }
            
            .crypto-hero-section {
                display: flex;
                align-items: center;
                gap: 20px;
                margin-bottom: 25px;
                padding: 20px;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
            }
            
            .crypto-avatar-container {
                position: relative;
                flex-shrink: 0;
            }
            
            .crypto-avatar {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                border: 3px solid var(--primary-color);
                box-shadow: 0 0 25px rgba(0, 212, 170, 0.4);
                transition: all 0.3s ease;
            }
            
            .crypto-avatar:hover {
                transform: scale(1.05);
                box-shadow: 0 0 35px rgba(0, 212, 170, 0.6);
            }
            
            .crypto-status-indicator {
                position: absolute;
                bottom: 5px;
                right: 5px;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                border: 3px solid var(--bg-secondary);
            }
            
            .crypto-status-indicator.positive {
                background: var(--primary-color);
                box-shadow: 0 0 10px rgba(0, 212, 170, 0.6);
            }
            
            .crypto-status-indicator.negative {
                background: var(--secondary-color);
                box-shadow: 0 0 10px rgba(255, 107, 53, 0.6);
            }
            
            .crypto-title-section {
                flex: 1;
            }
            
            .crypto-name {
                font-size: 1.8rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 8px;
                background: linear-gradient(135deg, var(--text-primary), var(--primary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .crypto-symbol-badge {
                display: inline-block;
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                color: white;
                padding: 6px 12px;
                border-radius: 20px;
                font-size: 0.9rem;
                font-weight: 600;
                margin-bottom: 8px;
                box-shadow: 0 4px 15px rgba(0, 212, 170, 0.3);
            }
            
            .crypto-rank {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            /* ===== PRICE SECTION ===== */
            .crypto-price-section {
                text-align: center;
                padding: 25px;
                background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(255, 107, 53, 0.05));
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
            }
            
            .current-price {
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 20px;
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .price-changes {
                display: flex;
                justify-content: center;
                gap: 20px;
                flex-wrap: wrap;
            }
            
            .price-change-item {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 12px 20px;
                border-radius: 25px;
                font-weight: 600;
                font-size: 0.95rem;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                transition: all 0.3s ease;
            }
            
            .price-change-item.positive {
                background: rgba(0, 212, 170, 0.2);
                color: var(--primary-color);
                border-color: rgba(0, 212, 170, 0.3);
            }
            
            .price-change-item.negative {
                background: rgba(255, 107, 53, 0.2);
                color: var(--secondary-color);
                border-color: rgba(255, 107, 53, 0.3);
            }
            
            .price-change-item:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            }
            
            .change-period {
                font-size: 0.8rem;
                opacity: 0.8;
            }
            
            /* ===== STATS CARDS ===== */
            .crypto-stats-mobile {
                margin-bottom: 30px;
            }
            
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .stat-card-mobile {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 20px;
                padding: 20px;
                backdrop-filter: blur(20px);
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }
            
            .stat-card-mobile::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            }
            
            .stat-card-mobile:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            
            .stat-card-mobile.market-cap::before { background: linear-gradient(90deg, #00d4aa, #0099cc); }
            .stat-card-mobile.volume::before { background: linear-gradient(90deg, #ff6b35, #ffa500); }
            .stat-card-mobile.supply::before { background: linear-gradient(90deg, #9c27b0, #e91e63); }
            .stat-card-mobile.ath::before { background: linear-gradient(90deg, #ffd700, #ff6b35); }
            
            .stat-icon {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 15px;
                font-size: 1.2rem;
                color: var(--primary-color);
            }
            
            .stat-content {
                text-align: center;
            }
            
            .stat-label {
                color: var(--text-secondary);
                font-size: 0.85rem;
                font-weight: 500;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                margin-bottom: 8px;
            }
            
            .stat-value {
                color: var(--text-primary);
                font-size: 1.1rem;
                font-weight: 700;
                margin-bottom: 5px;
            }
            
            .stat-symbol {
                color: var(--primary-color);
                font-size: 0.8rem;
                font-weight: 600;
            }
            
            
        




        /* ===== CHART SECTION ===== */
        .crypto-chart-mobile {
            margin-bottom: 30px;
        }
            
            .chart-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .chart-title {
                color: var(--text-primary);
                font-size: 1.2rem;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .chart-title i {
                color: var(--primary-color);
            }
            
            .chart-period-selector {
                display: flex;
                gap: 8px;
            }
            
            .period-btn {
                padding: 8px 16px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                background: rgba(255, 255, 255, 0.05);
                color: var(--text-secondary);
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .period-btn.active,
            .period-btn:hover {
                background: var(--primary-color);
                color: white;
                border-color: var(--primary-color);
                transform: translateY(-2px);
            }
            
            .chart-container {
                background: rgba(255, 255, 255, 0.03);
                border-radius: 20px;
                padding: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                margin-bottom: 20px;
            }
            
            .tradingview-widget {
                height: 350px;
                border-radius: 15px;
                overflow: hidden;
            }
            
            .chart-actions {
                display: flex;
                gap: 15px;
                flex-wrap: wrap;
            }
            
            .action-btn {
                flex: 1;
                min-width: 150px;
                padding: 15px 20px;
                border: none;
                border-radius: 25px;
                font-weight: 600;
                font-size: 0.95rem;
                text-decoration: none;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
                transition: all 0.3s ease;
                cursor: pointer;
                text-align: center;
            }
            
            .action-btn.primary {
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                color: white;
                box-shadow: 0 4px 15px rgba(0, 212, 170, 0.3);
            }
            
            .action-btn.secondary {
                background: linear-gradient(135deg, var(--secondary-color), var(--secondary-light));
                color: white;
                box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
            }
            
            .action-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            }
            
            /* ===== SWING TRADE ANALYSIS ===== */
            .swing-trade-mobile {
                margin-bottom: 30px;
            }
            
            .analysis-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 25px;
                flex-wrap: wrap;
                gap: 20px;
            }
            
            .analysis-title {
                color: var(--text-primary);
                font-size: 1.2rem;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .analysis-title i {
                color: var(--primary-color);
            }
            
            .overall-score {
                text-align: center;
            }
            
            .score-circle {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 10px;
                font-weight: 800;
                font-size: 1.2rem;
                color: white;
                position: relative;
            }
            
            .score-circle.excellent { background: linear-gradient(135deg, #00d4aa, #00b894); }
            .score-circle.good { background: linear-gradient(135deg, #0099cc, #0077b3); }
            .score-circle.average { background: linear-gradient(135deg, #ffa500, #ff8c00); }
            .score-circle.below-average { background: linear-gradient(135deg, #ff6b35, #ff5722); }
            .score-circle.poor { background: linear-gradient(135deg, #ff6b6b, #ff4757); }
            
            .score-circle::before {
                content: '';
                position: absolute;
                top: -3px;
                left: -3px;
                right: -3px;
                bottom: -3px;
                border-radius: 50%;
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                z-index: -1;
                opacity: 0.3;
            }
            
            .score-label {
                color: var(--text-secondary);
                font-size: 0.85rem;
                font-weight: 500;
            }
            
            .metrics-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .metric-card {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                padding: 18px;
                backdrop-filter: blur(20px);
                transition: all 0.3s ease;
            }
            
            .metric-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }
            
            .metric-header {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-bottom: 12px;
                color: var(--text-secondary);
                font-size: 0.85rem;
                font-weight: 500;
            }
            
            .metric-header i {
                color: var(--primary-color);
                font-size: 0.9rem;
            }
            
            .metric-score {
                font-size: 1.1rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 10px;
                text-align: center;
            }
            
            .metric-bar {
                width: 100%;
                height: 6px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 3px;
                overflow: hidden;
            }
            
            .metric-fill {
                height: 100%;
                background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
                border-radius: 3px;
                transition: width 1s ease;
            }
            
            /* ===== ADDITIONAL INFO ===== */
            .additional-info {
                margin-bottom: 30px;
            }
            
            .info-card {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 20px;
                padding: 20px;
                backdrop-filter: blur(20px);
            }
            
            .info-header {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 20px;
                color: var(--text-primary);
                font-size: 1.1rem;
                font-weight: 600;
            }
            
            .info-header i {
                color: var(--primary-color);
            }
            
            .info-content {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }
            
            .info-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 12px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .info-row:last-child {
                border-bottom: none;
            }
            
            .info-label {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            .info-value {
                color: var(--text-primary);
                font-size: 0.9rem;
                font-weight: 600;
            }
        }
        
        @media (max-width: 480px) {
            .modal-header {
                padding: 15px;
            }
            
            .modal-header h2 {
                font-size: 1.3rem;
            }
            
            .close-btn {
                width: 36px;
                height: 36px;
                font-size: 1.1rem;
            }
            
            .modal-body {
                padding: 15px;
            }
            
            .crypto-hero-section {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .crypto-avatar {
                width: 70px;
                height: 70px;
            }
            
            .crypto-name {
                font-size: 1.5rem;
            }
            
            .current-price {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .stat-card-mobile {
                padding: 18px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .tradingview-widget {
                height: 300px;
            }
            
            .chart-actions {
                flex-direction: column;
            }
            
            .action-btn {
                min-width: auto;
            }
        }
        
        /* ===== ANIMAÇÕES ESPECIAIS PARA MOBILE ===== */
        
        @media (max-width: 768px) {
            .modal-content {
                animation: slideInUp 0.4s ease;
            }
            
            @keyframes slideInUp {
                from {
                    transform: translateY(100%);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }
            
            .crypto-hero-section {
                animation: fadeInUp 0.6s ease;
            }
            
            .crypto-price-section {
                animation: fadeInUp 0.8s ease;
            }
            
            .stat-card-mobile {
                animation: fadeInUp 1s ease;
                animation-fill-mode: both;
            }
            
            .stat-card-mobile:nth-child(1) { animation-delay: 0.1s; }
            .stat-card-mobile:nth-child(2) { animation-delay: 0.2s; }
            .stat-card-mobile:nth-child(3) { animation-delay: 0.3s; }
            .stat-card-mobile:nth-child(4) { animation-delay: 0.4s; }
            
            .crypto-chart-mobile {
                animation: fadeInUp 1.2s ease;
            }
            
            .swing-trade-mobile {
                animation: fadeInUp 1.4s ease;
            }
            
            .additional-info {
                animation: fadeInUp 1.6s ease;
            }
        }
        


            /* Header Desktop */
            .crypto-header-desktop {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 40px;
                gap: 40px;
            }
            
            .crypto-hero-desktop {
                display: flex;
                align-items: center;
                gap: 30px;
                flex: 1;
            }
            
            .crypto-avatar-container-desktop {
                position: relative;
                flex-shrink: 0;
            }
            
            .crypto-avatar-desktop {
                width: 120px;
                height: 120px;
                border-radius: 50%;
                border: 4px solid var(--primary-color);
                box-shadow: 0 0 35px rgba(0, 212, 170, 0.5);
                transition: all 0.3s ease;
            }
            
            .crypto-avatar-desktop:hover {
                transform: scale(1.05);
                box-shadow: 0 0 45px rgba(0, 212, 170, 0.7);
            }
            
            .crypto-status-indicator-desktop {
                position: absolute;
                bottom: 8px;
                right: 8px;
                width: 28px;
                height: 28px;
                border-radius: 50%;
                border: 4px solid var(--bg-secondary);
            }
            
            .crypto-status-indicator-desktop.positive {
                background: var(--primary-color);
                box-shadow: 0 0 15px rgba(0, 212, 170, 0.7);
            }
            
            .crypto-status-indicator-desktop.negative {
                background: var(--secondary-color);
                box-shadow: 0 0 15px rgba(255, 107, 53, 0.7);
            }
            
            .crypto-title-section-desktop {
                flex: 1;
            }
            
            .crypto-name-desktop {
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 12px;
                background: linear-gradient(135deg, var(--text-primary), var(--primary-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .crypto-symbol-badge-desktop {
                display: inline-block;
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                color: white;
                padding: 8px 16px;
                border-radius: 25px;
                font-size: 1rem;
                font-weight: 600;
                margin-bottom: 12px;
                box-shadow: 0 6px 20px rgba(0, 212, 170, 0.4);
        }
            .crypto-rank-desktop {
                color: var(--text-secondary);
                font-size: 1rem;
                font-weight: 500;
            }
            
            /* Price Section Desktop */
            .crypto-price-section-desktop {
                text-align: right;
                padding: 30px;
                background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(255, 107, 53, 0.05));
                border-radius: 25px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                min-width: 300px;
            }
            
            .current-price-desktop {
                font-size: 3rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 20px;
                text-shadow: 0 0 20px rgba(0, 212, 170, 0.3);
            }
            
            .price-changes-desktop {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }
            
            .price-change-item-desktop {
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 12px 20px;
                border-radius: 15px;
                font-weight: 600;
                font-size: 1.1rem;
                transition: all 0.3s ease;
            }
            
            .price-change-item-desktop.positive {
                background: rgba(0, 212, 170, 0.15);
                color: var(--primary-color);
                border: 1px solid rgba(0, 212, 170, 0.3);
            }
            
            .price-change-item-desktop.negative {
                background: rgba(255, 107, 53, 0.15);
                color: var(--secondary-color);
                border: 1px solid rgba(255, 107, 53, 0.3);
            }
            
            .price-change-item-desktop:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }
            
            /* Stats Desktop */
            .crypto-stats-desktop {
                margin-bottom: 40px;
            }
            
            .stats-grid-desktop {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 25px;
            }
            
            .stat-card-desktop {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                padding: 30px;
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                transition: all 0.3s ease;
                text-align: center;
            }
            
            .stat-card-desktop:hover {
                transform: translateY(-5px);
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            }
            
            .stat-icon-desktop {
                width: 60px;
                height: 60px;
                margin: 0 auto 20px;
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                color: white;
                box-shadow: 0 8px 25px rgba(0, 212, 170, 0.4);
            }
            
            .stat-label-desktop {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
                margin-bottom: 10px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .stat-value-desktop {
                font-size: 1.4rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 5px;
            }
            
            .stat-symbol-desktop {
                color: var(--primary-color);
                font-size: 0.9rem;
                font-weight: 600;
            }
            
            /* Chart Desktop */
            .crypto-chart-desktop {
                margin-bottom: 40px;
            }
            
            .chart-header-desktop {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 25px;
            }
            
            .chart-title-desktop {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--text-primary);
                display: flex;
                align-items: center;
                gap: 12px;
            }
            
            .chart-period-selector-desktop {
                display: flex;
                gap: 10px;
            }
            
            .period-btn-desktop {
                padding: 10px 20px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                background: rgba(255, 255, 255, 0.05);
                color: var(--text-secondary);
                border-radius: 12px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .period-btn-desktop:hover,
            .period-btn-desktop.active {
                background: var(--primary-color);
                color: white;
                border-color: var(--primary-color);
                transform: translateY(-2px);
            }
            
            .chart-container-desktop {
                height: 500px;
                background: rgba(255, 255, 255, 0.02);
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                overflow: hidden;
            }
            
            .tradingview-widget-desktop {
                width: 100%;
                height: 100%;
            }
            
            .chart-actions-desktop {
                display: flex;
                gap: 15px;
                margin-top: 20px;
                justify-content: center;
            }
            
            .action-btn-desktop {
                padding: 12px 24px;
                border: none;
                border-radius: 15px;
                font-weight: 600;
                font-size: 1rem;
                cursor: pointer;
                transition: all 0.3s ease;
                text-decoration: none;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .action-btn-desktop.primary {
                background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
                color: white;
            }
            
            .action-btn-desktop.secondary {
                background: rgba(255, 255, 255, 0.1);
                color: var(--text-primary);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .action-btn-desktop:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            
            /* Swing Trade Desktop */
            .swing-trade-desktop {
                margin-bottom: 40px;
            }
            
            .analysis-header-desktop {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 30px;
            }
            
            .analysis-title-desktop {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--text-primary);
                display: flex;
                align-items: center;
                gap: 12px;
            }
            
            .overall-score-desktop {
                text-align: center;
            }
            
            .score-circle-desktop {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 10px;
                font-size: 1.2rem;
                font-weight: 800;
                color: white;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            }
            
            .score-circle-desktop.excellent { background: linear-gradient(135deg, #10b981, #34d399); }
            .score-circle-desktop.good { background: linear-gradient(135deg, #3b82f6, #60a5fa); }
            .score-circle-desktop.average { background: linear-gradient(135deg, #f59e0b, #fbbf24); }
            .score-circle-desktop.below-average { background: linear-gradient(135deg, #f97316, #fb923c); }
            .score-circle-desktop.poor { background: linear-gradient(135deg, #ef4444, #f87171); }
            
            .score-label-desktop {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            .metrics-grid-desktop {
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 20px;
            }
            
            .metric-card-desktop {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                padding: 25px;
                border-radius: 18px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                transition: all 0.3s ease;
            }
            
            .metric-card-desktop:hover {
                transform: translateY(-3px);
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
            }
            
            .metric-header-desktop {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 15px;
                color: var(--text-secondary);
                font-weight: 600;
            }
            
            .metric-score-desktop {
                font-size: 1.1rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 12px;
            }
            
            .metric-bar-desktop {
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 4px;
                overflow: hidden;
            }
            
            .metric-fill-desktop {
                height: 100%;
                background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
                border-radius: 4px;
                transition: width 0.8s ease;
            }
            
            /* Additional Info Desktop */
            .additional-info-desktop {
                margin-bottom: 40px;
            }
            
            .info-card-desktop {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
                padding: 30px;
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
            }
            
            .info-header-desktop {
                display: flex;
                align-items: center;
                gap: 12px;
                margin-bottom: 25px;
                font-size: 1.3rem;
                font-weight: 700;
                color: var(--text-primary);
            }
            
            .info-content-desktop {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            .info-row-desktop {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }
            
            .info-label-desktop {
                color: var(--text-secondary);
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            .info-value-desktop {
                color: var(--text-primary);
                font-size: 1.1rem;
                font-weight: 600;
            }
            
            /* Animações Desktop */
            .crypto-header-desktop {
                animation: fadeInUp 0.6s ease;
            }
            
            .crypto-stats-desktop {
                animation: fadeInUp 0.8s ease;
            }
            
            .stat-card-desktop {
                animation: fadeInUp 1s ease;
                animation-fill-mode: both;
            }
            
            .stat-card-desktop:nth-child(1) { animation-delay: 0.1s; }
            .stat-card-desktop:nth-child(2) { animation-delay: 0.2s; }
            .stat-card-desktop:nth-child(3) { animation-delay: 0.3s; }
            .stat-card-desktop:nth-child(4) { animation-delay: 0.4s; }
            
            .crypto-chart-desktop {
                animation: fadeInUp 1.2s ease;
            }
            
            .swing-trade-desktop {
                animation: fadeInUp 1.4s ease;
            }
            
            /* CSS específico para mobile - Botões mais compactos */
            @media (max-width: 768px) {
                .filters {
                    gap: 8px;
                    justify-content: center;
                }
                
                .filter-btn {
                    padding: 8px 12px;
                    font-size: 0.75rem;
                    min-width: 60px;
                    max-width: 80px;
                    flex: 1;
                }
                
                .swing-trade-btn {
                    min-width: 90px;
                    max-width: 100px;
                }
            }
            
            @media (max-width: 480px) {
                .filters {
                    gap: 6px;
                    justify-content: center;
                }
                
                .filter-btn {
                    padding: 6px 10px;
                    font-size: 0.7rem;
                    min-width: 50px;
                    max-width: 70px;
                    flex: 1;
                }
                
                .swing-trade-btn {
                    min-width: 80px;
                    max-width: 90px;
                }
            }
            

    }
        </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- TradingView Widget -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <h1>Cripto AI</h1>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-label">Cap. Total</span>
                        <span class="stat-value" id="total-market-cap">$0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Volume 24h</span>
                        <span class="stat-value" id="total-volume">$0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Dominância BTC</span>
                        <span class="stat-value" id="btc-dominance">0%</span>
                    </div>
                    <div class="stat-item currency-switcher" id="currency-switcher">
                        <span class="stat-label">Moeda</span>
                        <button class="currency-btn" id="currency-btn">
                            <span class="currency-symbol">R$</span>
                            <i class="fas fa-exchange-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Indicador de Atualização em Tempo Real -->
    <div class="real-time-indicator" id="real-time-indicator" style="display: none;">
        <i class="fas fa-sync-alt fa-spin"></i>
        <span>Atualização em Tempo Real</span>
    </div>



    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Dashboard de Recomendações -->
            <div class="recommendations-dashboard">
                <div class="dashboard-header">
                    <h2><i class="fas fa-rocket"></i> Análise Inteligente para CURTO PRAZO (7 DIAS)</h2>
                    <p>🚀 Descubra as melhores moedas para comprar HOJE e ganhar dinheiro em 7 DIAS!</p>
                </div>
                
                <div class="recommendation-cards">
                    <div class="rec-card strong-buy">
                        <div class="rec-icon">🚀</div>
                        <div class="rec-content">
                            <h3>ALTA EXCELENTE</h3>
                            <div class="rec-count" id="excellent-buy-count">0</div>
                            <p>Potencial excepcional em 7 dias</p>
                        </div>
                    </div>
                    
                    <div class="rec-card strong-buy">
                        <div class="rec-icon">🔥</div>
                        <div class="rec-content">
                            <h3>ALTA FORTE</h3>
                            <div class="rec-count" id="strong-buy-count">0</div>
                            <p>Alto potencial em 7 dias</p>
                        </div>
                    </div>
                    
                    <div class="rec-card medium-buy">
                        <div class="rec-icon">📈</div>
                        <div class="rec-content">
                            <h3>ALTA MÉDIA</h3>
                            <div class="rec-count" id="medium-buy-count">0</div>
                            <p>Bom potencial em 7 dias</p>
                        </div>
                    </div>
                    
                    <div class="rec-card neutral">
                        <div class="rec-icon">✅</div>
                        <div class="rec-content">
                            <h3>ALTA LEVE</h3>
                            <div class="rec-count" id="light-buy-count">0</div>
                            <p>Potencial moderado em 7 dias</p>
                        </div>
                    </div>
                    
                    <div class="rec-card neutral">
                        <div class="rec-icon">➡️</div>
                        <div class="rec-content">
                            <h3>NEUTRO</h3>
                            <div class="rec-count" id="neutral-count">0</div>
                            <p>Potencial limitado em 7 dias</p>
                        </div>
                    </div>
                    
                    <div class="rec-card medium-sell">
                        <div class="rec-icon">⚠️</div>
                        <div class="rec-content">
                            <h3>BAIXA LEVE</h3>
                            <div class="rec-count" id="light-sell-count">0</div>
                            <p>Baixo potencial em 7 dias</p>
                        </div>
                    </div>
                    
                    <div class="rec-card medium-sell">
                        <div class="rec-icon">📉</div>
                        <div class="rec-content">
                            <h3>BAIXA MÉDIA</h3>
                            <div class="rec-count" id="medium-sell-count">0</div>
                            <p>Tendência de baixa</p>
                        </div>
                    </div>
                    
                    <div class="rec-card strong-sell">
                        <div class="rec-icon">❌</div>
                        <div class="rec-content">
                            <h3>BAIXA FORTE</h3>
                            <div class="rec-count" id="strong-sell-count">0</div>
                            <p>Evitar para curto prazo</p>
                        </div>
                    </div>
                </div>
                
                <div class="top-recommendations">
                    <h3><i class="fas fa-trophy"></i> 🚀 TOP 10 MELHORES para COMPRAR HOJE e GANHAR em 7 DIAS</h3>
                    <div class="top-list" id="top-recommendations">
                        <!-- Top recomendações serão inseridas aqui -->
                    </div>
                </div>
            </div>

            <!-- 🚀 BANNER ESPECIAL: MELHORES OPORTUNIDADES PARA HOJE -->
            <div class="short-term-opportunities-banner">
                <div class="banner-header">
                    <h3><i class="fas fa-rocket"></i> 🚀 MELHORES OPORTUNIDADES PARA COMPRAR HOJE</h3>
                    <p>💎 Moedas selecionadas com maior potencial de retorno em 7 dias</p>
                </div>
                
                <div class="opportunities-grid" id="top-opportunities-grid">
                    <!-- Oportunidades serão inseridas aqui dinamicamente -->
                </div>
                
                <div class="banner-footer">
                    <p><i class="fas fa-info-circle"></i> 💡 Dica: Estas moedas foram selecionadas com base em análise técnica avançada focada em retornos de curto prazo</p>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="controls">
                <div class="search-box">
                    <i class="fas fa-magnifying-glass"></i>
                    <input type="text" id="search-input" placeholder="Buscar criptomoeda...">
                </div>
                <div class="filters">
                    <button class="filter-btn active" data-filter="all">Todas</button>
                    <button class="filter-btn" data-filter="gainers">Ganhadores</button>
                    <button class="filter-btn" data-filter="losers">Perdedores</button>
                    <button class="filter-btn swing-trade-btn" data-filter="swing-trade">
                        <i class="fas fa-chart-line"></i>
                        Swing Trade
                    </button>
                    
                    <!-- Novos Filtros de Análise Inteligente para CURTO PRAZO -->
                    <button class="filter-btn analysis-btn" data-filter="excellent-buy">
                        <i class="fas fa-rocket"></i>
                        🚀 ALTA EXCELENTE
                    </button>
                    <button class="filter-btn analysis-btn" data-filter="strong-buy">
                        <i class="fas fa-fire"></i>
                        🔥 ALTA FORTE
                    </button>
                    <button class="filter-btn analysis-btn" data-filter="medium-buy">
                        <i class="fas fa-arrow-up"></i>
                        📈 ALTA MÉDIA
                    </button>
                    <button class="filter-btn analysis-btn" data-filter="light-buy">
                        <i class="fas fa-check"></i>
                        ✅ ALTA LEVE
                    </button>
                    <button class="filter-btn analysis-btn" data-filter="neutral">
                        <i class="fas fa-minus"></i>
                        ➡️ NEUTRO
                    </button>
                    <button class="filter-btn analysis-btn" data-filter="light-sell">
                        <i class="fas fa-exclamation-triangle"></i>
                        ⚠️ BAIXA LEVE
                    </button>
                    <button class="filter-btn analysis-btn" data-filter="medium-sell">
                        <i class="fas fa-arrow-down"></i>
                        📉 BAIXA MÉDIA
                    </button>
                    <button class="filter-btn analysis-btn" data-filter="strong-sell">
                        <i class="fas fa-times"></i>
                        ❌ BAIXA FORTE
                    </button>


                    
                    <!-- Controles de Tempo Real -->
                    <div class="real-time-controls">
                        <button class="control-btn" id="pause-realtime" title="Pausar atualizações em tempo real">
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="control-btn" id="resume-realtime" title="Retomar atualizações em tempo real" style="display: none;">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                </div>
            </div>
            


            <!-- Crypto Table (Desktop) -->
            <div class="crypto-table-container">
                <table class="crypto-table">
                    <thead>
                        <tr>
                            <th class="desktop-only">#</th>
                            <th>Nome</th>
                            <th class="desktop-only">Preço</th>
                            <th>24h %</th>
                            <th>7d %</th>
                                                    <th class="desktop-only">Cap. de Mercado</th>
                        <th class="desktop-only">Volume (24h)</th>
                        <th class="desktop-only">Circulação</th>
                        <th class="desktop-only">Score de Compra</th>
                        <th class="desktop-only">Gráfico 7d</th>

                        </tr>
                    </thead>
                    <tbody id="crypto-table-body">
                        <!-- Dados serão inseridos aqui via JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Crypto List Mobile -->
            <div class="crypto-list-mobile" id="crypto-list-mobile">
                <div class="mobile-list-header">
                    <div class="col-name">Nome</div>
                    <div class="col-24h">24h %</div>
                    <div class="col-7d">7d %</div>
                </div>
                <div id="crypto-list-body">
                    <!-- Dados mobile serão inseridos aqui via JavaScript -->
                </div>
            </div>



            <!-- Loading State -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Carregando dados das criptomoedas...</p>
            </div>

            <!-- Error State -->
            <div class="error" id="error" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i>
                <p>Erro ao carregar dados. Tente novamente.</p>
                <button onclick="loadCryptoData()">Tentar Novamente</button>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Cripto AI. Dados fornecidos por <span id="footer-api">CoinGecko API</span>.</p>
        </div>
    </footer>

    <!-- Crypto Details Modal -->
    <div class="modal" id="crypto-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Detalhes da Criptomoeda</h2>
                <button class="close-btn" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Conteúdo do modal será inserido aqui -->
            </div>
        </div>
    </div>

    <script >// Configurações da API
        const COINGECKO_API_BASE = 'https://api.coingecko.com/api/v3';
        const BINANCE_API_BASE = 'https://api.binance.com/api/v3';
        const COINMARKETCAP_API_BASE = 'https://pro-api.coinmarketcap.com/v1';
        const COINMARKETCAP_API_KEY = 'demo'; // Usando chave demo para testes
        
        // Nova API mais robusta para iPhone - CryptoCompare
        const CRYPTOCOMPARE_API_BASE = 'https://min-api.cryptocompare.com/data';
        const UPDATE_INTERVAL = 30000; // 30 segundos para desktop/WiFi
        const MOBILE_UPDATE_INTERVAL = 300000; // 5 minutos para dados móveis
        const REAL_TIME_UPDATE_INTERVAL = 10000; // 10 segundos para atualizações em tempo real
        const CACHE_DURATION = 300000; // 5 minutos de cache
        
        // Configurações específicas para dados móveis
        const MOBILE_TIMEOUT = 15000; // 15 segundos para dados móveis (mais agressivo)
        const DESKTOP_TIMEOUT = 30000; // 30 segundos para desktop
        const MAX_RETRIES = 3; // Máximo de tentativas
        const RETRY_DELAYS = [1000, 2000, 4000]; // Delays para retry (backoff exponencial)
        
        // Estado global da aplicação
        let cryptoData = [];
        let filteredData = [];
        let currentFilter = 'all';
        let searchTerm = '';
        let lastUpdate = 0;
        let isUpdating = false;
        let previousPrices = new Map(); // Armazena preços anteriores para comparação
        let realTimeUpdateInterval = null; // Intervalo para atualizações em tempo real
        let retryCount = 0; // Contador de tentativas
        let isMobileData = false; // Flag para detectar se está usando dados móveis
        
        // Configuração de atualizações em tempo real para mobile
        // 🚀 OTIMIZAÇÃO: Reduzir frequência de atualizações para melhorar performance
        const MOBILE_REAL_TIME_INTERVAL = 30000; // 30 segundos para mobile (reduzido de 15s)
        const DESKTOP_REAL_TIME_INTERVAL = 20000; // 20 segundos para desktop (reduzido de 10s)
        
        // Detectar se é dispositivo móvel
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // Elementos DOM
        const cryptoTableBody = document.getElementById('crypto-table-body');
        const searchInput = document.getElementById('search-input');
        const loadingElement = document.getElementById('loading');
        const errorElement = document.getElementById('error');
        const totalMarketCap = document.getElementById('total-market-cap');
        const totalVolume = document.getElementById('total-volume');
        const btcDominance = document.getElementById('btc-dominance');

        const realTimeIndicator = document.getElementById('real-time-indicator');
        
        // Função para verificar se o navegador suporta fetch
        function supportsFetch() {
            return typeof fetch !== 'undefined';
        }
        
        // Função para verificar se o navegador suporta localStorage
        function supportsLocalStorage() {
            try {
                const test = 'test';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                return true;
            } catch (e) {
                return false;
            }
        }
        
        // Função para fazer requisição HTTP com fallback e retry
        async function makeRequest(url, options = {}, retryAttempt = 0) {
            const timeout = isMobileData ? MOBILE_TIMEOUT : DESKTOP_TIMEOUT;
            
            if (supportsFetch()) {
                try {
                    // Remover User-Agent personalizado para melhor compatibilidade
                    const cleanOptions = { ...options };
                    if (cleanOptions.headers) {
                        delete cleanOptions.headers['User-Agent'];
                    }
                    
                    // Criar AbortController para timeout
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), timeout);
                    
                    const response = await fetch(url, {
                        ...cleanOptions,
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    return response;
                } catch (error) {
                    // Reduzir logs de erro para evitar spam
                    if (retryAttempt === 0) {
                        console.warn(`📡 Erro de rede (tentativa ${retryAttempt + 1}):`, error.message);
                    }
                    
                    // Retry automático para erros de rede
                    if (retryAttempt < MAX_RETRIES && (error.name === 'AbortError' || error.message.includes('fetch'))) {
                        const delay = RETRY_DELAYS[retryAttempt] || 1000;
                        
                        if (retryAttempt === 0) {
                            console.log(`🔄 Tentando novamente em ${delay}ms...`);
                        }
                        
                        await new Promise(resolve => setTimeout(resolve, delay));
                        return makeRequest(url, options, retryAttempt + 1);
                    }
                    
                    // Se todas as tentativas falharam, usar XHR como fallback
                    if (retryAttempt === MAX_RETRIES) {
                        console.log('🔄 Usando fallback XHR...');
                        return makeXHRRequest(url, options);
                    }
                    
                    throw error;
                }
            } else {
                return makeXHRRequest(url, options);
            }
        }
        
        // Fallback para XMLHttpRequest
        function makeXHRRequest(url, options = {}) {
            return new Promise((resolve, reject) => {
                const xhr = new XMLHttpRequest();
                
                xhr.open(options.method || 'GET', url, true);
                
                if (options.headers) {
                    Object.keys(options.headers).forEach(key => {
                        if (key !== 'User-Agent') { // Não enviar User-Agent personalizado
                            xhr.setRequestHeader(key, options.headers[key]);
                        }
                    });
                }
                
                xhr.onload = function() {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        resolve({
                            ok: true,
                            status: xhr.status,
                            json: () => Promise.resolve(JSON.parse(xhr.responseText))
                        });
                    } else {
                        reject(new Error(`HTTP ${xhr.status}: ${xhr.statusText}`));
                    }
                };
                
                xhr.onerror = function() {
                    reject(new Error('Erro de rede'));
                };
                
                xhr.ontimeout = function() {
                    reject(new Error('Timeout da requisição'));
                };
                
                // Timeout específico para dados móveis
                const timeout = isMobileData ? MOBILE_TIMEOUT : DESKTOP_TIMEOUT;
                xhr.timeout = timeout;
                xhr.send(options.body);
            });
        }
        
        // Função para atualizar status de conexão

        

        
        // Função para mostrar aviso
        function showWarning(message) {
            // Criar aviso temporário
            const warning = document.createElement('div');
            warning.className = 'warning-message';
            warning.innerHTML = `
                <div class="warning-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(warning);
            
            // Remover após 5 segundos
            setTimeout(() => {
                if (warning.parentNode) {
                    warning.parentNode.removeChild(warning);
                }
            }, 5000);
        }
        
        // Inicialização da aplicação
        document.addEventListener('DOMContentLoaded', function() {
            // Corrigir problemas de valores null antes de inicializar
            if (typeof cryptoData !== 'undefined' && cryptoData) {
                cryptoData.forEach(crypto => {
                    // Garantir que os valores de percentual não sejam null
                    if (crypto.price_change_percentage_24h === null || crypto.price_change_percentage_24h === undefined) {
                        crypto.price_change_percentage_24h = 0;
                    }
                    if (crypto.price_change_percentage_7d_in_currency === null || crypto.price_change_percentage_7d_in_currency === undefined) {
                        crypto.price_change_percentage_7d_in_currency = 0;
                    }
                });
            }
            

            
            initializeApp();
        });
        
        function initializeApp() {
            // Configurar exibição mobile/desktop
            setupMobileDesktopDisplay();
            
            // Carregar moeda salva
            loadSavedCurrency();
            
            // Adicionar indicador de scroll horizontal para mobile
            if (isMobile) {
                addScrollIndicator();
            }
            
            // Tentar carregar dados do cache primeiro
            if (loadFromCache()) {
                displayCryptoData();
                updateRecommendationsDashboard(); // Atualizar dashboard de recomendações
                setupEventListeners();
                setupAutoUpdate();
                loadFavorites(); // Carregar favoritos salvos
            } else {
                loadCryptoData();
                setupEventListeners();
                setupAutoUpdate();
                loadFavorites(); // Carregar favoritos salvos
            }
        }
        
        // Função para configurar exibição mobile/desktop
        function setupMobileDesktopDisplay() {
            const tableContainer = document.querySelector('.crypto-table-container');
            const listContainer = document.querySelector('.crypto-list-mobile');
            
            if (isMobile) {
                // Em mobile, mostrar lista e ocultar tabela
                if (tableContainer) tableContainer.style.display = 'none';
                if (listContainer) listContainer.style.display = 'block';
            } else {
                // Em desktop, mostrar tabela e ocultar lista
                if (tableContainer) tableContainer.style.display = 'block';
                if (listContainer) listContainer.style.display = 'none';
            }
        }
        
        function setupEventListeners() {
            // 🚀 BUSCA OTIMIZADA: Com debouncing para melhorar performance
            let searchTimeout;
            searchInput.addEventListener('input', function(e) {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    searchTerm = e.target.value.toLowerCase();
                    filterAndDisplayData();
                }, 300); // Debounce de 300ms
            });
        
            // Filtros
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentFilter = this.dataset.filter;
                    
                    // Efeito especial para Swing Trade
                    if (currentFilter === 'swing-trade') {
                        this.style.animation = 'none';
                        this.offsetHeight; // Trigger reflow
                        this.style.animation = 'pulse 0.6s ease';
                        
                        // Mostrar mensagem de carregamento
                        showSwingTradeLoading();
                    }
                    
                    filterAndDisplayData();
                });
            });
        
            // Fechar modal ao clicar fora
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('crypto-modal');
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Controles de tempo real
            const pauseBtn = document.getElementById('pause-realtime');
            const resumeBtn = document.getElementById('resume-realtime');
            
            if (pauseBtn) {
                pauseBtn.addEventListener('click', function() {
                    stopRealTimeUpdates();
                    pauseBtn.style.display = 'none';
                    resumeBtn.style.display = 'flex';
                });
            }
            
            if (resumeBtn) {
                resumeBtn.addEventListener('click', function() {
                    resumeRealTimeUpdates();
                    resumeBtn.style.display = 'none';
                    pauseBtn.style.display = 'flex';
                });
            }
            
            // Listeners para mudanças de conectividade (especialmente importante para dispositivos móveis)
            window.addEventListener('online', function() {
                console.log('Conexão restaurada');
                showWarning('✅ Conexão restaurada! Tentando carregar dados atualizados...');
                
                // Tentar carregar dados novamente após alguns segundos
                setTimeout(() => {
                    if (cryptoData.length === 0) {
                        loadCryptoData();
                    }
                }, 2000);
            });
            
            window.addEventListener('offline', function() {
                console.log('Conexão perdida');
                showWarning('❌ Conexão perdida. Dados podem estar desatualizados.');
            });
            
            // Listener para mudanças na qualidade da conexão (dispositivos móveis)
            if ('connection' in navigator) {
                navigator.connection.addEventListener('change', function() {
                    const connection = navigator.connection;
                    console.log('📱 Qualidade da conexão mudou:', connection.effectiveType);
                    
                    // Detectar se mudou para dados móveis
                    if (connection.type === 'cellular') {
                        isMobileData = true;
                        console.log('📱 Mudou para dados móveis');
                        showWarning('📱 Conexão móvel detectada - otimizando para melhor performance');

                    }
                    
                    // Monitorar qualidade da conexão em tempo real
                    console.log('📊 Nova qualidade da conexão:', {
                        effectiveType: connection.effectiveType,
                        rtt: connection.rtt,
                        downlink: connection.downlink,
                        saveData: connection.saveData
                    });
                    
                    // Ajustar configurações baseado na nova qualidade
                    if (connection.effectiveType === 'slow-2g' || connection.rtt > 300) {
                        console.log('🚨 Conexão crítica detectada! Ajustando para modo de emergência...');
                        showWarning('🚨 Conexão muito lenta! Ajustando para modo de emergência...');
                        MOBILE_UPDATE_INTERVAL = 15 * 60 * 1000; // 15 minutos para conexões críticas
                    } else if (connection.effectiveType === '2g' || connection.rtt > 200) {
                        console.log('🐌 Conexão lenta detectada. Ajustando configurações...');
                        showWarning('🐌 Conexão lenta detectada. Ajustando para melhor performance...');
                        MOBILE_UPDATE_INTERVAL = 10 * 60 * 1000; // 10 minutos para conexões lentas
                    }
                    
                    if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {
                        showWarning('🐌 Conexão lenta detectada. Considere usar Wi-Fi para melhor performance.');
                    }
                    
                    // Se a conexão melhorou, tentar carregar dados novamente
                    if (connection.effectiveType === '4g' && cryptoData.length === 0) {
                        setTimeout(() => {
                            showWarning('🚀 Conexão melhorou! Tentando carregar dados...');
                            loadCryptoData();
                        }, 2000);
                    }
                });
            }
            
            // Listener para mudanças de tamanho de tela (responsive)
            window.addEventListener('resize', function() {
                const newIsMobile = window.innerWidth <= 768;
                if (newIsMobile !== isMobile) {
                    isMobile = newIsMobile;
                    setupMobileDesktopDisplay();
                    console.log('📱 Tamanho de tela mudou, ajustando layout para:', isMobile ? 'Mobile' : 'Desktop');
                }
            });
            
            // Currency switcher
            const currencyBtn = document.getElementById('currency-btn');
            if (currencyBtn) {
                currencyBtn.addEventListener('click', toggleCurrency);
            }
            

        }
        
        // Sistema de Cache Local
        function saveToCache(data) {
            try {
                if (!supportsLocalStorage()) {
                    console.warn('localStorage não suportado, usando cache em memória');
                    // Fallback: cache em memória (será perdido ao recarregar a página)
                    window.memoryCache = {
                        data: data,
                        timestamp: Date.now()
                    };
                    lastUpdate = Date.now();
                    return;
                }
                
                const cacheData = {
                    data: data,
                    timestamp: Date.now()
                };
                localStorage.setItem('cryptoCache', JSON.stringify(cacheData));
                lastUpdate = Date.now();
            } catch (error) {
                console.warn('Erro ao salvar cache:', error);
                // Fallback para cache em memória
                window.memoryCache = {
                    data: data,
                    timestamp: Date.now()
                };
                lastUpdate = Date.now();
            }
        }
        
        function loadFromCache() {
            try {
                // Tentar localStorage primeiro
                if (supportsLocalStorage()) {
                    const cached = localStorage.getItem('cryptoCache');
                    if (cached) {
                        const cacheData = JSON.parse(cached);
                        const now = Date.now();
                        
                        // Verificar se o cache ainda é válido (5 minutos)
                        if (now - cacheData.timestamp < CACHE_DURATION) {
                            cryptoData = cacheData.data;
                            filteredData = [...cryptoData];
                            lastUpdate = cacheData.timestamp;
                            console.log('Dados carregados do localStorage cache');

                            return true;
                        }
                    }
                }
                
                // Fallback para cache em memória
                if (window.memoryCache) {
                    const now = Date.now();
                    if (now - window.memoryCache.timestamp < CACHE_DURATION) {
                        cryptoData = window.memoryCache.data;
                        filteredData = [...cryptoData];
                        lastUpdate = window.memoryCache.timestamp;
                        console.log('Dados carregados do cache em memória');

                        return true;
                    }
                }
            } catch (error) {
                console.warn('Erro ao carregar cache:', error);
            }
            return false;
        }
        
        // Sistema de Fallback com dados mock
        function loadMockData() {
            console.log('Carregando dados mock para demonstração...');
            
            const mockData = [
                {
                    id: 'bitcoin',
                    name: 'Bitcoin',
                    symbol: 'btc',
                    image: 'https://assets.coingecko.com/coins/images/1/large/bitcoin.png',
                    current_price: 45000,
                    market_cap: 850000000000,
                    market_cap_rank: 1,
                    total_volume: 25000000000,
                    circulating_supply: 19500000,
                    price_change_percentage_24h: 2.5,
                    price_change_percentage_7d_in_currency: 8.3,
                    sparkline_in_7d: { price: [42000, 43000, 44000, 43500, 45000, 44800, 45000] }
                },
                {
                    id: 'ethereum',
                    name: 'Ethereum',
                    symbol: 'eth',
                    image: 'https://assets.coingecko.com/coins/images/279/large/ethereum.png',
                    current_price: 3200,
                    market_cap: 380000000000,
                    market_cap_rank: 2,
                    total_volume: 18000000000,
                    circulating_supply: 120000000,
                    price_change_percentage_24h: 3.2,
                    price_change_percentage_7d_in_currency: 12.1,
                    sparkline_in_7d: { price: [2850, 2900, 3000, 3100, 3150, 3180, 3200] }
                },
                {
                    id: 'binancecoin',
                    name: 'BNB',
                    symbol: 'bnb',
                    image: 'https://assets.coingecko.com/coins/images/825/large/bnb-icon2_2x.png',
                    current_price: 380,
                    market_cap: 58000000000,
                    market_cap_rank: 3,
                    total_volume: 2800000000,
                    circulating_supply: 153000000,
                    price_change_percentage_24h: 1.8,
                    price_change_percentage_7d_in_currency: 5.7,
                    sparkline_in_7d: { price: [360, 365, 370, 375, 378, 379, 380] }
                }
            ];
            
            cryptoData = mockData;
            filteredData = [...cryptoData];
            
            // Dados globais mock
            totalMarketCap.textContent = '$1.2T';
            totalVolume.textContent = '$45B';
            btcDominance.textContent = '45.2%';
            
            return true;
        }
        
        async function loadCryptoData() {
            // Evitar múltiplas requisições simultâneas
            if (isUpdating) {
                console.log('Atualização já em andamento...');
                return;
            }
            
            // Verificar se precisa atualizar (usar intervalo correto para mobile/desktop)
            const now = Date.now();
            const updateInterval = isMobileData ? MOBILE_UPDATE_INTERVAL : UPDATE_INTERVAL;
            if (now - lastUpdate < updateInterval) {
                const remainingTime = Math.ceil((updateInterval - (now - lastUpdate)) / 1000);
                console.log(`Dados ainda recentes, próxima atualização em ${remainingTime}s...`);
                return;
            }
            
            try {
                isUpdating = true;
                showLoading();
                hideError();
                
                console.log('Tentando carregar dados da API...');
                console.log('Dispositivo móvel:', isMobile);
                
                // Carregar dados globais primeiro
                await loadGlobalMarketData();
                
                // Tentar múltiplas estratégias de carregamento
                await tryMultipleLoadStrategies();
                
                hideLoading();
                console.log('Dados carregados com sucesso usando estratégias alternativas');
                
            } catch (error) {
                console.error('Erro ao carregar dados da API:', error);
                
                // Mensagem de erro específica para dispositivos móveis
                let errorMessage = 'Erro ao carregar dados. ';
                if (isMobile) {
                    errorMessage += 'Verifique sua conexão móvel e tente novamente.';
                } else {
                    errorMessage += 'Verifique sua conexão.';
                }
                
                showError(errorMessage);
                hideLoading();

            } finally {
                isUpdating = false;
            }
        }
        
        // Função para carregar dados globais do mercado (simples)
        async function loadGlobalMarketData() {
            try {
                console.log('🔄 Carregando dados globais do mercado...');
                
                const response = await makeRequest(`${COINGECKO_API_BASE}/global`);
                
                if (response.ok) {
                    const globalData = await response.json();
                    const data = globalData.data;
                    
                    // Atualizar dados globais
                    updateGlobalStats(data);
                    
                    console.log('✅ Dados globais carregados com sucesso');
                }
            } catch (error) {
                console.log('⚠️ Erro ao carregar dados globais:', error.message);
                // Usar valores padrão se falhar
                updateGlobalStats({
                    total_market_cap: { usd: 0, brl: 0 },
                    total_volume: { usd: 0, brl: 0 },
                    market_cap_percentage: { btc: 0 }
                });
            }
        }
        
        // Função para atualizar estatísticas globais
        function updateGlobalStats(data) {
            const totalMarketCap = document.getElementById('total-market-cap');
            const totalVolume = document.getElementById('total-volume');
            const btcDominance = document.getElementById('btc-dominance');
            
            if (totalMarketCap && totalVolume && btcDominance) {
                if (currentCurrency === 'BRL') {
                    totalMarketCap.textContent = formatCurrency(data.total_market_cap.brl || data.total_market_cap.usd * 5.5);
                    totalVolume.textContent = formatCurrency(data.total_volume.brl || data.total_volume.usd * 5.5);
                } else {
                    totalMarketCap.textContent = formatCurrency(data.total_market_cap.usd);
                    totalVolume.textContent = formatCurrency(data.total_volume.usd);
                }
                btcDominance.textContent = `${(data.market_cap_percentage.btc || 0).toFixed(1)}%`;
            }
        }
        

        function displayCryptoData() {
            
            
            // Mostrar informações específicas para diferentes filtros
            if (currentFilter === 'swing-trade') {
                showSwingTradeInfo();
                hideAnalysisInfo();
            } else if (currentFilter === 'excellent-buy' || currentFilter === 'strong-buy' || currentFilter === 'medium-buy' || 
                       currentFilter === 'light-buy' || currentFilter === 'neutral' || currentFilter === 'light-sell' || 
                       currentFilter === 'medium-sell' || currentFilter === 'strong-sell') {
                hideSwingTradeInfo();
                showAnalysisInfo();
            } else {
                hideSwingTradeInfo();
                hideAnalysisInfo();
            }
            
            if (filteredData.length === 0) {
                // Mensagem para desktop
                const colSpan = 10; // Atualizado para incluir a nova coluna de Score de Compra
                cryptoTableBody.innerHTML = `
                    <tr>
                        <td colspan="${colSpan}" style="text-align: center; padding: 40px;">
                            <p style="color: #a0a0a0;">Nenhuma criptomoeda encontrada.</p>
                        </td>
                    </tr>
                `;
                
                // Mensagem para mobile
                const cryptoListBody = document.getElementById('crypto-list-body');
                if (cryptoListBody) {
                    cryptoListBody.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #a0a0a0;">
                            <p>Nenhuma criptomoeda encontrada.</p>
                        </div>
                    `;
                }
                return;
            }
            
                        // Adicionar cabeçalhos de ordenação para diferentes filtros (desktop)
            let tableHeader = '';
            if (currentFilter === 'swing-trade') {
                tableHeader = `
                    <tr class="sorting-header">
                        <td colspan="10">
                            <div>
                                <i class="fas fa-sort-amount-down"></i>
                                <span>Ordenado por Score de Swing Trade (Maior para Menor)</span>
                            </div>
                        </td>
                    </tr>
                `;
            } else if (currentFilter === 'excellent-buy' || currentFilter === 'strong-buy' || currentFilter === 'medium-buy' || currentFilter === 'light-buy') {
                tableHeader = `
                    <tr class="sorting-header">
                        <td colspan="10">
                            <div>
                                <i class="fas fa-sort-amount-down"></i>
                                <span>🚀 Ordenado por Score de Recomendação de Compra para CURTO PRAZO (Maior para Menor)</span>
                            </div>
                        </td>
                    </tr>
                `;
            } else if (currentFilter === 'light-sell' || currentFilter === 'medium-sell' || currentFilter === 'strong-sell') {
                tableHeader = `
                    <tr class="sorting-header">
                        <td colspan="10">
                            <div>
                                <i class="fas fa-sort-amount-up"></i>
                                <span>⚠️ Ordenado por Score de Recomendação (Menor para Maior)</span>
                            </div>
                        </td>
                    </tr>
                `;
            } else if (currentFilter === 'neutral') {
                tableHeader = `
                    <tr class="sorting-header">
                        <td colspan="10">
                            <div>
                                <i class="fas fa-sort-amount-down"></i>
                                <span>➡️ Ordenado por Estabilidade (Menor Volatilidade Primeiro)</span>
                            </div>
                        </td>
                    </tr>
                `;
            }
        
            // Renderizar tabela desktop
            cryptoTableBody.innerHTML = tableHeader + filteredData.map((crypto, index) => {
                // Sanitizar dados da cripto
                const safeCrypto = sanitizeCryptoData(crypto);
                const priceChange24h = safeCrypto.price_change_percentage_24h;
                const priceChange7d = safeCrypto.price_change_percentage_7d_in_currency;
                
                // Calcular score de swing trade se necessário
                let swingTradeInfo = '';
                
                if (currentFilter === 'swing-trade') {
                    const score = getCachedAnalysis(crypto, 'swing');
                    const scoreClass = getScoreColorClass(score.percentage);
                    swingTradeInfo = `
                        <div class="swing-trade-score" style="margin-top: 8px;">
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${score.percentage}%; background: ${getScoreColor(score.percentage)};"></div>
                            </div>
                            <span class="score-text" style="font-size: 0.8rem; color: ${getScoreColor(score.percentage)}; font-weight: 700;">
                                <i class="fas fa-star"></i> Score: ${score.percentage}%
                            </span>
                        </div>
                    `;
                }
                
                // Versão completa para desktop
                return `
                    <tr onclick="showCryptoDetails('${crypto.id}')">
                        <td>${crypto.market_cap_rank || 'N/A'}</td>
                        <td>
                            <div class="crypto-name">
                                <img src="${crypto.image}" alt="${crypto.name}" class="crypto-icon" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMwMGQ0YWEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMwMGQ0YWEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0id2hpdGUiPgo8cGF0aCBkPSJNOCA0TDEyIDhMOCAxMkw0IDhMOCA0WiIgZmlsbD0id2hpdGUiPgo8L3N2Zz4KPC9zdmc+Cg=='">
                                <div class="crypto-info">
                                    <h3>${crypto.name}</h3>
                                    <span class="crypto-symbol">${crypto.symbol.toUpperCase()}</span>
                                    ${swingTradeInfo}
                                </div>
                            </div>
                        </td>
                        <td class="price">${formatCurrency(getCurrentPrice(crypto))}</td>
                        <td>
                            <span class="percentage ${priceChange24h >= 0 ? 'positive' : 'negative'}">
                                ${priceChange24h >= 0 ? '+' : ''}${priceChange24h.toFixed(2)}%
                            </span>
                        </td>
                        <td>
                            <span class="percentage ${priceChange7d >= 0 ? 'positive' : 'negative'}">
                                ${priceChange7d >= 0 ? '+' : ''}${priceChange7d.toFixed(2)}%
                            </span>
                        </td>
                        <td class="market-cap">${formatCurrency(getCurrentMarketCap(crypto))}</td>
                        <td class="volume">${formatCurrency(getCurrentVolume(crypto))}</td>
                        <td class="circulation">${formatNumber(crypto.circulating_supply)} ${crypto.symbol.toUpperCase()}</td>
                        <td class="buy-score">
                            ${(() => {
                                const analysis = getCachedAnalysis(crypto, 'buy');
                                const scoreClass = analysis.buySignal ? 'positive' : 'negative';
                                return `
                                    <div class="buy-score-container">
                                        <div class="score-circle" style="background: conic-gradient(${getScoreColor(analysis.percentage)} 0deg, ${getScoreColor(analysis.percentage)} ${(analysis.percentage/100)*360}deg, rgba(255,255,255,0.1) ${(analysis.percentage/100)*360}deg, rgba(255,255,255,0.1) 360deg);">
                                            <span class="score-text">${analysis.percentage}%</span>
                                        </div>
                                        <div class="recommendation-text ${scoreClass}">${analysis.recommendation.split(' ')[0]}</div>
                                        <div class="short-term-info" style="margin-top: 8px; font-size: 0.7rem; text-align: center;">
                                            <div style="color: var(--text-secondary); margin-bottom: 2px;">${analysis.shortTermPotential.split(' - ')[0]}</div>
                                            <div style="color: var(--text-muted); font-style: italic;">${analysis.entryTiming.split(' - ')[0]}</div>
                                        </div>
                                    </div>
                                `;
                            })()}
                        </td>
                        <td>
                            <div class="sparkline-chart" data-sparkline="${crypto.sparkline_in_7d?.price?.join(',') || ''}">
                                <!-- Gráfico sparkline será renderizado aqui -->
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            
            // Renderizar lista mobile
            const cryptoListBody = document.getElementById('crypto-list-body');
            if (cryptoListBody) {
                cryptoListBody.innerHTML = filteredData.map((crypto, index) => {
                    // Sanitizar dados da cripto
                    const safeCrypto = sanitizeCryptoData(crypto);
                    const priceChange24h = safeCrypto.price_change_percentage_24h;
                    const priceChange7d = safeCrypto.price_change_percentage_7d_in_currency;
                    
                    // Calcular score de swing trade se necessário
                    let swingTradeInfo = '';
                    
                    if (currentFilter === 'swing-trade') {
                        const score = getCachedAnalysis(safeCrypto, 'swing');
                        const scoreClass = getScoreColorClass(score.percentage);
                        swingTradeInfo = `
                            <div class="swing-trade-score-mobile">
                                <div class="score-bar-mobile">
                                    <div class="score-fill-mobile" style="width: ${score.percentage}%; background: ${getScoreColor(score.percentage)};"></div>
                                </div>
                                <span class="score-text-mobile" style="color: ${getScoreColor(score.percentage)}; font-weight: 700;">
                                    <i class="fas fa-star"></i> Score: ${score.percentage}%
                                </span>
                            </div>
                        `;
                    }
                    
                    return `
                        <div class="crypto-card" onclick="showCryptoDetails('${crypto.id}')">
                            <div class="col-name">
                                <i class="fas fa-star favorite-star" onclick="event.stopPropagation(); toggleFavorite('${crypto.id}')"></i>
                                <img src="${crypto.image}" alt="${crypto.name}" class="crypto-icon" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMwMGQ0YWEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMwMGQ0YWEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0id2hpdGUiPgo8cGF0aCBkPSJNOCA0TDEyIDhMOCAxMkw0IDhMOCA0WiIgZmlsbD0id2hpdGUiPgo8L3N2Zz4KPC9zdmc+Cg=='">
                                <div class="crypto-info-mobile">
                                    <h3>${crypto.name}</h3>
                                    <span class="crypto-symbol-mobile">${crypto.symbol.toUpperCase()}</span>
                                    <div class="crypto-price-mobile">${formatCurrency(getCurrentPrice(crypto))}</div>
                                    ${swingTradeInfo}
                                    
                                    <!-- 🚀 NOVA SEÇÃO: Informações de Curto Prazo para Mobile -->
                                    ${(() => {
                                        if (['excellent-buy', 'strong-buy', 'medium-buy', 'light-buy', 'neutral', 'light-sell', 'medium-sell', 'strong-sell'].includes(currentFilter)) {
                                            const analysis = getCachedAnalysis(crypto, 'buy');
                                            return `
                                                <div class="short-term-info-mobile" style="margin-top: 12px; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1);">
                                                    <div style="color: var(--text-secondary); font-size: 0.8rem; margin-bottom: 4px; text-align: center;">
                                                        ${analysis.shortTermPotential.split(' - ')[0]}
                                                    </div>
                                                    <div style="color: var(--text-muted); font-size: 0.7rem; text-align: center; font-style: italic;">
                                                        ${analysis.entryTiming.split(' - ')[0]}
                                                    </div>
                                                </div>
                                            `;
                                        }
                                        return '';
                                    })()}
                                </div>
                            </div>
                            <div class="col-24h">
                                <span class="percentage-mobile ${priceChange24h >= 0 ? 'positive' : 'negative'}">
                                    ${priceChange24h >= 0 ? '+' : ''}${priceChange24h.toFixed(2)}%
                                </span>
                            </div>
                            <div class="col-7d">
                                <span class="percentage-mobile ${priceChange7d >= 0 ? 'positive' : 'negative'}">
                                    ${priceChange7d >= 0 ? '+' : ''}${priceChange7d.toFixed(2)}%
                                </span>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            // Renderizar gráficos sparkline apenas em desktop
            if (!isMobile) {
                renderSparklines();
            }
        }
        

        

        
        // 🚀 FUNÇÃO OTIMIZADA: Filtrar e Exibir Dados (COM THROTTLING)
        function filterAndDisplayData() {
            if (!cryptoData || cryptoData.length === 0) return;
            
            // 🚀 NOVA OTIMIZAÇÃO: Usar throttling para evitar execuções excessivas
            throttleUpdate(() => {
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                // Otimização: Pré-calcular análises apenas para filtros que precisam
                let needsAnalysis = false;
                if (['excellent-buy', 'strong-buy', 'medium-buy', 'light-buy', 'neutral', 'light-sell', 'medium-sell', 'strong-sell', 'swing-trade'].includes(currentFilter)) {
                    needsAnalysis = true;
                }
                
                // 🚀 NOVA OTIMIZAÇÃO: Filtrar primeiro por busca, depois por análise
                let initialFilter = cryptoData.filter(crypto => {
                    const matchesSearch = crypto.name.toLowerCase().includes(searchTerm) || 
                                        crypto.symbol.toLowerCase().includes(searchTerm);
                    return matchesSearch;
                });
                
                // 🚀 NOVA OTIMIZAÇÃO: Aplicar filtros de análise apenas se necessário
                if (['excellent-buy', 'strong-buy', 'medium-buy', 'light-buy', 'neutral', 'light-sell', 'medium-sell', 'strong-sell', 'swing-trade'].includes(currentFilter)) {
                    console.log(`🚀 Aplicando filtro de análise: ${currentFilter}`);
                    console.log(`🚀 Criptos para filtrar: ${initialFilter.length}`);
                    
                    filteredData = initialFilter.filter(crypto => {
                        switch (currentFilter) {
                            case 'swing-trade':
                                return isGoodSwingTrade(crypto);
                            case 'excellent-buy':
                                const excellentBuyAnalysis = getCachedAnalysis(crypto, 'buy');
                                const isExcellentBuy = excellentBuyAnalysis.recommendation === '🚀 ALTA EXCELENTE';
                                if (isExcellentBuy) {
                                    console.log(`🚀 ${crypto.name} passou no filtro ALTA EXCELENTE:`, excellentBuyAnalysis);
                                }
                                return isExcellentBuy;
                            case 'strong-buy':
                                const strongBuyAnalysis = getCachedAnalysis(crypto, 'buy');
                                const isStrongBuy = strongBuyAnalysis.recommendation === '🔥 ALTA FORTE';
                                // 🚀 LOG DE DEBUG: Verificar filtro strong-buy
                                if (isStrongBuy) {
                                    console.log(`🚀 ${crypto.name} passou no filtro ALTA FORTE:`, strongBuyAnalysis);
                                }
                                return isStrongBuy;
                            case 'medium-buy':
                                return getCachedAnalysis(crypto, 'buy').recommendation === '📈 ALTA MÉDIA';
                            case 'light-buy':
                                return getCachedAnalysis(crypto, 'buy').recommendation === '✅ ALTA LEVE';
                            case 'neutral':
                                return getCachedAnalysis(crypto, 'buy').recommendation === '➡️ NEUTRO';
                            case 'light-sell':
                                return getCachedAnalysis(crypto, 'buy').recommendation === '⚠️ BAIXA LEVE';
                            case 'medium-sell':
                                return getCachedAnalysis(crypto, 'buy').recommendation === '📉 BAIXA MÉDIA';
                            case 'strong-sell':
                                return getCachedAnalysis(crypto, 'buy').recommendation === '❌ BAIXA FORTE';
                            default:
                                return true;
                        }
                    });
                    
                    console.log(`🚀 Criptos após filtro: ${filteredData.length}`);
                } else {
                    // Filtros simples (gainers, losers, todos)
                    filteredData = initialFilter.filter(crypto => {
                        switch (currentFilter) {
                            case 'gainers':
                                return crypto.price_change_percentage_24h > 0;
                            case 'losers':
                                return crypto.price_change_percentage_24h < 0;
                            default:
                                return true;
                        }
                    });
                }
                
                // Ordenar dados baseado no filtro ativo
                sortFilteredData();
                
                // Atualizar dashboard de recomendações apenas se necessário
                if (needsAnalysis) {
                    updateRecommendationsDashboard();
                }
                
                displayCryptoData();
            }, 150); // Throttle de 150ms para filtros
        }
        
        // Função para ordenar dados baseado no filtro ativo
        function sortFilteredData() {
            switch (currentFilter) {
                case 'swing-trade':
                    // Ordenar por score de swing trade (maior para menor) - OTIMIZADO
                    filteredData.sort((a, b) => {
                        // Usar cache para evitar recálculos
                        const analysisA = getCachedAnalysis(a, 'swing');
                        const analysisB = getCachedAnalysis(b, 'swing');
                        return analysisB.percentage - analysisA.percentage; // Ordem decrescente (maior score primeiro)
                    });
                    break;
                    
                case 'excellent-buy':
                case 'strong-buy':
                case 'medium-buy':
                case 'light-buy':
                case 'neutral':
                case 'light-sell':
                case 'medium-sell':
                case 'strong-sell':
                    // Ordenar por score de recomendação de compra (maior para menor) - OTIMIZADO
                    filteredData.sort((a, b) => {
                        // Usar cache para evitar recálculos
                        const analysisA = getCachedAnalysis(a, 'buy');
                        const analysisB = getCachedAnalysis(b, 'buy');
                        return analysisB.total - analysisA.total;
                    });
                    break;
                    
                case 'gainers':
                    // Ordenar por maior ganho em 24h
                    filteredData.sort((a, b) => {
                        return b.price_change_percentage_24h - a.price_change_percentage_24h;
                    });
                    break;
                    
                case 'losers':
                    // Ordenar por menor perda em 24h (menos negativo primeiro)
                    filteredData.sort((a, b) => {
                        return a.price_change_percentage_24h - b.price_change_percentage_24h;
                    });
                    break;
                    
                case 'neutral':
                    // Ordenar por estabilidade (menor volatilidade primeiro)
                    filteredData.sort((a, b) => {
                        const volatilityA = Math.abs(a.price_change_percentage_24h || 0);
                        const volatilityB = Math.abs(b.price_change_percentage_24h || 0);
                        return volatilityA - volatilityB;
                    });
                    break;
                    
                case 'medium-sell':
                case 'strong-sell':
                    // Ordenar por score de recomendação (menor para maior) - OTIMIZADO
                    filteredData.sort((a, b) => {
                        // Usar cache para evitar recálculos
                        const analysisA = getCachedAnalysis(a, 'buy');
                        const analysisB = getCachedAnalysis(b, 'buy');
                        return analysisA.total - analysisB.total;
                    });
                    break;
                    
                default:
                    // Manter ordem original por market cap rank
                    filteredData.sort((a, b) => {
                        return (a.market_cap_rank || 999) - (b.market_cap_rank || 999);
                    });
                    break;
            }
        }
        
        function isGoodSwingTrade(crypto) {
            // Sistema de pontuação para Swing Trade (0-100 pontos) - OTIMIZADO
            // Usar cache para evitar recálculos
            const analysis = getCachedAnalysis(crypto, 'swing');
            return analysis.total >= 70; // Retorna true se a pontuação for >= 70 (70% de aprovação)
        }
        
        // 🚀 Função para analisar volume (COM LOGS DE DEBUG)
        function analyzeVolume(volume, marketCap) {
            // Volume mínimo absoluto: $5M
            if (volume < 5000000) return 0;
            
            // Volume relativo ao market cap (ideal: 5-20% do market cap em 24h)
            const volumeToMarketCapRatio = volume / marketCap;
            
            let score;
            if (volumeToMarketCapRatio >= 0.05 && volumeToMarketCapRatio <= 0.20) {
                score = 25; // Volume ideal
            } else if (volumeToMarketCapRatio >= 0.02 && volumeToMarketCapRatio < 0.05) {
                score = 20; // Volume bom
            } else if (volumeToMarketCapRatio >= 0.01 && volumeToMarketCapRatio < 0.02) {
                score = 15; // Volume aceitável
            } else if (volumeToMarketCapRatio > 0.20) {
                score = 10; // Volume muito alto (pode indicar manipulação)
            } else {
                score = 5; // Volume baixo
            }
            
            // 🚀 LOG DE DEBUG: Verificar score de volume alto
            if (score >= 20) {
                console.log(`🚀 Volume alto detectado: ${volume.toLocaleString()}, ratio: ${volumeToMarketCapRatio.toFixed(4)}, score: ${score}`);
            }
            
            return score;
        }
        
        // 🚀 Função para analisar momentum (COM LOGS DE DEBUG)
        function analyzeMomentum(change24h, change7d) {
            let score = 0;
            
            // Garantir que os valores não sejam null
            const safe24h = change24h || 0;
            const safe7d = change7d || 0;
            
            // ANÁLISE 24H (15 pontos)
            if (safe24h >= 3 && safe24h <= 15) {
                score += 15; // Momentum ideal para swing trade
            } else if (safe24h >= 1 && safe24h < 3) {
                score += 12; // Momentum bom, mas pode ser muito conservador
            } else if (safe24h > 15 && safe24h <= 25) {
                score += 8; // Momentum forte, mas pode ser muito agressivo
            } else if (safe24h > 25) {
                score += 3; // Momentum muito forte (risco de correção)
            } else if (safe24h >= -5 && safe24h < 1) {
                score += 5; // Momentum neutro/leve negativo
            } else {
                score += 0; // Momentum muito negativo
            }
            
            // ANÁLISE 7 DIAS (15 pontos)
            if (safe7d >= -10 && safe7d <= 30) {
                score += 15; // Tendência ideal
            } else if (safe7d > 30 && safe7d <= 50) {
                score += 10; // Tendência forte, mas pode ser excessiva
            } else if (safe7d >= -20 && safe7d < -10) {
                score += 8; // Tendência levemente negativa, mas recuperável
            } else if (safe7d > 50) {
                score += 5; // Tendência muito forte (risco de correção)
            } else if (safe7d < -20) {
                score += 2; // Tendência muito negativa
            } else {
                score += 0;
            }
            
            // 🚀 LOG DE DEBUG: Verificar score de momentum alto
            if (score >= 25) {
                console.log(`🚀 Momentum alto detectado: 24h=${safe24h.toFixed(2)}%, 7d=${safe7d.toFixed(2)}%, score=${score}`);
            }
            
            return score;
        }
        
        // 🚀 Função para analisar market cap (COM LOGS DE DEBUG)
        function analyzeMarketCap(marketCap) {
            let score;
            // Ideal: $100M - $5B (moedas com liquidez mas não muito grandes)
            if (marketCap >= 100000000 && marketCap <= 5000000000) {
                score = 20; // Faixa ideal
            } else if (marketCap >= 50000000 && marketCap < 100000000) {
                score = 15; // Faixa boa
            } else if (marketCap > 5000000000 && marketCap <= 10000000000) {
                score = 12; // Faixa aceitável (moedas maiores)
            } else if (marketCap >= 10000000 && marketCap < 50000000) {
                score = 8; // Faixa pequena (mais risco)
            } else if (marketCap > 10000000000) {
                score = 5; // Moedas muito grandes (menos volatilidade)
            } else {
                score = 0; // Muito pequenas (alto risco)
            }
            
            // 🚀 LOG DE DEBUG: Verificar score de market cap alto
            if (score >= 15) {
                console.log(`🚀 Market cap alto detectado: $${(marketCap/1000000).toFixed(2)}M, score: ${score}`);
            }
            
            return score;
        }
        
        // 🚀 Função para analisar volatilidade (COM LOGS DE DEBUG)
        function analyzeVolatility(change24h, change7d) {
            let score = 15;
            
            // Garantir que os valores não sejam null
            const safe24h = change24h || 0;
            const safe7d = change7d || 0;
            
            // Penalizar volatilidade excessiva
            const abs24h = Math.abs(safe24h);
            const abs7d = Math.abs(safe7d);
            
            if (abs24h > 40) {
                score -= 8; // Muito volátil
            } else if (abs24h > 30) {
                score -= 5; // Volátil
            } else if (abs24h > 20) {
                score -= 3; // Moderadamente volátil
            }
            
            if (abs7d > 60) {
                score -= 5; // Tendência muito volátil
            } else if (abs7d > 40) {
                score -= 3; // Tendência volátil
            }
            
            // Bonus para volatilidade controlada (ideal para swing trade)
            if (abs24h >= 5 && abs24h <= 20 && abs7d >= 10 && abs7d <= 40) {
                score += 3;
            }
            
            const finalScore = Math.max(0, score);
            
            // 🚀 LOG DE DEBUG: Verificar score de volatilidade controlada
            if (finalScore >= 15) {
                console.log(`🚀 Volatilidade controlada detectada: 24h=${safe24h.toFixed(2)}%, 7d=${safe7d.toFixed(2)}%, score=${finalScore}`);
            }
            
            return finalScore;
        }
        
        // 🚀 Função para analisar estabilidade (COM LOGS DE DEBUG)
        function analyzeStability(rank) {
            if (!rank) return 5;
            
            let score;
            // Moedas com ranking estável (não muito altas, não muito baixas)
            if (rank >= 20 && rank <= 100) {
                score = 10; // Ranking ideal
            } else if (rank >= 10 && rank < 20) {
                score = 8; // Ranking bom
            } else if (rank > 100 && rank <= 200) {
                score = 6; // Ranking aceitável
            } else if (rank >= 5 && rank < 10) {
                score = 4; // Ranking alto (menos volatilidade)
            } else if (rank > 200) {
                score = 2; // Ranking baixo (mais risco)
            } else {
                score = 0;
            }
            
            // 🚀 LOG DE DEBUG: Verificar score de estabilidade alto
            if (score >= 8) {
                console.log(`🚀 Estabilidade alta detectada para ranking ${rank}: score ${score}`);
            }
            
            return score;
        }
        
        // Função para calcular e exibir o score de swing trade (OTIMIZADA)
        function getSwingTradeScore(crypto) {
            return getCachedAnalysis(crypto, 'swing');
        }
        
        // 🚀 Função interna para cálculo de swing trade (sem cache COM LOGS DE DEBUG)
        function calculateSwingTradeScore(crypto) {
            let score = 0;
            const maxScore = 100;
            
            const volumeScore = analyzeVolume(crypto.total_volume, crypto.market_cap);
            const momentumScore = analyzeMomentum(crypto.price_change_percentage_24h, crypto.price_change_percentage_7d_in_currency);
            const marketCapScore = analyzeMarketCap(crypto.market_cap);
            const volatilityScore = analyzeVolatility(crypto.price_change_percentage_24h, crypto.price_change_percentage_7d_in_currency);
            const stabilityScore = analyzeStability(crypto.market_cap_rank);
            
            score = volumeScore + momentumScore + marketCapScore + volatilityScore + stabilityScore;
            
            const result = {
                total: score,
                percentage: Math.round((score / maxScore) * 100),
                volume: volumeScore,
                momentum: momentumScore,
                marketCap: marketCapScore,
                volatility: volatilityScore,
                stability: stabilityScore
            };
            
            // 🚀 LOG DE DEBUG: Verificar score de swing trade alto
            if (score >= 70) {
                console.log(`🚀 Swing Trade alto para ${crypto.name}:`, {
                    total: score,
                    volume: volumeScore,
                    momentum: momentumScore,
                    marketCap: marketCapScore,
                    volatility: volatilityScore,
                    stability: stabilityScore
                });
            }
            
            return result;
        }
        
        // 🚀 SISTEMA DE CACHE PARA ANÁLISES - OTIMIZAÇÃO DE PERFORMANCE
        const analysisCache = new Map();
        const analysisCacheExpiry = 30000; // 30 segundos
        
        // 🚀 NOVAS OTIMIZAÇÕES DE PERFORMANCE
        let updateThrottleTimer = null;
        let dashboardUpdateThrottleTimer = null;
        let priceUpdateThrottleTimer = null;
        let lastUpdateTime = 0;
        const UPDATE_THROTTLE_DELAY = 100; // 100ms entre atualizações
        const DASHBOARD_UPDATE_DELAY = 500; // 500ms entre atualizações de dashboard
        const PRICE_UPDATE_DELAY = 200; // 200ms entre atualizações de preços
        
        // Cache para elementos DOM frequentemente acessados
        const domCache = new Map();
        
        // Função para obter elemento DOM com cache
        function getCachedElement(selector) {
            if (!domCache.has(selector)) {
                const element = document.querySelector(selector);
                if (element) {
                    domCache.set(selector, element);
                }
                return element;
            }
            return domCache.get(selector);
        }
        
        // Função para limpar cache de DOM
        function clearDomCache() {
            domCache.clear();
        }
        
        // Função para limpar cache expirado
        function cleanExpiredAnalysisCache() {
            const now = Date.now();
            for (const [key, value] of analysisCache.entries()) {
                if (now - value.timestamp > analysisCacheExpiry) {
                    analysisCache.delete(key);
                }
            }
        }
        
        // 🚀 FUNÇÃO OTIMIZADA: Obter análise com cache (COM LOGS DE DEBUG)
        function getCachedAnalysis(crypto, analysisType = 'buy') {
            const cacheKey = `${crypto.id}_${analysisType}`;
            const now = Date.now();
            
            // Limpar cache expirado periodicamente
            if (now % 10000 === 0) cleanExpiredAnalysisCache();
            
            const cached = analysisCache.get(cacheKey);
            if (cached && (now - cached.timestamp) < analysisCacheExpiry) {
                return cached.result;
            }
            
            // Calcular nova análise
            let result;
            try {
                if (analysisType === 'buy') {
                    result = calculateBuyRecommendationScore(crypto);
                    // 🚀 LOG DE DEBUG: Verificar score calculado
                    if (result && result.recommendation === '🔥 ALTA FORTE') {
                        console.log(`🚀 ALTA FORTE detectada para ${crypto.name}:`, {
                            score: result.total,
                            momentum: result.momentum,
                            volume: result.volume,
                            trend: result.trend,
                            risk: result.risk,
                            market: result.market
                        });
                    }
                } else if (analysisType === 'swing') {
                    result = calculateSwingTradeScore(crypto);
                }
                
                // Armazenar no cache
                analysisCache.set(cacheKey, {
                    result: result,
                    timestamp: now
                });
                
                return result;
            } catch (error) {
                console.error(`❌ Erro ao calcular análise para ${crypto.name}:`, error);
                // Retornar resultado padrão em caso de erro
                return {
                    total: 0,
                    percentage: 0,
                    momentum: 0,
                    volume: 0,
                    trend: 0,
                    risk: 0,
                    market: 0,
                    recommendation: '➡️ NEUTRO',
                    riskLevel: 'Alto',
                    buySignal: false
                };
            }
        }
        
        // Função para invalidar cache de uma crypto específica
        function invalidateCryptoAnalysisCache(cryptoId) {
            analysisCache.delete(`${cryptoId}_buy`);
            analysisCache.delete(`${cryptoId}_swing`);
        }
        
        // Função para limpar todo o cache de análise
        function clearAnalysisCache() {
            analysisCache.clear();
        }
        
        // 🚀 FUNÇÃO PARA LIMPAR TODOS OS CACHES (CHAMADA PERIÓDICA)
        function clearAllCaches() {
            clearAnalysisCache();
            clearDomCache();
            console.log('🧹 Cache limpo para otimizar performance');
        }
        
        // 🚀 LIMPAR CACHE AUTOMATICAMENTE A CADA 5 MINUTOS
        setInterval(clearAllCaches, 300000);
        
        // 🚀 FUNÇÃO PARA OTIMIZAR PERFORMANCE EM DISPOSITIVOS MÓVEIS
        function optimizeForMobile() {
            if (window.innerWidth <= 768) {
                // Reduzir frequência de atualizações em mobile
                const mobileInterval = Math.max(MOBILE_REAL_TIME_INTERVAL, 45000); // Mínimo 45s
                const desktopInterval = Math.max(DESKTOP_REAL_TIME_INTERVAL, 60000); // Mínimo 60s
                
                console.log(`📱 Otimizando para mobile: intervalos aumentados para ${mobileInterval/1000}s e ${desktopInterval/1000}s`);
                
                // Ajustar tamanho dos lotes para mobile
                if (window.updateBatchSize) {
                    window.updateBatchSize = Math.min(window.updateBatchSize, 15);
                }
            }
        }
        
        // 🚀 APLICAR OTIMIZAÇÕES DE MOBILE AO CARREGAR
        window.addEventListener('load', optimizeForMobile);
        window.addEventListener('resize', optimizeForMobile);
        
        // 🚀 FUNÇÃO PARA OTIMIZAR RENDERIZAÇÃO (REDUZIR REFLOWS)
        function optimizeRendering() {
            // Usar transform3d para forçar aceleração de hardware
            const style = document.createElement('style');
            style.textContent = `
                .crypto-table tbody tr,
                .crypto-card,
                .rec-card,
                .stat-card {
                    transform: translate3d(0, 0, 0);
                    will-change: transform;
                }
                
                .price-updating {
                    transition: none !important;
                }
            `;
            document.head.appendChild(style);
        }
        
        // 🚀 APLICAR OTIMIZAÇÕES DE RENDERIZAÇÃO
        window.addEventListener('load', optimizeRendering);
        
        // 🚀 FUNÇÃO PARA OTIMIZAR RENDERIZAÇÃO DA TABELA (COM LOGS DE DEBUG)
        function optimizeTableRendering() {
            console.log(`🚀 Aplicando otimizações de renderização da tabela`);
            
            // Usar DocumentFragment para renderização em lote
            const originalDisplayCryptoData = displayCryptoData;
            displayCryptoData = function() {
                console.log(`🚀 Renderizando tabela com otimizações`);
                
                // Pausar reflows durante renderização
                const tableBody = getCachedElement('#crypto-table-body');
                if (tableBody) {
                    console.log(`🚀 Pausando reflows durante renderização`);
                    tableBody.style.visibility = 'hidden';
                    
                    // Renderizar usando função original
                    originalDisplayCryptoData.call(this);
                    
                    // Restaurar visibilidade após renderização
                    requestAnimationFrame(() => {
                        tableBody.style.visibility = 'visible';
                        console.log(`🚀 Reflows reabilitados após renderização`);
                    });
                } else {
                    console.warn(`⚠️ Corpo da tabela não encontrado, usando renderização padrão`);
                    originalDisplayCryptoData.call(this);
                }
            };
            
            console.log(`🚀 Otimizações de renderização aplicadas com sucesso`);
        }
        
        // 🚀 APLICAR OTIMIZAÇÕES DE TABELA
        window.addEventListener('load', optimizeTableRendering);
        
        // 🚀 FUNÇÃO PARA MONITORAR PERFORMANCE
        function monitorPerformance() {
            if (window.performance && window.performance.memory) {
                const memory = window.performance.memory;
                console.log('📊 Performance Monitor:', {
                    usedJSHeapSize: `${Math.round(memory.usedJSHeapSize / 1024 / 1024)}MB`,
                    totalJSHeapSize: `${Math.round(memory.totalJSHeapSize / 1024 / 1024)}MB`,
                    jsHeapSizeLimit: `${Math.round(memory.jsHeapSizeLimit / 1024 / 1024)}MB`
                });
            }
        }
        
        // 🚀 MONITORAR PERFORMANCE A CADA 30 SEGUNDOS
        setInterval(monitorPerformance, 30000);
        
        // 🚀 FUNÇÃO PARA OTIMIZAR INICIALIZAÇÃO
        function optimizeInitialization() {
            // Desabilitar animações durante carregamento inicial
            document.body.style.setProperty('--transition-fast', '0s');
            document.body.style.setProperty('--transition-normal', '0s');
            document.body.style.setProperty('--transition-slow', '0s');
            
            // Reabilitar animações após carregamento
            setTimeout(() => {
                document.body.style.removeProperty('--transition-fast');
                document.body.style.removeProperty('--transition-normal');
                document.body.style.removeProperty('--transition-slow');
                console.log('🎬 Animações reabilitadas após carregamento');
            }, 2000);
        }
        
        // 🚀 APLICAR OTIMIZAÇÕES DE INICIALIZAÇÃO
        window.addEventListener('load', optimizeInitialization);
        
        // 🚀 FUNÇÕES DE THROTTLING PARA OTIMIZAR PERFORMANCE
        function throttleUpdate(callback, delay) {
            if (updateThrottleTimer) return;
            
            updateThrottleTimer = setTimeout(() => {
                callback();
                updateThrottleTimer = null;
            }, delay);
        }
        
        function throttleDashboardUpdate(callback) {
            if (dashboardUpdateThrottleTimer) return;
            
            dashboardUpdateThrottleTimer = setTimeout(() => {
                callback();
                dashboardUpdateThrottleTimer = null;
            }, DASHBOARD_UPDATE_DELAY);
        }
        
        function throttlePriceUpdate(callback) {
            if (priceUpdateThrottleTimer) return;
            
            priceUpdateThrottleTimer = setTimeout(() => {
                callback();
                priceUpdateThrottleTimer = null;
            }, PRICE_UPDATE_DELAY);
        }
        
        // 🚀 FUNÇÃO PARA VERIFICAR SE DEVE ATUALIZAR (EVITA ATUALIZAÇÕES DESNECESSÁRIAS)
        function shouldUpdate() {
            const now = Date.now();
            if (now - lastUpdateTime < UPDATE_THROTTLE_DELAY) {
                return false;
            }
            lastUpdateTime = now;
            return true;
        }
        
        // 🚀 FUNÇÃO PARA VERIFICAR SE A CRYPTO MUDOU SIGNIFICATIVAMENTE
        function hasSignificantChange(oldCrypto, newCrypto) {
            const priceChange = Math.abs((newCrypto.current_price - oldCrypto.current_price) / oldCrypto.current_price);
            const volumeChange = Math.abs((newCrypto.total_volume - oldCrypto.total_volume) / oldCrypto.total_volume);
            
            // Só atualizar se houver mudança significativa (>1% no preço ou >5% no volume)
            return priceChange > 0.01 || volumeChange > 0.05;
        }
        
        // 🚀 FUNÇÃO PARA OTIMIZAR ATUALIZAÇÕES DE PREÇO
        function optimizePriceUpdates(oldData, newData) {
            const significantChanges = [];
            
            newData.forEach(newCrypto => {
                const oldCrypto = oldData.find(c => c.id === newCrypto.id);
                if (oldCrypto && hasSignificantChange(oldCrypto, newCrypto)) {
                    significantChanges.push(newCrypto);
                }
            });
            
            return significantChanges;
        }
        
        // 🚀 FUNÇÃO PARA OTIMIZAR CÁLCULOS DE ANÁLISE (COM LOGS DE DEBUG)
        function optimizeAnalysisCalculations() {
            console.log(`🚀 Otimizando cálculos de análise para ${filteredData.length} criptos`);
            
            // Pré-calcular análises apenas para criptos visíveis
            const visibleCryptos = filteredData.slice(0, 50); // Primeiras 50 criptos
            
            console.log(`🚀 Pré-aquecendo cache para ${visibleCryptos.length} criptos visíveis`);
            
            visibleCryptos.forEach(crypto => {
                // Pré-aquecer cache para análises comuns
                getCachedAnalysis(crypto, 'buy');
                getCachedAnalysis(crypto, 'swing');
            });
            
            console.log(`🚀 Cache pré-aquecido com sucesso`);
        }
        
        // 🚀 APLICAR OTIMIZAÇÕES DE ANÁLISE APÓS FILTRAGEM
        const originalFilterAndDisplayData = filterAndDisplayData;
        filterAndDisplayData = function() {
            originalFilterAndDisplayData.call(this);
            // Otimizar cálculos após filtrar
            setTimeout(optimizeAnalysisCalculations, 100);
        };

        // 🚀 NOVA FUNÇÃO: Sistema de Análise Inteligente para Recomendações de Compra (OTIMIZADA)
        function getBuyRecommendationScore(crypto) {
            return getCachedAnalysis(crypto, 'buy');
        }
        
        // 🚀 FUNÇÃO APRIMORADA: Cálculo interno de score para CURTO PRAZO (7 DIAS)
        function calculateBuyRecommendationScore(crypto) {
            const safeCrypto = sanitizeCryptoData(crypto);
            
            let score = 0;
            const maxScore = 100;
            
            // 🚀 1. ANÁLISE DE MOMENTUM AVANÇADA (35 pontos) - OTIMIZADA PARA 7 DIAS
            const momentumScore = analyzeAdvancedMomentumForShortTerm(safeCrypto);
            score += momentumScore;
            
            // 🚀 2. ANÁLISE DE VOLUME INTELIGENTE (25 pontos) - COM PADRÕES DE MERCADO
            const volumeScore = analyzeIntelligentVolumeForShortTerm(safeCrypto);
            score += volumeScore;
            
            // 🚀 3. ANÁLISE DE TENDÊNCIA DE CURTO PRAZO (20 pontos) - FOCO EM 7 DIAS
            const trendScore = analyzeShortTermTrendStrength(safeCrypto);
            score += trendScore;
            
            // 🚀 4. ANÁLISE DE RISCO DINÂMICO (15 pontos) - BASEADO EM VOLATILIDADE REAL
            const riskScore = analyzeDynamicRiskForShortTerm(safeCrypto);
            score += riskScore;
            
            // 🚀 5. ANÁLISE DE POSICIONAMENTO DE MERCADO (5 pontos) - CONTEXTO GLOBAL
            const marketScore = analyzeMarketPositionForShortTerm(safeCrypto);
            score += marketScore;
            
            const result = {
                total: score,
                percentage: Math.round((score / maxScore) * 100),
                momentum: momentumScore,
                volume: volumeScore,
                trend: trendScore,
                risk: riskScore,
                market: marketScore,
                recommendation: getRecommendationLevel(score),
                riskLevel: getRiskLevel(score),
                buySignal: score >= 75, // 🚀 AUMENTADO PARA 75% - MAIS SELETIVO
                shortTermPotential: getShortTermPotential(score),
                entryTiming: getEntryTiming(safeCrypto, score)
            };
            
            // 🚀 LOG DE DEBUG: Verificar score calculado
            if (score >= 85) {
                console.log(`🚀 Score ALTA FORTE para ${crypto.name}:`, {
                    total: score,
                    momentum: momentumScore,
                    volume: volumeScore,
                    trend: trendScore,
                    risk: riskScore,
                    market: marketScore,
                    recommendation: result.recommendation,
                    shortTermPotential: result.shortTermPotential,
                    entryTiming: result.entryTiming
                });
            }
            
            return result;
        }
        
        // 🚀 Função para determinar o nível de recomendação (COM LOGS DE DEBUG)
        function getRecommendationLevel(score) {
            let recommendation;
            if (score >= 90) {
                recommendation = '🚀 ALTA EXCELENTE';
                console.log(`🚀 ALTA EXCELENTE detectada! Score: ${score}`);
            } else if (score >= 80) {
                recommendation = '🔥 ALTA FORTE';
                console.log(`🚀 ALTA FORTE detectada! Score: ${score}`);
            } else if (score >= 70) {
                recommendation = '📈 ALTA MÉDIA';
            } else if (score >= 60) {
                recommendation = '✅ ALTA LEVE';
            } else if (score >= 50) {
                recommendation = '➡️ NEUTRO';
            } else if (score >= 40) {
                recommendation = '⚠️ BAIXA LEVE';
            } else if (score >= 30) {
                recommendation = '📉 BAIXA MÉDIA';
            } else {
                recommendation = '❌ BAIXA FORTE';
            }
            
            return recommendation;
        }
        
        // 🚀 Função para determinar o nível de risco (COM LOGS DE DEBUG)
        function getRiskLevel(score) {
            let riskLevel;
            if (score >= 85) {
                riskLevel = 'Muito Baixo';
                console.log(`🚀 Risco muito baixo detectado! Score: ${score}`);
            } else if (score >= 75) {
                riskLevel = 'Baixo';
                console.log(`🚀 Risco baixo detectado! Score: ${score}`);
            } else if (score >= 65) {
                riskLevel = 'Médio-Baixo';
            } else if (score >= 55) {
                riskLevel = 'Médio';
            } else if (score >= 45) {
                riskLevel = 'Médio-Alto';
            } else if (score >= 35) {
                riskLevel = 'Alto';
            } else {
                riskLevel = 'Muito Alto';
            }
            
            return riskLevel;
        }
        
        // 🚀 NOVAS FUNÇÕES ESPECIALIZADAS PARA ANÁLISE DE CURTO PRAZO (7 DIAS)
        
        // 🚀 NOVA FUNÇÃO: Análise de Momentum Avançada para Curto Prazo (7 dias)
        function analyzeAdvancedMomentumForShortTerm(crypto) {
            const change24h = crypto.price_change_percentage_24h || 0;
            const change7d = crypto.price_change_percentage_7d_in_currency || 0;
            const change30d = crypto.price_change_percentage_30d_in_currency || 0;
            
            let score = 0;
            
            // 🚀 MOMENTUM DE 24H (40% do score) - OTIMIZADO PARA ENTRADA IMEDIATA
            if (change24h >= 8 && change24h <= 20) score += 14; // 🚀 ZONA IDEAL: momentum forte mas controlado
            else if (change24h >= 4 && change24h < 8) score += 12; // 🚀 ZONA BOA: momentum positivo crescente
            else if (change24h >= 1 && change24h < 4) score += 10; // 🚀 ZONA ACEITÁVEL: momentum inicial
            else if (change24h >= -2 && change24h < 1) score += 8; // 🚀 ZONA DE ENTRADA: momentum neutro/leve negativo
            else if (change24h >= -5 && change24h < -2) score += 6; // 🚀 ZONA DE SOBREVENDA: oportunidade de entrada
            else if (change24h >= -10 && change24h < -5) score += 4; // 🚀 ZONA DE CORREÇÃO: possível reversão
            else if (change24h > 20) score += 8; // 🚀 MOMENTUM EXCESSIVO: risco de correção
            else score += 2; // 🚀 MOMENTUM MUITO NEGATIVO: evitar
            
            // 🚀 MOMENTUM DE 7 DIAS (35% do score) - FOCO PRINCIPAL PARA CURTO PRAZO
            if (change7d >= 15 && change7d <= 35) score += 12.25; // 🚀 ZONA IDEAL: tendência de alta sustentada
            else if (change7d >= 8 && change7d < 15) score += 10.5; // 🚀 ZONA BOA: tendência positiva
            else if (change7d >= 0 && change7d < 8) score += 8.75; // 🚀 ZONA ACEITÁVEL: tendência neutra/positiva
            else if (change7d >= -8 && change7d < 0) score += 7; // 🚀 ZONA DE ENTRADA: tendência levemente negativa
            else if (change7d >= -15 && change7d < -8) score += 5.25; // 🚀 ZONA DE SOBREVENDA: oportunidade
            else if (change7d >= -25 && change7d < -15) score += 3.5; // 🚀 ZONA DE CORREÇÃO: possível reversão
            else if (change7d > 35) score += 6; // 🚀 TENDÊNCIA EXCESSIVA: risco de correção
            else score += 1.75; // 🚀 TENDÊNCIA MUITO NEGATIVA: evitar
            
            // 🚀 MOMENTUM DE 30 DIAS (25% do score) - CONTEXTO DE LONGO PRAZO
            if (change30d >= 25 && change30d <= 50) score += 8.75; // 🚀 ZONA IDEAL: tendência de alta consistente
            else if (change30d >= 15 && change30d < 25) score += 7.5; // 🚀 ZONA BOA: tendência positiva
            else if (change30d >= 0 && change30d < 15) score += 6.25; // 🚀 ZONA ACEITÁVEL: tendência neutra/positiva
            else if (change30d >= -15 && change30d < 0) score += 5; // 🚀 ZONA DE ENTRADA: tendência levemente negativa
            else if (change30d >= -30 && change30d < -15) score += 3.75; // 🚀 ZONA DE SOBREVENDA: oportunidade
            else if (change30d > 50) score += 4.5; // 🚀 TENDÊNCIA EXCESSIVA: risco de correção
            else score += 2.5; // 🚀 TENDÊNCIA MUITO NEGATIVA: evitar
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de momentum alto
            if (finalScore >= 30) {
                console.log(`🚀 Momentum alto para curto prazo - ${crypto.name}:`, {
                    change24h,
                    change7d,
                    change30d,
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // 🚀 NOVA FUNÇÃO: Análise de Volume Inteligente para Curto Prazo
        function analyzeIntelligentVolumeForShortTerm(crypto) {
            const volume = crypto.total_volume || 0;
            const marketCap = crypto.market_cap || 1;
            const volumeRatio = volume / marketCap;
            
            let score = 0;
            
            // 🚀 VOLUME RELATIVO AO MARKET CAP (60% do score) - OTIMIZADO PARA CURTO PRAZO
            if (volumeRatio >= 0.08 && volumeRatio <= 0.25) score += 15; // 🚀 ZONA IDEAL: liquidez perfeita para swing trade
            else if (volumeRatio >= 0.05 && volumeRatio < 0.08) score += 12; // 🚀 ZONA BOA: liquidez adequada
            else if (volumeRatio >= 0.03 && volumeRatio < 0.05) score += 10; // 🚀 ZONA ACEITÁVEL: liquidez moderada
            else if (volumeRatio >= 0.02 && volumeRatio < 0.03) score += 8; // 🚀 ZONA MÍNIMA: liquidez baixa mas aceitável
            else if (volumeRatio > 0.25) score += 6; // 🚀 VOLUME EXCESSIVO: possível manipulação
            else score += 3; // 🚀 VOLUME MUITO BAIXO: falta de liquidez
            
            // 🚀 CRESCIMENTO DO VOLUME (40% do score) - INDICADOR DE INTERESSE CRESCENTE
            const volumeChange24h = crypto.total_volume_change_24h || 0;
            if (volumeChange24h >= 30 && volumeChange24h <= 80) score += 10; // 🚀 ZONA IDEAL: crescimento sustentado
            else if (volumeChange24h >= 15 && volumeChange24h < 30) score += 8; // 🚀 ZONA BOA: crescimento moderado
            else if (volumeChange24h >= 5 && volumeChange24h < 15) score += 6; // 🚀 ZONA ACEITÁVEL: crescimento leve
            else if (volumeChange24h >= -10 && volumeChange24h < 5) score += 4; // 🚀 ZONA NEUTRA: volume estável
            else if (volumeChange24h > 80) score += 5; // 🚀 CRESCIMENTO EXCESSIVO: possível pico
            else score += 2; // 🚀 QUEDA NO VOLUME: sinal negativo
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de volume alto
            if (finalScore >= 20) {
                console.log(`🚀 Volume alto para curto prazo - ${crypto.name}:`, {
                    volume: volume.toLocaleString(),
                    marketCap: marketCap.toLocaleString(),
                    volumeRatio: volumeRatio.toFixed(4),
                    volumeChange24h,
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // 🚀 NOVA FUNÇÃO: Análise de Força da Tendência para Curto Prazo
        function analyzeShortTermTrendStrength(crypto) {
            const change24h = crypto.price_change_percentage_24h || 0;
            const change7d = crypto.price_change_percentage_7d_in_currency || 0;
            const change30d = crypto.price_change_percentage_30d_in_currency || 0;
            
            let score = 0;
            
            // 🚀 CONSISTÊNCIA DA TENDÊNCIA (60% do score) - FOCO EM 7 DIAS
            const positiveCount = [change24h, change7d, change30d].filter(c => c > 0).length;
            const negativeCount = [change24h, change7d, change30d].filter(c => c < 0).length;
            
            if (positiveCount === 3) score += 12; // 🚀 TENDÊNCIA PERFEITA: alta em todos os períodos
            else if (positiveCount === 2 && change7d > 0) score += 10; // 🚀 TENDÊNCIA BOA: alta em 7d e 30d
            else if (positiveCount === 2 && change24h > 0) score += 9; // 🚀 TENDÊNCIA ACEITÁVEL: alta em 24h e 7d
            else if (positiveCount === 1 && change7d > 0) score += 8; // 🚀 TENDÊNCIA POSITIVA: alta apenas em 7d
            else if (positiveCount === 1 && change24h > 0) score += 7; // 🚀 TENDÊNCIA INICIAL: alta apenas em 24h
            else if (negativeCount === 3) score += 2; // 🚀 TENDÊNCIA NEGATIVA: queda em todos os períodos
            else if (negativeCount === 2 && change7d < 0) score += 4; // 🚀 TENDÊNCIA LEVEMENTE NEGATIVA
            else score += 6; // 🚀 TENDÊNCIA MISTA: oportunidades de reversão
            
            // 🚀 FORÇA DA TENDÊNCIA (40% do score) - INTENSIDADE DO MOVIMENTO
            const avgChange = Math.abs((change24h + change7d + change30d) / 3);
            if (avgChange >= 15 && avgChange <= 30) score += 8; // 🚀 ZONA IDEAL: movimento forte mas controlado
            else if (avgChange >= 8 && avgChange < 15) score += 6; // 🚀 ZONA BOA: movimento moderado
            else if (avgChange >= 3 && avgChange < 8) score += 4; // 🚀 ZONA ACEITÁVEL: movimento leve
            else if (avgChange > 30) score += 5; // 🚀 MOVIMENTO EXCESSIVO: risco de correção
            else score += 2; // 🚀 MOVIMENTO MUITO FRACO: pouca oportunidade
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de tendência alta
            if (finalScore >= 15) {
                console.log(`🚀 Tendência alta para curto prazo - ${crypto.name}:`, {
                    change24h,
                    change7d,
                    change30d,
                    positiveCount,
                    negativeCount,
                    avgChange: avgChange.toFixed(2),
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // 🚀 NOVA FUNÇÃO: Análise de Risco Dinâmico para Curto Prazo
        function analyzeDynamicRiskForShortTerm(crypto) {
            const marketCap = crypto.market_cap || 0;
            const rank = crypto.market_cap_rank || 999;
            const volatility = Math.abs(crypto.price_change_percentage_24h || 0);
            
            let score = 0;
            
            // 🚀 RISCO BASEADO NA CAPITALIZAÇÃO (50% do score) - LIQUIDEZ E ESTABILIDADE
            if (marketCap >= 5000000000 && marketCap <= 50000000000) score += 7.5; // 🚀 ZONA IDEAL: $5B-$50B (estável mas com volatilidade)
            else if (marketCap >= 1000000000 && marketCap < 5000000000) score += 6; // 🚀 ZONA BOA: $1B-$5B (boa liquidez)
            else if (marketCap >= 500000000 && marketCap < 1000000000) score += 4.5; // 🚀 ZONA ACEITÁVEL: $500M-$1B (liquidez moderada)
            else if (marketCap >= 100000000 && marketCap < 500000000) score += 3; // 🚀 ZONA PEQUENA: $100M-$500M (mais risco)
            else if (marketCap > 50000000000) score += 2; // 🚀 MOEDAS MUITO GRANDES: menos volatilidade
            else score += 1; // 🚀 MUITO PEQUENAS: alto risco
            
            // 🚀 RISCO BASEADO NO RANKING (30% do score) - POSIÇÃO NO MERCADO
            if (rank >= 20 && rank <= 100) score += 4.5; // 🚀 RANKING IDEAL: estabilidade e liquidez
            else if (rank >= 10 && rank < 20) score += 3.75; // 🚀 RANKING ALTO: menos volatilidade
            else if (rank > 100 && rank <= 200) score += 3; // 🚀 RANKING MÉDIO: aceitável
            else if (rank >= 5 && rank < 10) score += 2.25; // 🚀 RANKING MUITO ALTO: estabilidade excessiva
            else if (rank > 200) score += 1.5; // 🚀 RANKING BAIXO: mais risco
            else score += 0.75; // 🚀 RANKING EXTREMO: alto risco
            
            // 🚀 RISCO BASEADO NA VOLATILIDADE (20% do score) - MOVIMENTO DE PREÇO
            if (volatility >= 5 && volatility <= 15) score += 3; // 🚀 ZONA IDEAL: volatilidade controlada
            else if (volatility >= 3 && volatility < 5) score += 2.5; // 🚀 ZONA BOA: volatilidade baixa
            else if (volatility >= 15 && volatility <= 25) score += 2; // 🚀 ZONA ACEITÁVEL: volatilidade moderada
            else if (volatility > 25) score += 1; // 🚀 VOLATILIDADE ALTA: risco elevado
            else score += 1.5; // 🚀 VOLATILIDADE MUITO BAIXA: pouca oportunidade
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de risco baixo
            if (finalScore >= 12) {
                console.log(`🚀 Risco baixo para curto prazo - ${crypto.name}:`, {
                    marketCap: marketCap.toLocaleString(),
                    rank,
                    volatility: volatility.toFixed(2),
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // 🚀 NOVA FUNÇÃO: Análise de Posicionamento de Mercado para Curto Prazo
        function analyzeMarketPositionForShortTerm(crypto) {
            const rank = crypto.market_cap_rank || 999;
            const dominance = crypto.market_cap_dominance || 0;
            
            let score = 0;
            
            // 🚀 POSIÇÃO NO MERCADO GLOBAL (60% do score) - CONTEXTO DE INVESTIMENTO
            if (rank >= 20 && rank <= 100) score += 3; // 🚀 ZONA IDEAL: estabilidade e oportunidades
            else if (rank >= 10 && rank < 20) score += 2.5; // 🚀 ZONA BOA: estabilidade
            else if (rank > 100 && rank <= 200) score += 2; // 🚀 ZONA ACEITÁVEL: oportunidades
            else if (rank >= 5 && rank < 10) score += 1.5; // 🚀 ZONA ALTA: menos volatilidade
            else if (rank > 200) score += 1; // 🚀 ZONA BAIXA: mais risco
            else score += 0.5; // 🚀 ZONA EXTREMA: alto risco
            
            // 🚀 DOMINÂNCIA DE MERCADO (40% do score) - INFLUÊNCIA NO MERCADO
            if (dominance >= 0.5 && dominance <= 2) score += 2; // 🚀 ZONA IDEAL: influência moderada
            else if (dominance >= 0.1 && dominance < 0.5) score += 1.5; // 🚀 ZONA BOA: influência baixa
            else if (dominance > 2 && dominance <= 5) score += 1; // 🚀 ZONA ACEITÁVEL: influência alta
            else if (dominance > 5) score += 0.5; // 🚀 DOMINÂNCIA EXCESSIVA: menos oportunidades
            else score += 0.5; // 🚀 DOMINÂNCIA MUITO BAIXA: mais risco
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de posição alta
            if (finalScore >= 4) {
                console.log(`🚀 Posição alta para curto prazo - ${crypto.name}:`, {
                    rank,
                    dominance: dominance.toFixed(4),
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // 🚀 NOVA FUNÇÃO: Determinar Potencial de Curto Prazo
        function getShortTermPotential(score) {
            if (score >= 90) return '🚀 EXCELENTE - Alto potencial de retorno em 7 dias';
            else if (score >= 80) return '🔥 MUITO BOM - Bom potencial de retorno em 7 dias';
            else if (score >= 70) return '📈 BOM - Potencial positivo em 7 dias';
            else if (score >= 60) return '✅ ACEITÁVEL - Potencial moderado em 7 dias';
            else if (score >= 50) return '➡️ NEUTRO - Potencial limitado em 7 dias';
            else if (score >= 40) return '⚠️ BAIXO - Baixo potencial em 7 dias';
            else return '❌ MUITO BAIXO - Evitar para curto prazo';
        }
        
        // 🚀 NOVA FUNÇÃO: Determinar Timing de Entrada
        function getEntryTiming(crypto, score) {
            const change24h = crypto.price_change_percentage_24h || 0;
            const change7d = crypto.price_change_percentage_7d_in_currency || 0;
            
            if (score >= 85) {
                if (change24h >= 5 && change24h <= 15) return '🚀 ENTRADA IMEDIATA - Momentum ideal';
                else if (change24h >= -2 && change24h < 5) return '📈 ENTRADA AGORA - Oportunidade de entrada';
                else if (change24h >= -5 && change24h < -2) return '⏰ AGUARDAR LEVE CORREÇÃO - Entrada em breve';
                else return '🎯 ENTRADA ESTRATÉGICA - Analisar momento específico';
            } else if (score >= 75) {
                if (change24h >= 3 && change24h <= 12) return '📈 ENTRADA BOA - Momentum positivo';
                else if (change24h >= -3 && change24h < 3) return '⏰ AGUARDAR SINAL - Entrada em breve';
                else return '🔍 MONITORAR - Aguardar melhor momento';
            } else if (score >= 65) {
                if (change24h >= 1 && change24h <= 8) return '⏰ AGUARDAR - Entrada em correção';
                else if (change24h >= -5 && change24h < 1) return '🔍 MONITORAR CORREÇÃO - Entrada em breve';
                else return '⏳ AGUARDAR MELHOR MOMENTO - Patience';
            } else {
                return '❌ NÃO RECOMENDADO - Evitar entrada';
            }
        }
        
                // 🚀 Análise avançada de momentum (OTIMIZADA COM LOGS DE DEBUG)
        function analyzeAdvancedMomentumOptimized(crypto) {
            const change24h = crypto.price_change_percentage_24h || 0;
            const change7d = crypto.price_change_percentage_7d_in_currency || 0;
            const change30d = crypto.price_change_percentage_30d_in_currency || 0;
            
            let score = 0;
            
            // Momentum de 24h (40% do score) - OTIMIZADO
            if (change24h > 15) score += 12;
            else if (change24h > 8) score += 10;
            else if (change24h > 3) score += 8;
            else if (change24h > 0) score += 6;
            else if (change24h > -5) score += 4;
            else if (change24h > -10) score += 2;
            
            // Momentum de 7 dias (35% do score) - OTIMIZADO
            if (change7d > 25) score += 10.5;
            else if (change7d > 15) score += 9;
            else if (change7d > 8) score += 7;
            else if (change7d > 0) score += 5;
            else if (change7d > -10) score += 3;
            else if (change7d > -20) score += 1;
            
            // Momentum de 30 dias (25% do score) - OTIMIZADO
            if (change30d > 40) score += 7.5;
            else if (change30d > 25) score += 6;
            else if (change30d > 15) score += 5;
            else if (change30d > 0) score += 3;
            else if (change30d > -15) score += 1;
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de momentum alto
            if (finalScore >= 25) {
                console.log(`🚀 Momentum alto para ${crypto.name}:`, {
                    change24h,
                    change7d,
                    change30d,
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // Análise avançada de momentum (ORIGINAL - mantida para compatibilidade)
        function analyzeAdvancedMomentum(crypto) {
            const change24h = crypto.price_change_percentage_24h || 0;
            const change7d = crypto.price_change_percentage_7d_in_currency || 0;
            const change30d = crypto.price_change_percentage_30d_in_currency || 0;
            
            let score = 0;
            
            // Momentum de 24h (40% do score)
            if (change24h > 15) score += 12; // Momentum muito forte
            else if (change24h > 8) score += 10; // Momentum forte
            else if (change24h > 3) score += 8; // Momentum positivo
            else if (change24h > 0) score += 6; // Leve alta
            else if (change24h > -5) score += 4; // Estável
            else if (change24h > -10) score += 2; // Leve baixa
            else score += 0; // Baixa forte
            
            // Momentum de 7 dias (35% do score)
            if (change7d > 25) score += 10.5;
            else if (change7d > 15) score += 9;
            else if (change7d > 8) score += 7;
            else if (change7d > 0) score += 5;
            else if (change7d > -10) score += 3;
            else if (change7d > -20) score += 1;
            else score += 0;
            
            // Momentum de 30 dias (25% do score)
            if (change30d > 40) score += 7.5;
            else if (change30d > 25) score += 6;
            else if (change30d > 15) score += 5;
            else if (change30d > 0) score += 3;
            else if (change30d > -15) score += 1;
            else score += 0;
            
            return Math.round(score);
        }
        
        // 🚀 Análise avançada de volume (OTIMIZADA COM LOGS DE DEBUG)
        function analyzeAdvancedVolumeOptimized(crypto) {
            const volume = crypto.total_volume || 0;
            const marketCap = crypto.market_cap || 1;
            const volumeRatio = volume / marketCap;
            
            let score = 0;
            
            // Volume em relação à capitalização de mercado - OTIMIZADO
            if (volumeRatio > 0.5) score += 15;
            else if (volumeRatio > 0.3) score += 12;
            else if (volumeRatio > 0.2) score += 10;
            else if (volumeRatio > 0.1) score += 8;
            else if (volumeRatio > 0.05) score += 5;
            else score += 2;
            
            // Crescimento do volume (se disponível) - OTIMIZADO
            const volumeChange24h = crypto.total_volume_change_24h || 0;
            if (volumeChange24h > 50) score += 10;
            else if (volumeChange24h > 25) score += 8;
            else if (volumeChange24h > 10) score += 6;
            else if (volumeChange24h > 0) score += 4;
            else score += 2;
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de volume alto
            if (finalScore >= 20) {
                console.log(`🚀 Volume alto para ${crypto.name}:`, {
                    volume,
                    marketCap,
                    volumeRatio: volumeRatio.toFixed(4),
                    volumeChange24h,
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // Análise avançada de volume (ORIGINAL - mantida para compatibilidade)
        function analyzeAdvancedVolume(crypto) {
            const volume = crypto.total_volume || 0;
            const marketCap = crypto.market_cap || 1;
            const volumeRatio = volume / marketCap;
            
            let score = 0;
            
            // Volume em relação à capitalização de mercado
            if (volumeRatio > 0.5) score += 15; // Volume muito alto
            else if (volumeRatio > 0.3) score += 12; // Volume alto
            else if (volumeRatio > 0.2) score += 10; // Volume bom
            else if (volumeRatio > 0.1) score += 8; // Volume moderado
            else if (volumeRatio > 0.05) score += 5; // Volume baixo
            else score += 2; // Volume muito baixo
            
            // Crescimento do volume (se disponível)
            const volumeChange24h = crypto.total_volume_change_24h || 0;
            if (volumeChange24h > 50) score += 10;
            else if (volumeChange24h > 25) score += 8;
            else if (volumeChange24h > 10) score += 6;
            else if (volumeChange24h > 0) score += 4;
            else score += 2;
            
            return Math.round(score);
        }
        
        // 🚀 Análise de força da tendência (OTIMIZADA COM LOGS DE DEBUG)
        function analyzeTrendStrengthOptimized(crypto) {
            const change24h = crypto.price_change_percentage_24h || 0;
            const change7d = crypto.price_change_percentage_7d_in_currency || 0;
            const change30d = crypto.price_change_percentage_30d_in_currency || 0;
            
            let score = 0;
            
            // Consistência da tendência (OTIMIZADA)
            const positiveCount = [change24h, change7d, change30d].filter(c => c > 0).length;
            const negativeCount = [change24h, change7d, change30d].filter(c => c < 0).length;
            
            if (positiveCount === 3) score += 12;
            else if (positiveCount === 2) score += 10;
            else if (positiveCount === 1) score += 8;
            else if (negativeCount === 3) score += 2;
            else if (negativeCount === 2) score += 4;
            else score += 6;
            
            // Força da tendência (OTIMIZADA)
            const avgChange = Math.abs((change24h + change7d + change30d) / 3);
            if (avgChange > 20) score += 8;
            else if (avgChange > 10) score += 6;
            else if (avgChange > 5) score += 4;
            else score += 2;
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de tendência alta
            if (finalScore >= 15) {
                console.log(`🚀 Tendência alta para ${crypto.name}:`, {
                    change24h,
                    change7d,
                    change30d,
                    positiveCount,
                    negativeCount,
                    avgChange: avgChange.toFixed(2),
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // Análise de força da tendência (ORIGINAL - mantida para compatibilidade)
        function analyzeTrendStrength(crypto) {
            const change24h = crypto.price_change_percentage_24h || 0;
            const change7d = crypto.price_change_percentage_7d_in_currency || 0;
            const change30d = crypto.price_change_percentage_30d_in_currency || 0;
            
            let score = 0;
            
            // Consistência da tendência
            if (change24h > 0 && change7d > 0 && change30d > 0) {
                score += 12; // Tendência de alta consistente
            } else if (change24h > 0 && change7d > 0) {
                score += 10; // Tendência de alta recente
            } else if (change24h > 0) {
                score += 8; // Tendência de alta apenas 24h
            } else if (change24h < 0 && change7d < 0 && change30d < 0) {
                score += 2; // Tendência de baixa consistente
            } else if (change24h < 0 && change7d < 0) {
                score += 4; // Tendência de baixa recente
            } else {
                score += 6; // Misto
            }
            
            // Força da tendência
            const avgChange = (change24h + change7d + change30d) / 3;
            if (Math.abs(avgChange) > 20) score += 8;
            else if (Math.abs(avgChange) > 10) score += 6;
            else if (Math.abs(avgChange) > 5) score += 4;
            else score += 2;
            
            return Math.round(score);
        }
        
        // 🚀 Análise de nível de risco (OTIMIZADA COM LOGS DE DEBUG)
        function analyzeRiskLevelOptimized(crypto) {
            const marketCap = crypto.market_cap || 0;
            const rank = crypto.market_cap_rank || 999;
            
            let score = 0;
            
            // Risco baseado na capitalização (OTIMIZADO)
            if (marketCap > 10000000000) score += 8;
            else if (marketCap > 1000000000) score += 6;
            else if (marketCap > 100000000) score += 4;
            else if (marketCap > 10000000) score += 2;
            
            // Risco baseado no ranking (OTIMIZADO)
            if (rank <= 10) score += 7;
            else if (rank <= 50) score += 5;
            else if (rank <= 100) score += 3;
            else if (rank <= 200) score += 1;
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de risco baixo
            if (finalScore >= 12) {
                console.log(`🚀 Risco baixo para ${crypto.name}:`, {
                    marketCap: marketCap.toLocaleString(),
                    rank,
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // Análise de nível de risco (ORIGINAL - mantida para compatibilidade)
        function analyzeRiskLevel(crypto) {
            const marketCap = crypto.market_cap || 0;
            const rank = crypto.market_cap_rank || 999;
            const volatility = Math.abs(crypto.price_change_percentage_24h || 0);
            
            let score = 0;
            
            // Risco baseado na capitalização
            if (marketCap > 10000000000) score += 8; // > $10B (Baixo risco)
            else if (marketCap > 1000000000) score += 6; // > $1B (Risco médio-baixo)
            else if (marketCap > 100000000) score += 4; // > $100M (Risco médio)
            else if (marketCap > 10000000) score += 2; // > $10M (Risco alto)
            else score += 0; // < $10M (Risco muito alto)
            
            // Risco baseado no ranking
            if (rank <= 10) score += 7;
            else if (rank <= 50) score += 5;
            else if (rank <= 100) score += 3;
            else if (rank <= 200) score += 1;
            else score += 0;
            
            return Math.round(score);
        }
        
        // 🚀 Análise de posição no mercado (OTIMIZADA COM LOGS DE DEBUG)
        function analyzeMarketPositionOptimized(crypto) {
            const rank = crypto.market_cap_rank || 999;
            const dominance = crypto.market_cap_dominance || 0;
            
            let score = 0;
            
            // Posição no mercado global (OTIMIZADA)
            if (rank <= 5) score += 6;
            else if (rank <= 20) score += 5;
            else if (rank <= 50) score += 4;
            else if (rank <= 100) score += 3;
            else if (rank <= 200) score += 2;
            else score += 1;
            
            // Dominância de mercado (OTIMIZADA)
            if (dominance > 5) score += 4;
            else if (dominance > 1) score += 3;
            else if (dominance > 0.1) score += 2;
            else score += 1;
            
            const finalScore = Math.round(score);
            
            // 🚀 LOG DE DEBUG: Verificar score de posição alta
            if (finalScore >= 8) {
                console.log(`🚀 Posição alta para ${crypto.name}:`, {
                    rank,
                    dominance: dominance.toFixed(4),
                    score: finalScore
                });
            }
            
            return finalScore;
        }
        
        // Análise de posição no mercado (ORIGINAL - mantida para compatibilidade)
        function analyzeMarketPosition(crypto) {
            const marketCap = crypto.market_cap || 0;
            const rank = crypto.market_cap_rank || 999;
            const dominance = crypto.market_cap_dominance || 0;
            
            let score = 0;
            
            // Posição no mercado global
            if (rank <= 5) score += 6; // Top 5
            else if (rank <= 20) score += 5; // Top 20
            else if (rank <= 50) score += 4; // Top 50
            else if (rank <= 100) score += 3; // Top 100
            else if (rank <= 200) score += 2; // Top 200
            else score += 1; // Outros
            
            // Dominância de mercado
            if (dominance > 5) score += 4;
            else if (dominance > 1) score += 3;
            else if (dominance > 0.1) score += 2;
            else score += 1;
            
            return Math.round(score);
        }
        
        // 🚀 FUNÇÃO: Atualizar Dashboard de Recomendações (OTIMIZADA COM THROTTLING)
        function updateRecommendationsDashboard() {
            if (!cryptoData || cryptoData.length === 0) return;
            
            // Usar throttling para evitar atualizações excessivas
            throttleDashboardUpdate(() => {
                // Usar requestAnimationFrame para não bloquear a UI
                requestAnimationFrame(() => {
                    updateRecommendationsDashboardInternal();
                });
            });
        }
        
        // 🚀 Função interna para atualizar dashboard (executada em background COM LOGS DE DEBUG)
        function updateRecommendationsDashboardInternal() {
            const counts = {
                'excellent-buy': 0,
                'strong-buy': 0,
                'medium-buy': 0,
                'light-buy': 0,
                'neutral': 0,
                'light-sell': 0,
                'medium-sell': 0,
                'strong-sell': 0
            };
            
            const recommendations = [];
            
            // Processar em lotes para não bloquear a UI
            const batchSize = 20;
            let processed = 0;
            
            function processBatch() {
                const end = Math.min(processed + batchSize, cryptoData.length);
                
                for (let i = processed; i < end; i++) {
                    const crypto = cryptoData[i];
                    const analysis = getCachedAnalysis(crypto, 'buy');
                    const category = analysis.recommendation;
                    
                    // 🚀 LOG DE DEBUG: Verificar categorias detectadas
                    if (category === '🔥 ALTA FORTE') {
                        console.log(`🚀 ALTA FORTE detectada no dashboard para ${crypto.name}:`, analysis);
                    }
                    
                    // Otimização: Usar switch para melhor performance
                    switch (category) {
                        case '🚀 ALTA EXCELENTE':
                            counts['excellent-buy']++;
                            break;
                        case '🔥 ALTA FORTE':
                            counts['strong-buy']++;
                            break;
                        case '📈 ALTA MÉDIA':
                            counts['medium-buy']++;
                            break;
                        case '✅ ALTA LEVE':
                            counts['light-buy']++;
                            break;
                        case '➡️ NEUTRO':
                            counts['neutral']++;
                            break;
                        case '⚠️ BAIXA LEVE':
                            counts['light-sell']++;
                            break;
                        case '📉 BAIXA MÉDIA':
                            counts['medium-sell']++;
                            break;
                        case '❌ BAIXA FORTE':
                            counts['strong-sell']++;
                            break;
                    }
                    
                    if (analysis.buySignal) {
                        recommendations.push({
                            ...crypto,
                            analysis: analysis
                        });
                    }
                }
                
                processed = end;
                
                if (processed < cryptoData.length) {
                    // Processar próximo lote
                    requestAnimationFrame(processBatch);
                } else {
                    // Finalizar atualização
                    console.log(`🚀 Dashboard finalizado. Contadores:`, counts);
                    finalizeDashboardUpdate(counts, recommendations);
                }
            }
            
            // Iniciar processamento em lotes
            processBatch();
        }
        
        // 🚀 Função para finalizar atualização do dashboard (COM LOGS DE DEBUG)
        function finalizeDashboardUpdate(counts, recommendations) {
            console.log(`🚀 Finalizando dashboard. Contadores:`, counts);
            console.log(`🚀 Recomendações encontradas:`, recommendations.length);
            
            // Atualizar contadores
            const elements = {
                'excellent-buy': document.getElementById('excellent-buy-count'),
                'strong-buy': document.getElementById('strong-buy-count'),
                'medium-buy': document.getElementById('medium-buy-count'),
                'light-buy': document.getElementById('light-buy-count'),
                'neutral': document.getElementById('neutral-count'),
                'light-sell': document.getElementById('light-sell-count'),
                'medium-sell': document.getElementById('medium-sell-count'),
                'strong-sell': document.getElementById('strong-sell-count')
            };
            
            for (const [key, element] of Object.entries(elements)) {
                if (element) {
                    element.textContent = counts[key];
                    console.log(`🚀 Atualizado contador ${key}: ${counts[key]}`);
                } else {
                    console.warn(`⚠️ Elemento não encontrado para ${key}`);
                }
            }
            
            // Atualizar top recomendações
            updateTopRecommendations(recommendations);
        }
        
        // 🚀 Função para atualizar top recomendações (OTIMIZADA COM LOGS DE DEBUG)
        function updateTopRecommendations(recommendations) {
            const topList = document.getElementById('top-recommendations');
            if (!topList) {
                console.warn(`⚠️ Elemento top-recommendations não encontrado`);
                return;
            }
            
            console.log(`🚀 Atualizando top recomendações. Total: ${recommendations.length}`);
            
            // Otimização: Limitar processamento para melhor performance
            const maxRecommendations = Math.min(recommendations.length, 20);
            const limitedRecommendations = recommendations.slice(0, maxRecommendations);
            
            // Ordenar por score (maior para menor) e pegar top 10
            const top10 = limitedRecommendations
                .sort((a, b) => b.analysis.total - a.analysis.total)
                .slice(0, 10);
            
            console.log(`🚀 Top 10 recomendações:`, top10.map(r => ({
                name: r.name,
                score: r.analysis.total,
                recommendation: r.analysis.recommendation
            })));
            
            // Usar DocumentFragment para melhor performance
            const fragment = document.createDocumentFragment();
            
            top10.forEach((crypto, index) => {
                const item = document.createElement('div');
                item.className = 'top-item';
                item.innerHTML = `
                    <div class="top-rank">#${index + 1}</div>
                                    <div class="top-info">
                    <h4>${crypto.name} (${crypto.symbol.toUpperCase()})</h4>
                    <p>${crypto.analysis.recommendation} • Risco: ${crypto.analysis.riskLevel}</p>
                    <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 4px;">
                        ${crypto.analysis.shortTermPotential} • ${crypto.analysis.entryTiming}
                    </p>
                </div>
                <div class="top-score">${crypto.analysis.percentage}%</div>
                `;
                fragment.appendChild(item);
            });
            
            // Limpar e adicionar tudo de uma vez
            topList.innerHTML = '';
            topList.appendChild(fragment);
            
            console.log(`🚀 Top recomendações atualizado com sucesso`);
            
            // 🚀 ATUALIZAR BANNER DE OPORTUNIDADES DE CURTO PRAZO
            updateShortTermOpportunitiesBanner(recommendations);
        }
        
        // 🚀 NOVA FUNÇÃO: Atualizar Banner de Oportunidades de Curto Prazo
        function updateShortTermOpportunitiesBanner(recommendations) {
            const opportunitiesGrid = document.getElementById('top-opportunities-grid');
            if (!opportunitiesGrid) {
                console.warn(`⚠️ Elemento top-opportunities-grid não encontrado`);
                return;
            }
            
            console.log(`🚀 Atualizando banner de oportunidades de curto prazo. Total: ${recommendations.length}`);
            
            // Pegar as top 6 oportunidades (maior score)
            const topOpportunities = recommendations
                .sort((a, b) => b.analysis.total - a.analysis.total)
                .slice(0, 6);
            
            console.log(`🚀 Top 6 oportunidades:`, topOpportunities.map(r => ({
                name: r.name,
                score: r.analysis.total,
                recommendation: r.analysis.recommendation,
                shortTermPotential: r.analysis.shortTermPotential,
                entryTiming: r.analysis.entryTiming
            })));
            
            // Usar DocumentFragment para melhor performance
            const fragment = document.createDocumentFragment();
            
            topOpportunities.forEach((crypto, index) => {
                const card = document.createElement('div');
                card.className = `opportunity-card ${getOpportunityClass(crypto.analysis.total)}`;
                card.onclick = () => showCryptoChart(crypto.id, '4h');
                
                card.innerHTML = `
                    <div class="opportunity-header">
                        <img src="${crypto.image}" alt="${crypto.name}" class="opportunity-icon" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMwMGQ0YWEiLz4KPC9zdmc+';">
                        <div class="opportunity-info">
                            <h4>${crypto.name}</h4>
                            <span class="opportunity-symbol">${crypto.symbol.toUpperCase()}</span>
                        </div>
                    </div>
                    
                    <div class="opportunity-metrics">
                        <div class="metric-item">
                            <div class="metric-value">${crypto.analysis.percentage}%</div>
                            <div class="metric-label">Score</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${crypto.analysis.riskLevel}</div>
                            <div class="metric-label">Risco</div>
                        </div>
                    </div>
                    
                    <div class="opportunity-potential">
                        <div class="potential-text">${crypto.analysis.shortTermPotential}</div>
                        <div class="entry-timing">${crypto.analysis.entryTiming}</div>
                    </div>
                `;
                
                fragment.appendChild(card);
            });
            
            // Limpar e adicionar tudo de uma vez
            opportunitiesGrid.innerHTML = '';
            opportunitiesGrid.appendChild(fragment);
            
            console.log(`🚀 Banner de oportunidades de curto prazo atualizado com sucesso`);
        }
        
        // 🚀 FUNÇÃO AUXILIAR: Determinar classe CSS baseada no score
        function getOpportunityClass(score) {
            if (score >= 90) return 'excellent';
            else if (score >= 80) return 'strong';
            else if (score >= 70) return 'medium';
            else return 'neutral';
        }
        
        function renderSparklines() {
            document.querySelectorAll('.sparkline-chart').forEach(chart => {
                const sparklineData = chart.dataset.sparkline;
                if (sparklineData) {
                    const prices = sparklineData.split(',').map(Number);
                    if (prices.length > 1) {
                        chart.innerHTML = createSparklineSVG(prices);
                    }
                }
            });
        }
        
        function createSparklineSVG(prices) {
            if (prices.length < 2) return '';
            
            const width = 120;
            const height = 40;
            const padding = 5;
            const chartWidth = width - (padding * 2);
            const chartHeight = height - (padding * 2);
            
            const minPrice = Math.min(...prices);
            const maxPrice = Math.max(...prices);
            const priceRange = maxPrice - minPrice;
            
            if (priceRange === 0) return '';
            
            const points = prices.map((price, index) => {
                const x = padding + (index / (prices.length - 1)) * chartWidth;
                const y = padding + chartHeight - ((price - minPrice) / priceRange) * chartHeight;
                return `${x},${y}`;
            }).join(' ');
            
            const isPositive = prices[prices.length - 1] >= prices[0];
            const strokeColor = isPositive ? '#00d4aa' : '#ff6b6b';
            
            return `
                <svg width="${width}" height="${height}" viewBox="0 0 ${width} ${height}">
                    <polyline 
                        points="${points}" 
                        fill="none" 
                        stroke="${strokeColor}" 
                        stroke-width="2"
                        vector-effect="non-scaling-stroke"
                    />
                </svg>
            `;
        }
        
        // Função para mostrar criptos em sobrevenda
        function showOversoldCrypto() {
            console.log('🔍 Analisando criptos em sobrevenda...');
            console.log('📊 Dados disponíveis:', cryptoData.length);
            
            // Verificar se temos dados válidos
            if (!cryptoData || cryptoData.length === 0) {
                console.log('⚠️ Nenhum dado disponível, tentando carregar...');
                loadCryptoData();
                setTimeout(() => {
                    if (cryptoData && cryptoData.length > 0) {
                        showOversoldCrypto(); // Tentar novamente
                    } else {
                        alert('Erro ao carregar dados. Tente novamente em alguns segundos.');
                    }
                }, 2000);
                return;
            }
            
            // Verificar se os dados têm as propriedades necessárias
            const sampleCrypto = cryptoData[0];
            console.log('🔍 Amostra de dados:', {
                symbol: sampleCrypto.symbol,
                priceChange24h: sampleCrypto.price_change_percentage_24h,
                priceChange7d: sampleCrypto.price_change_percentage_7d_in_currency,
                hasData: !!sampleCrypto.price_change_percentage_24h
            });
            

            
            // Calcular RSI para cada cripto
            console.log('🔍 Iniciando cálculo de RSI para todas as criptos...');
            console.log('📊 Total de criptos para analisar:', cryptoData.length);
            
            const oversoldCoins = cryptoData.filter(crypto => {
                const rsi = calculateRSI(crypto);
                const isOversold = rsi < 35;
                if (isOversold) {
                    console.log(`📉 SOBREVENDA: ${crypto.symbol}: RSI ${rsi} (24h: ${crypto.price_change_percentage_24h}%, 7d: ${crypto.price_change_percentage_7d_in_currency}%)`);
                }
                return isOversold; // RSI abaixo de 35 indica sobrevenda (mais realista)
            });
            
            console.log('🔍 Filtro concluído. Criptos em sobrevenda encontradas:', oversoldCoins.length);
            console.log('🔍 Símbolos das criptos em sobrevenda:', oversoldCoins.map(c => c.symbol));
            
            console.log(`🔍 Análise RSI concluída:`);
            console.log(`📊 Total de criptos analisadas: ${cryptoData.length}`);
            console.log(`📉 Criptos em sobrevenda encontradas: ${oversoldCoins.length}`);
            
            // Mostrar algumas criptos com RSI mais baixo para debug
            const allCoinsWithRSI = cryptoData.map(crypto => ({
                ...crypto,
                rsi: calculateRSI(crypto)
            })).sort((a, b) => a.rsi - b.rsi);
            
            console.log('🔍 Top 10 criptos com RSI mais baixo:');
            allCoinsWithRSI.slice(0, 10).forEach((coin, index) => {
                console.log(`${index + 1}. ${coin.symbol}: RSI ${coin.rsi} (24h: ${coin.price_change_percentage_24h}%)`);
            });
            
            if (oversoldCoins.length === 0) {
                console.log('⚠️ Nenhuma cripto em sobrevenda encontrada, procurando próximas da sobrevenda...');
                // Mostrar criptos próximas da sobrevenda na tela principal
                const nearOversold = allCoinsWithRSI.filter(coin => coin.rsi < 45);
                console.log('🔍 Criptos próximas da sobrevenda:', nearOversold.length);
                if (nearOversold.length > 0) {
                    showNearOversoldInMainScreen(nearOversold);
                } else {
                    // Se não há nenhuma, mostrar as 10 com RSI mais baixo para debug
                    console.log('⚠️ Nenhuma cripto próxima da sobrevenda, mostrando as 10 com RSI mais baixo:');
                    const top10LowestRSI = allCoinsWithRSI.slice(0, 10);
                    showNearOversoldInMainScreen(top10LowestRSI);
                }
                return;
            }
            
            // Ordenar por RSI (menor primeiro)
            oversoldCoins.sort((a, b) => calculateRSI(a) - calculateRSI(b));
            
            console.log('🎯 Mostrando sobrevenda na tela principal com', oversoldCoins.length, 'criptos');
            console.log('🔍 Últimas 5 criptos antes de chamar showOversoldInMainScreen:', oversoldCoins.slice(-5).map(c => `${c.symbol}: RSI ${calculateRSI(c).toFixed(1)}`));
            
            // Mostrar criptos em sobrevenda na tela principal
            showOversoldInMainScreen(oversoldCoins);
            
            console.log('✅ showOversoldCrypto concluída com sucesso!');
            console.log('🔍 Verificando se o filtro foi aplicado corretamente...');
            console.log('🔍 currentFilter atual:', currentFilter);
            console.log('🔍 Verificando se o botão de sobrevenda está ativo...');
            const oversoldBtn = document.querySelector('.oversold-btn');
            if (oversoldBtn) {
                console.log('🔍 Botão de sobrevenda ativo:', oversoldBtn.classList.contains('active'));
            }
            console.log('🔍 Verificando se o banner de sobrevenda foi criado...');
            const oversoldBanner = document.querySelector('.oversold-banner');
            if (oversoldBanner) {
                console.log('🔍 Banner de sobrevenda encontrado:', oversoldBanner.textContent.substring(0, 50) + '...');
            } else {
                console.log('⚠️ Banner de sobrevenda não encontrado');
            }
            console.log('🔍 Verificando se a tabela foi atualizada...');
            const cryptoTableBody = document.getElementById('crypto-table-body');
            if (cryptoTableBody) {
                const rows = cryptoTableBody.querySelectorAll('tr');
                console.log('🔍 Número de linhas na tabela:', rows.length);
                if (rows.length > 1) {
                    const firstDataRow = rows[1];
                    const cryptoName = firstDataRow.querySelector('.crypto-name h3');
                    if (cryptoName) {
                        console.log('🔍 Primeira cripto na tabela:', cryptoName.textContent);
                    }
                }
            }
        }
        
        // Função para renderizar tabela de sobrevenda diretamente
        function renderOversoldTable(oversoldCoins) {
            console.log('🎨 Renderizando tabela de sobrevenda com', oversoldCoins.length, 'criptos');
            console.log('🔍 Primeiras 5 criptos para renderizar:', oversoldCoins.slice(0, 5).map(c => `${c.symbol}: RSI ${calculateRSI(c).toFixed(1)}`));
            
            const cryptoTableBody = document.getElementById('crypto-table-body');
            const cryptoListBody = document.getElementById('crypto-list-body');
            
            if (!cryptoTableBody) {
                console.error('❌ Elemento crypto-table-body não encontrado');
                return;
            }
            
            // Renderizar tabela desktop
            const tableHeader = `
                <tr class="sorting-header">
                    <td colspan="9">
                        <div>
                            <i class="fas fa-arrow-down"></i>
                            <span>Ordenado por RSI (Menor para Maior)</span>
                        </div>
                    </td>
                </tr>
            `;
            
            cryptoTableBody.innerHTML = tableHeader + oversoldCoins.map((crypto, index) => {
                const priceChange24h = crypto.price_change_percentage_24h;
                const priceChange7d = crypto.price_change_percentage_7d_in_currency;
                const rsi = calculateRSI(crypto);
                const rsiClass = rsi < 20 ? 'extreme' : rsi < 25 ? 'strong' : 'moderate';
                
                return `
                    <tr onclick="showCryptoChart('${crypto.id}', '4h')">
                        <td>${crypto.market_cap_rank || 'N/A'}</td>
                        <td>
                            <div class="crypto-name">
                                <img src="${crypto.image}" alt="${crypto.name}" class="crypto-icon" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMwMGQ0YWEiLz4KPC9zdmc+';">
                                <div class="crypto-info">
                                    <h3>${crypto.name}</h3>
                                    <span class="crypto-symbol">${crypto.symbol.toUpperCase()}</span>
                                </div>
                            </div>
                        </td>
                        <td class="price">${formatCurrency(getCurrentPrice(crypto))}</td>
                        <td>
                            <span class="percentage ${priceChange24h >= 0 ? 'positive' : 'negative'}">
                                ${priceChange24h >= 0 ? '+' : ''}${priceChange24h.toFixed(2)}%
                            </span>
                        </td>
                        <td>
                            <span class="percentage ${priceChange7d >= 0 ? 'positive' : 'negative'}">
                                ${priceChange7d >= 0 ? '+' : ''}${priceChange7d.toFixed(2)}%
                            </span>
                        </td>
                        <td class="market-cap">${formatCurrency(getCurrentMarketCap(crypto))}</td>
                        <td class="volume">${formatCurrency(getCurrentVolume(crypto))}</td>
                        <td class="circulation">${formatNumber(crypto.circulating_supply)} ${crypto.symbol.toUpperCase()}</td>
                        <td>
                            <div class="rsi-value rsi-${rsiClass}" style="text-align: center; padding: 8px 12px; border-radius: 10px; font-weight: 700; font-size: 1.1rem; border: 2px solid;">
                                ${rsi.toFixed(1)}
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            
            // Renderizar lista mobile
            if (cryptoListBody) {
                cryptoListBody.innerHTML = oversoldCoins.map((crypto, index) => {
                    const priceChange24h = crypto.price_change_percentage_24h;
                    const priceChange7d = crypto.price_change_percentage_7d_in_currency;
                    const rsi = calculateRSI(crypto);
                    const rsiClass = rsi < 20 ? 'extreme' : rsi < 25 ? 'strong' : 'moderate';
                    
                    return `
                        <div class="crypto-card" onclick="showCryptoChart('${crypto.id}', '4h')">
                            <div class="col-name">
                                <i class="fas fa-star favorite-star" onclick="event.stopPropagation(); toggleFavorite('${crypto.id}')"></i>
                                <img src="${crypto.image}" alt="${crypto.name}" class="crypto-icon" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMwMGQ0YWEiLz4KPC9zdmc+';">
                                <div class="crypto-info-mobile">
                                    <h3>${crypto.name}</h3>
                                    <span class="crypto-symbol-mobile">${crypto.symbol.toUpperCase()}</span>
                                    <div class="crypto-price-mobile">${formatCurrency(getCurrentPrice(crypto))}</div>
                                    <div class="rsi-value rsi-${rsiClass}" style="text-align: center; padding: 6px 10px; border-radius: 8px; font-weight: 700; font-size: 0.9rem; border: 2px solid; margin-top: 8px;">
                                        RSI: ${rsi.toFixed(1)}
                                    </div>
                                </div>
                            </div>
                            <div class="col-24h">
                                <span class="percentage-mobile ${priceChange24h >= 0 ? 'positive' : 'negative'}">
                                    ${priceChange24h >= 0 ? '+' : ''}${priceChange24h.toFixed(2)}%
                                </span>
                            </div>
                            <div class="col-7d">
                                <span class="percentage-mobile ${priceChange7d >= 0 ? 'positive' : 'negative'}">
                                    ${priceChange7d >= 0 ? '+' : ''}${priceChange7d.toFixed(2)}%
                                </span>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            console.log('✅ Tabela de sobrevenda renderizada com sucesso!');
            console.log('🔍 Verificando se a tabela foi realmente atualizada...');
            
            // Verificar se o conteúdo foi realmente atualizado
            const updatedRows = cryptoTableBody.querySelectorAll('tr');
            console.log('🔍 Número de linhas na tabela após renderização:', updatedRows.length);
            
            if (updatedRows.length > 1) {
                const firstDataRow = updatedRows[1]; // Primeira linha de dados (após o header)
                const cryptoName = firstDataRow.querySelector('.crypto-name h3');
                if (cryptoName) {
                    console.log('🔍 Primeira cripto na tabela renderizada:', cryptoName.textContent);
                }
            }
        }
        
        // Função para calcular RSI REAL baseado em dados de mercado
        function calculateRSI(crypto) {
            // Usar dados reais para calcular RSI mais preciso
            const priceChange24h = crypto.price_change_percentage_24h || 0;
            const priceChange7d = crypto.price_change_percentage_7d_in_currency || crypto.price_change_percentage_7d || 0;
            const volumeRatio = (crypto.total_volume || 0) / (crypto.market_cap || 1);
            
            let rsi = 50; // RSI base
            
            // Debug para algumas criptos específicas
            if (crypto.symbol === 'bitcoin' || crypto.symbol === 'ethereum' || crypto.symbol === 'binancecoin') {
                console.log(`🔍 RSI Debug - ${crypto.symbol}: 24h=${priceChange24h}%, 7d=${priceChange7d}%, volumeRatio=${volumeRatio.toFixed(3)}`);
            }
            
            // Análise de tendência de queda (sobrevenda) - MAIS AGRESSIVA
            if (priceChange24h < -2) {
                rsi -= 10; // Sobrevenda leve
            }
            if (priceChange24h < -5) {
                rsi -= 20; // Sobrevenda moderada
            }
            if (priceChange24h < -10) {
                rsi -= 30; // Sobrevenda forte
            }
            if (priceChange24h < -15) {
                rsi -= 40; // Sobrevenda extrema
            }
            if (priceChange24h < -25) {
                rsi -= 50; // Sobrevenda crítica
            }
            
            // Análise de tendência semanal
            if (priceChange7d < -5) {
                rsi -= 5; // Tendência de queda semanal
            }
            if (priceChange7d < -15) {
                rsi -= 10; // Queda forte semanal
            }
            if (priceChange7d < -30) {
                rsi -= 15; // Queda extrema semanal
            }
            
            // Análise de volume (volume alto + queda = sobrevenda)
            if (volumeRatio > 0.2 && priceChange24h < -3) {
                rsi -= 5; // Volume alto com queda
            }
            if (volumeRatio > 0.4 && priceChange24h < -8) {
                rsi -= 10; // Volume muito alto com queda forte
            }
            
            // Análise de posição relativa ao ATH
            if (crypto.ath && crypto.current_price) {
            const athDistance = ((crypto.ath - crypto.current_price) / crypto.ath) * 100;
                if (athDistance > 60) {
                    rsi -= 5; // Abaixo do ATH
                }
                if (athDistance > 80) {
                rsi -= 10; // Muito abaixo do ATH
            }
                if (athDistance > 90) {
                rsi -= 15; // Extremamente abaixo do ATH
                }
            }
            
            // Garantir que RSI fique entre 0 e 100
            const finalRSI = Math.max(0, Math.min(100, Math.round(rsi)));
            
            // Debug para criptos com RSI baixo
            if (finalRSI < 40) {
                console.log(`🔍 RSI Debug - ${crypto.symbol}: RSI ${finalRSI} (24h: ${priceChange24h}%, 7d: ${priceChange7d}%)`);
            }
            
            return finalRSI;
        }
        // Função para mostrar criptos próximas da sobrevenda na tela principal
        function showNearOversoldInMainScreen(nearOversoldCoins) {
            console.log('🎯 showNearOversoldInMainScreen chamada com', nearOversoldCoins.length, 'criptos');
            console.log('🔍 Primeiras 5 criptos recebidas:', nearOversoldCoins.slice(0, 5).map(c => `${c.symbol}: RSI ${calculateRSI(c).toFixed(1)}`));
            
            // Atualizar o filtro ativo
            currentFilter = 'near-oversold';
            
            // Atualizar botões de filtro
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.oversold-btn').classList.add('active');
            
            // Limpar banner existente se houver
            const existingBanner = document.querySelector('.oversold-banner');
            if (existingBanner) {
                existingBanner.remove();
            }
            
            // Criar banner de oportunidades emergentes
            const nearOversoldBanner = `
                <div class="oversold-banner" style="margin-bottom: 30px;">
                    <div class="oversold-banner-header">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Análise de Sobrevenda - Oportunidades Emergentes</h3>
                    </div>
                    
                    <div class="oversold-banner-description">
                        <p>Estas criptomoedas estão próximas da sobrevenda (RSI < 45) e podem apresentar oportunidades de compra em breve. Monitore de perto para identificar o momento ideal de entrada.</p>
                        
                        <ul>
                            <li>Análise técnica avançada com RSI e indicadores de volume</li>
                            <li>Identificação de oportunidades de compra em níveis de suporte</li>
                            <li>Monitoramento em tempo real com gráficos de 4 horas</li>
                            <li>Alertas automáticos quando condições melhoram</li>
                        </ul>
                    </div>
                    
                    <div class="oversold-banner-stats">
                        <div class="oversold-stat-card">
                            <div class="oversold-stat-value">${nearOversoldCoins.length}</div>
                            <div class="oversold-stat-label">Oportunidades</div>
                        </div>
                        <div class="oversold-stat-card">
                            <div class="oversold-stat-value">4H</div>
                            <div class="oversold-stat-label">Timeframe</div>
                        </div>
                        <div class="oversold-stat-card">
                            <div class="oversold-stat-value">RSI</div>
                            <div class="oversold-stat-label">Indicador</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Ordenar por RSI (menor para maior)
            const sortedNearOversoldCoins = [...nearOversoldCoins].sort((a, b) => {
                const rsiA = calculateRSI(a);
                const rsiB = calculateRSI(b);
                return rsiA - rsiB;
            });
            
            // RENDERIZAR DIRETAMENTE - NÃO USAR displayCryptoData()
            renderOversoldTable(sortedNearOversoldCoins);
            
            // Adicionar banner antes da tabela
            const tableContainer = document.querySelector('.crypto-table-container');
            if (tableContainer) {
                tableContainer.insertAdjacentHTML('beforebegin', nearOversoldBanner);
            }
            
            console.log('✅ Oportunidades emergentes exibidas na tela principal com sucesso!');
            console.log('📊 Criptos próximas da sobrevenda:', sortedNearOversoldCoins.map(c => `${c.symbol}: RSI ${calculateRSI(c).toFixed(1)}`));
        }
        
        // Função para mostrar sobrevenda na tela principal
        function showOversoldInMainScreen(oversoldCoins) {
            console.log('🎯 showOversoldInMainScreen chamada com', oversoldCoins.length, 'criptos');
            console.log('🔍 Primeiras 5 criptos recebidas:', oversoldCoins.slice(0, 5).map(c => `${c.symbol}: RSI ${calculateRSI(c).toFixed(1)}`));
            
            // Atualizar o filtro ativo
            currentFilter = 'oversold';
            
            // Atualizar botões de filtro
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.oversold-btn').classList.add('active');
            
            // Limpar banner existente se houver
            const existingBanner = document.querySelector('.oversold-banner');
            if (existingBanner) {
                existingBanner.remove();
            }
            
            // Criar banner de sobrevenda
            const oversoldBanner = `
                <div class="oversold-banner" style="margin-bottom: 30px;">
                    <div class="oversold-banner-header">
                        <i class="fas fa-arrow-down"></i>
                        <h3>Análise de Sobrevenda - Gráfico 4H</h3>
                    </div>
                    
                    <div class="oversold-banner-description">
                        <p>Estas criptomoedas estão em sobrevenda (RSI < 35) e podem apresentar excelentes oportunidades de compra. Analise os gráficos de 4 horas para identificar os melhores pontos de entrada.</p>
                        
                        <ul>
                            <li>Identificação precisa de criptos em sobrevenda com RSI</li>
                            <li>Análise técnica avançada com múltiplos indicadores</li>
                            <li>Gráficos interativos de 4 horas para timing perfeito</li>
                            <li>Oportunidades de compra em níveis de suporte</li>
                        </ul>
                    </div>
                    
                    <div class="oversold-banner-stats">
                        <div class="oversold-stat-card">
                            <div class="oversold-stat-value">${oversoldCoins.length}</div>
                            <div class="oversold-stat-label">Em Sobrevenda</div>
                        </div>
                        <div class="oversold-stat-card">
                            <div class="oversold-stat-value">4H</div>
                            <div class="oversold-stat-label">Timeframe</div>
                        </div>
                        <div class="oversold-stat-card">
                            <div class="oversold-stat-value">RSI</div>
                            <div class="oversold-stat-label">Indicador</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Ordenar por RSI (menor para maior)
            const sortedOversoldCoins = [...oversoldCoins].sort((a, b) => {
                const rsiA = calculateRSI(a);
                const rsiB = calculateRSI(b);
                return rsiA - rsiB;
            });
            
            // RENDERIZAR DIRETAMENTE - NÃO USAR displayCryptoData()
            renderOversoldTable(sortedOversoldCoins);
            
            // Adicionar banner antes da tabela
            const tableContainer = document.querySelector('.crypto-table-container');
            if (tableContainer) {
                tableContainer.insertAdjacentHTML('beforebegin', oversoldBanner);
            }
            
            console.log('✅ Sobrevenda exibida na tela principal com sucesso!');
            console.log('📊 Criptos em sobrevenda:', sortedOversoldCoins.map(c => `${c.symbol}: RSI ${calculateRSI(c).toFixed(1)}`));
        }
        
        // Função para mostrar gráfico de uma cripto específica
        function showCryptoChart(cryptoId, timeframe = '4h') {
            console.log('🔍 Abrindo gráfico:', { cryptoId, timeframe });
            
            const crypto = cryptoData.find(c => c.id === cryptoId);
            if (!crypto) {
                console.error('❌ Cripto não encontrada para gráfico:', cryptoId);
                return;
            }
            
            console.log('✅ Cripto encontrada:', crypto.name);
            
            // Fechar modal atual
            closeModal();
            
            // Mostrar modal com gráfico
            const modal = document.getElementById('crypto-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            
            modalTitle.innerHTML = `
                <i class="fas fa-chart-line" style="color: var(--primary-color); margin-right: 10px;"></i>
                ${crypto.name} (${crypto.symbol.toUpperCase()}) - Gráfico ${timeframe.toUpperCase()}
            `;
            
            // Métricas rápidas
            const rsiChart = calculateRSI(crypto);
            const rsiChartClass = rsiChart < 20 ? 'extreme' : rsiChart < 25 ? 'strong' : 'moderate';
            const athDistanceChart = (crypto.ath && crypto.current_price) ? ((crypto.ath - crypto.current_price) / crypto.ath) * 100 : null;
            const high24Chart = (typeof crypto.high_24h === 'number') ? crypto.high_24h : null;
            const low24Chart = (typeof crypto.low_24h === 'number') ? crypto.low_24h : null;
            const rangePercentChart = (high24Chart !== null && low24Chart !== null && high24Chart !== low24Chart)
                ? ((crypto.current_price - low24Chart) / (high24Chart - low24Chart)) * 100
                : null;
            const volumeDominanceChart = (crypto.market_cap && crypto.total_volume)
                ? (crypto.total_volume / crypto.market_cap) * 100
                : null;
            
            modalBody.innerHTML = `
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="crypto-info-chart">
                            <img src="${crypto.image}" alt="${crypto.name}" class="crypto-icon-chart">
                            <div>
                                <h3>${crypto.name}</h3>
                                <span class="crypto-symbol-chart">${crypto.symbol.toUpperCase()}</span>
                            </div>
                        </div>
                        <div class="price-info-chart">
                            <div class="current-price-chart">$${crypto.current_price.toLocaleString()}</div>
                            <div class="price-change-chart ${crypto.price_change_percentage_24h >= 0 ? 'positive' : 'negative'}">
                                ${crypto.price_change_percentage_24h >= 0 ? '+' : ''}${crypto.price_change_percentage_24h.toFixed(2)}%
                            </div>
                        </div>
                    </div>
                    
                    <!-- Métricas rápidas inseridas via JS -->
                    
                    <div class="tradingview-chart">
                        <div id="tradingview-chart-${cryptoId}" style="min-height: 500px; width: 100%;">
                            <div style="display: flex; align-items: center; justify-content: center; height: 500px; color: #a0a0a0;">
                                <div style="text-align: center;">
                                    <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i>
                                    <p>Carregando gráfico...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-controls">
                        <button class="chart-btn" onclick="showCryptoChart('${cryptoId}', '1h')">1H</button>
                        <button class="chart-btn active" onclick="showCryptoChart('${cryptoId}', '4h')">4H</button>
                        <button class="chart-btn" onclick="showCryptoChart('${cryptoId}', '1d')">1D</button>
                        <button class="chart-btn" onclick="showCryptoChart('${cryptoId}', '1w')">1W</button>
                    </div>
                    
                    <!-- Ações rápidas inseridas via JS -->
                </div>
            `;
            
            modal.style.display = 'flex';
            
            // Aguardar o modal estar visível antes de carregar o gráfico
            setTimeout(() => {
                loadTradingViewChart(cryptoId, timeframe);
            }, 500);
            
            // Inserir métricas rápidas abaixo do header
            try {
                const headerEl = modalBody.querySelector('.chart-header');
                if (headerEl) {
                    const metricsHTML = `
                        <div class="chart-metrics" style="display:flex; gap:12px; flex-wrap:wrap; margin: 12px 0 6px 0; align-items:center;">
                            <div class="rsi-value rsi-${rsiChartClass}" style="text-align:center; padding: 6px 10px; border-radius: 10px; font-weight:700; font-size: 0.95rem; border: 2px solid;">
                                RSI: ${rsiChart.toFixed(1)}
                            </div>
                            <div class="metric-chip" style="background: rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.1); padding:8px 12px; border-radius:10px;">
                                <i class="fas fa-mountain" style="opacity:0.8; margin-right:6px;"></i>
                                Dist. do ATH: ${athDistanceChart !== null ? `${athDistanceChart.toFixed(1)}%` : 'N/A'}
                            </div>
                            <div class="metric-chip" style="background: rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.1); padding:8px 12px; border-radius:10px; display:flex; align-items:center; gap:10px;">
                                <span>Faixa 24h:</span>
                                <span>${low24Chart !== null ? `${(low24Chart).toLocaleString('en-US',{style:'currency',currency:'USD'})}` : 'N/A'}</span>
                                <div class="range-bar" style="width:120px; height:8px; background: rgba(255,255,255,0.08); border-radius: 6px; overflow:hidden;">
                                    ${rangePercentChart !== null ? `<div class="range-fill" style="height:100%; width:${Math.max(0, Math.min(100, rangePercentChart)).toFixed(0)}%; background: linear-gradient(90deg, var(--primary-color), var(--accent-color));"></div>` : ''}
                                </div>
                                <span>${high24Chart !== null ? `${(high24Chart).toLocaleString('en-US',{style:'currency',currency:'USD'})}` : 'N/A'}</span>
                            </div>
                            <div class="metric-chip" style="background: rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.1); padding:8px 12px; border-radius:10px;">
                                <i class="fas fa-balance-scale" style="opacity:0.8; margin-right:6px;"></i>
                                Vol/MC: ${volumeDominanceChart !== null ? `${volumeDominanceChart.toFixed(1)}%` : 'N/A'}
                            </div>
                        </div>
                    `;
                    headerEl.insertAdjacentHTML('afterend', metricsHTML);
                }
            } catch (e) { console.warn('Falha ao inserir métricas no modal do gráfico', e); }
            
            // Inserir ações rápidas abaixo dos controles
            try {
                const controlsEl = modalBody.querySelector('.chart-controls');
                if (controlsEl) {
                    const actionsHTML = `
                        <div class="quick-actions" style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
                            <button class="chart-btn" onclick="toggleFavorite && toggleFavorite('${crypto.id}')"><i class="fas fa-star"></i> Favoritar</button>
                            <a class="chart-btn" href="https://www.coingecko.com/pt/moedas/${crypto.id}" target="_blank"><i class="fas fa-external-link-alt"></i> CoinGecko</a>
                            <button class="chart-btn" onclick="copyToClipboard('${crypto.symbol.toUpperCase()}USD')"><i class="fas fa-copy"></i> Copiar Símbolo</button>
                        </div>
                    `;
                    controlsEl.insertAdjacentHTML('afterend', actionsHTML);
                }
            } catch (e) { console.warn('Falha ao inserir ações rápidas', e); }
            

            

            
            // Utilitário para copiar texto
            if (!window.copyToClipboard) {
                window.copyToClipboard = function(text) {
                    try {
                        navigator.clipboard.writeText(text);
                        console.log('Copiado:', text);
                    } catch (e) {
                        const area = document.createElement('textarea');
                        area.value = text;
                        document.body.appendChild(area);
                        area.select();
                        document.execCommand('copy');
                        document.body.removeChild(area);
                        console.log('Copiado (fallback):', text);
                    }
                }
            }
        }
        
        // Função para carregar gráfico TradingView
        function loadTradingViewChart(cryptoId, timeframe, retryCount = 0) {
            // Evitar loops infinitos
            if (retryCount > 3) {
                console.error('❌ Muitas tentativas de carregar TradingView');
                const container = document.getElementById(`tradingview-chart-${cryptoId}`);
                if (container) {
                    container.innerHTML = '<div style="padding: 20px; text-align: center; color: #ff6b6b;">Erro: Não foi possível carregar o gráfico</div>';
                }
                return;
            }
            console.log('🔍 Carregando gráfico TradingView:', { cryptoId, timeframe });
            
            const crypto = cryptoData.find(c => c.id === cryptoId);
            if (!crypto) {
                console.error('❌ Cripto não encontrada:', cryptoId);
                return;
            }
            
            const container = document.getElementById(`tradingview-chart-${cryptoId}`);
            if (!container) {
                console.error('❌ Container do gráfico não encontrado:', `tradingview-chart-${cryptoId}`);
                return;
            }
            
            console.log('✅ Container encontrado, criando widget TradingView...');
            
            // Mapear timeframe para TradingView
            const tvTimeframe = {
                '1h': '60',
                '4h': '240',
                '1d': '1D',
                '1w': '1W'
            }[timeframe] || '240';
            
            // Verificar se TradingView está disponível
            if (typeof TradingView === 'undefined') {
                console.log('📥 TradingView não encontrado, tentando recarregar...');
                
                // Tentar recarregar o script
                const script = document.createElement('script');
                script.src = 'https://s3.tradingview.com/tv.js';
                script.onload = () => {
                    console.log('✅ Script TradingView recarregado!');
                    // Tentar novamente após 1 segundo
                    setTimeout(() => {
                        loadTradingViewChart(cryptoId, timeframe, retryCount + 1);
                    }, 1000);
                };
                script.onerror = () => {
                    console.error('❌ Erro ao recarregar TradingView');
                    container.innerHTML = '<div style="padding: 20px; text-align: center; color: #ff6b6b;">Erro: TradingView não carregado</div>';
                };
                document.head.appendChild(script);
                return;
            }
            
            console.log('✅ TradingView disponível, criando widget...');
            
            // Criar iframe do TradingView como fallback
            try {
                const symbol = 'BINANCE:BTCUSD'; // Usar BTC como teste
                console.log('🎯 Criando iframe com símbolo:', symbol);
                
                // Criar iframe direto para o TradingView
                const iframe = document.createElement('iframe');
                iframe.src = `https://www.tradingview.com/symbols/${symbol}/`;
                iframe.style.width = '100%';
                iframe.style.height = '500px';
                iframe.style.border = 'none';
                iframe.style.borderRadius = '10px';
                iframe.style.backgroundColor = '#1a1a1a';
                
                // Limpar container e adicionar iframe
                container.innerHTML = '';
                container.appendChild(iframe);
                
                console.log('✅ Iframe TradingView criado com sucesso!');
                
                // Adicionar link alternativo
                const linkDiv = document.createElement('div');
                linkDiv.style.textAlign = 'center';
                linkDiv.style.marginTop = '10px';
                linkDiv.innerHTML = `
                    <a href="https://www.tradingview.com/symbols/BINANCE-BTCUSD/" target="_blank" style="
                        color: var(--primary-color);
                        text-decoration: none;
                        padding: 8px 16px;
                        border: 1px solid var(--primary-color);
                        border-radius: 8px;
                        font-size: 0.9rem;
                    ">
                        <i class="fas fa-external-link-alt"></i>
                        Abrir no TradingView
                    </a>
                `;
                container.appendChild(linkDiv);
            } catch (error) {
                console.error('❌ Erro ao criar iframe TradingView:', error);
                container.innerHTML = `
                    <div style="padding: 20px; text-align: center; color: #ff6b6b;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <p>Erro ao carregar gráfico</p>
                        <p style="font-size: 0.9rem; opacity: 0.8;">${error.message}</p>
                        <a href="https://www.tradingview.com/symbols/BINANCE-BTCUSD/" target="_blank" style="
                            color: var(--primary-color);
                            text-decoration: none;
                            padding: 8px 16px;
                            border: 1px solid var(--primary-color);
                            border-radius: 8px;
                            margin-top: 15px;
                            display: inline-block;
                        ">
                            <i class="fas fa-external-link-alt"></i>
                            Abrir no TradingView
                        </a>
                    </div>
                `;
            }
        }
        function showCryptoDetails(cryptoId) {
            const crypto = cryptoData.find(c => c.id === cryptoId);
            if (!crypto) return;
            
            const modal = document.getElementById('crypto-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            
            modalTitle.textContent = crypto.name;
            
            const priceChange24h = crypto.price_change_percentage_24h;
            const priceChange7d = crypto.price_change_percentage_7d_in_currency;
            
            // Detectar se é desktop ou mobile
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                // Layout Mobile - Design Moderno e Organizado
                const rsi = calculateRSI(crypto);
                const rsiClass = rsi < 20 ? 'extreme' : rsi < 25 ? 'strong' : 'moderate';
                const athDistance = (crypto.ath && crypto.current_price) ? ((crypto.ath - crypto.current_price) / crypto.ath) * 100 : null;
                const high24h = crypto.high_24h || null;
                const low24h = crypto.low_24h || null;
                const volumeRatio = (crypto.total_volume && crypto.market_cap) ? (crypto.total_volume / crypto.market_cap) * 100 : null;
                
                modalBody.innerHTML = `
                    <div class="crypto-details-mobile">
                        <!-- Hero Section Mobile -->
                        <div style="
                            background: linear-gradient(135deg, 
                                ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.1)' : 'rgba(255, 107, 107, 0.1)'}, 
                                rgba(0, 0, 0, 0.05));
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 20px;
                            border: 1px solid ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.2)' : 'rgba(255, 107, 107, 0.2)'};
                            position: relative;
                            overflow: hidden;
                        ">
                            <!-- Elemento decorativo -->
                            <div style="
                                position: absolute;
                                top: -30px;
                                right: -30px;
                                width: 60px;
                                height: 60px;
                                background: ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.1)' : 'rgba(255, 107, 107, 0.1)'};
                                border-radius: 50%;
                                z-index: 0;
                            "></div>
                            
                            <div style="display: flex; align-items: center; gap: 15px; position: relative; z-index: 1;">
                                <!-- Avatar da Cripto -->
                                <div style="position: relative;">
                                    <img src="${crypto.image}" alt="${crypto.name}" style="
                                        width: 60px;
                                        height: 60px;
                                        border-radius: 15px;
                                        border: 3px solid ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.3)' : 'rgba(255, 107, 107, 0.3)'};
                                        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
                                    ">
                                    <div style="
                                        position: absolute;
                                        top: -3px;
                                        right: -3px;
                                        width: 16px;
                                        height: 16px;
                                        background: ${priceChange24h >= 0 ? '#00d4aa' : '#ff6b6b'};
                                        border-radius: 50%;
                                        border: 2px solid #1a1a1a;
                                    "></div>
                                </div>
                                
                                <!-- Info da Cripto -->
                                <div style="flex: 1;">
                                    <h1 style="
                                        font-size: 1.8rem;
                                        font-weight: 800;
                                        margin: 0 0 6px 0;
                                        background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                        -webkit-background-clip: text;
                                        -webkit-text-fill-color: transparent;
                                        background-clip: text;
                                    ">${crypto.name}</h1>
                                    
                                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                                        <span style="
                                            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                                            color: white;
                                            padding: 6px 12px;
                                            border-radius: 20px;
                                            font-weight: 700;
                                            font-size: 0.9rem;
                                            box-shadow: 0 3px 10px rgba(0, 212, 170, 0.3);
                                        ">${crypto.symbol.toUpperCase()}</span>
                                        
                                        <span style="
                                            background: rgba(255, 255, 255, 0.1);
                                            color: #a0a0a0;
                                            padding: 4px 8px;
                                            border-radius: 12px;
                                            font-size: 0.8rem;
                                            border: 1px solid rgba(255, 255, 255, 0.1);
                                        ">#${crypto.market_cap_rank || 'N/A'}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Preço e Mudanças -->
                            <div style="margin-top: 15px; text-align: center;">
                                <div style="
                                    font-size: 2.2rem;
                                    font-weight: 900;
                                    margin-bottom: 8px;
                                    background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                    -webkit-background-clip: text;
                                    -webkit-text-fill-color: transparent;
                                    background-clip: text;
                                ">${formatCurrency(crypto.current_price)}</div>
                                
                                <div style="display: flex; gap: 10px; justify-content: center;">
                                    <div style="
                                        display: flex;
                                        align-items: center;
                                        gap: 6px;
                                        padding: 8px 12px;
                                        border-radius: 12px;
                                        background: ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.15)' : 'rgba(255, 107, 107, 0.15)'};
                                        border: 1px solid ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.3)' : 'rgba(255, 107, 107, 0.3)'};
                                        color: ${priceChange24h >= 0 ? '#00d4aa' : '#ff6b6b'};
                                        font-weight: 700;
                                        font-size: 0.9rem;
                                    ">
                                        <i class="fas ${priceChange24h >= 0 ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
                                        <span>${priceChange24h >= 0 ? '+' : ''}${priceChange24h.toFixed(2)}%</span>
                                        <span style="font-size: 0.8rem; opacity: 0.8;">24h</span>
                                    </div>
                                    
                                    <div style="
                                        display: flex;
                                        align-items: center;
                                        gap: 6px;
                                        padding: 8px 12px;
                                        border-radius: 12px;
                                        background: ${priceChange7d >= 0 ? 'rgba(0, 212, 170, 0.15)' : 'rgba(255, 107, 107, 0.15)'};
                                        border: 1px solid ${priceChange7d >= 0 ? 'rgba(0, 212, 170, 0.3)' : 'rgba(255, 107, 107, 0.3)'};
                                        color: ${priceChange7d >= 0 ? '#00d4aa' : '#ff6b6b'};
                                        font-weight: 700;
                                        font-size: 0.9rem;
                                    ">
                                        <i class="fas ${priceChange7d >= 0 ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
                                        <span>${priceChange7d >= 0 ? '+' : ''}${priceChange7d.toFixed(2)}%</span>
                                        <span style="font-size: 0.8rem; opacity: 0.8;">7d</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Métricas Rápidas Mobile -->
                        <div style="
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 12px;
                            margin-bottom: 20px;
                        ">
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 12px;
                                padding: 15px;
                                text-align: center;
                            ">
                                <div style="
                                    width: 40px;
                                    height: 40px;
                                    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin: 0 auto 10px;
                                    font-size: 1.2rem;
                                    color: white;
                                ">
                                    <i class="fas fa-chart-pie"></i>
                                </div>
                                <div style="font-size: 0.8rem; color: #a0a0a0; margin-bottom: 5px;">Cap. de Mercado</div>
                                <div style="font-size: 1rem; font-weight: 700; color: white;">${formatCurrency(crypto.market_cap)}</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 12px;
                                padding: 15px;
                                text-align: center;
                            ">
                                <div style="
                                    width: 40px;
                                    height: 40px;
                                    background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin: 0 auto 10px;
                                    font-size: 1.2rem;
                                    color: white;
                                ">
                                    <i class="fas fa-chart-bar"></i>
                                </div>
                                <div style="font-size: 0.8rem; color: #a0a0a0; margin-bottom: 5px;">Volume 24h</div>
                                <div style="font-size: 1rem; font-weight: 700; color: white;">${formatCurrency(crypto.total_volume)}</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 12px;
                                padding: 15px;
                                text-align: center;
                            ">
                                <div style="
                                    width: 40px;
                                    height: 40px;
                                    background: linear-gradient(135deg, #00d4aa, #00f5d4);
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin: 0 auto 10px;
                                    font-size: 1.2rem;
                                    color: white;
                                ">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div style="font-size: 0.8rem; color: #a0a0a0; margin-bottom: 5px;">Circulação</div>
                                <div style="font-size: 1rem; font-weight: 700; color: white;">${formatNumber(crypto.circulating_supply)}</div>
                                <div style="font-size: 0.7rem; color: #a0a0a0; margin-top: 3px;">${crypto.symbol.toUpperCase()}</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 12px;
                                padding: 15px;
                                text-align: center;
                            ">
                                <div style="
                                    width: 40px;
                                    height: 40px;
                                    background: linear-gradient(135deg, #ffd700, #ffed4e);
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin: 0 auto 10px;
                                    font-size: 1.2rem;
                                    color: white;
                                ">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div style="font-size: 0.8rem; color: #a0a0a0; margin-bottom: 5px;">ATH</div>
                                <div style="font-size: 1rem; font-weight: 700; color: white;">${formatCurrency(crypto.ath || 0)}</div>
                            </div>
                        </div>
                        
                        <!-- Métricas Técnicas Mobile -->
                        <div style="
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 12px;
                            margin-bottom: 20px;
                        ">
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 12px;
                                padding: 15px;
                                text-align: center;
                            ">
                                <div class="rsi-value rsi-${rsiClass}" style="
                                    text-align: center;
                                    padding: 8px 12px;
                                    border-radius: 8px;
                                    font-weight: 700;
                                    font-size: 1rem;
                                    border: 2px solid;
                                    margin-bottom: 8px;
                                    display: inline-block;
                                ">RSI: ${rsi.toFixed(1)}</div>
                                <div style="font-size: 0.8rem; color: #a0a0a0;">Índice de Força</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 12px;
                                padding: 15px;
                                text-align: center;
                            ">
                                <div style="
                                    font-size: 1.2rem;
                                    font-weight: 700;
                                    color: ${athDistance !== null && athDistance > 50 ? '#ff6b6b' : '#00d4aa'};
                                    margin-bottom: 8px;
                                ">${athDistance !== null ? `${athDistance.toFixed(1)}%` : 'N/A'}</div>
                                <div style="font-size: 0.8rem; color: #a0a0a0;">Dist. do ATH</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 12px;
                                padding: 15px;
                                text-align: center;
                            ">
                                <div style="
                                    font-size: 1.2rem;
                                    font-weight: 700;
                                    color: white;
                                    margin-bottom: 8px;
                                ">${volumeRatio !== null ? `${volumeRatio.toFixed(1)}%` : 'N/A'}</div>
                                <div style="font-size: 0.8rem; color: #a0a0a0;">Vol/Market Cap</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 12px;
                                padding: 15px;
                                text-align: center;
                            ">
                                <div style="
                                    font-size: 1.2rem;
                                    font-weight: 700;
                                    color: white;
                                    margin-bottom: 8px;
                                ">${high24h !== null ? formatCurrency(high24h) : 'N/A'}</div>
                                <div style="font-size: 0.8rem; color: #a0a0a0;">Máximo 24h</div>
                            </div>
                        </div>
                        
                        <!-- Seção do Gráfico Mobile -->
                        <div style="
                            background: rgba(255, 255, 255, 0.02);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 20px;
                        ">
                            <div style="
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                margin-bottom: 15px;
                                flex-wrap: wrap;
                                gap: 10px;
                            ">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="
                                        width: 35px;
                                        height: 35px;
                                        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                                        border-radius: 10px;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-size: 1rem;
                                        color: white;
                                    ">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <h3 style="
                                        font-size: 1.3rem;
                                        font-weight: 700;
                                        margin: 0;
                                        background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                        -webkit-background-clip: text;
                                        -webkit-text-fill-color: transparent;
                                        background-clip: text;
                                    ">Gráfico ${crypto.symbol.toUpperCase()}/USD</h3>
                                </div>
                                
                                <div style="display: flex; gap: 6px; flex-wrap: wrap;">
                                    <button style="
                                        padding: 8px 12px;
                                        border: 1px solid rgba(255, 255, 255, 0.2);
                                        background: rgba(255, 255, 255, 0.05);
                                        color: white;
                                        border-radius: 8px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        font-size: 0.8rem;
                                    " onmouseover="this.style.background='rgba(0, 212, 170, 0.2)'; this.style.borderColor='rgba(0, 212, 170, 0.5)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onclick="showCryptoChart('${crypto.id}', '1h')">1H</button>
                                    <button style="
                                        padding: 8px 12px;
                                        border: 1px solid rgba(0, 212, 170, 0.5);
                                        background: rgba(0, 212, 170, 0.2);
                                        color: #00d4aa;
                                        border-radius: 8px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        font-size: 0.8rem;
                                    " onclick="showCryptoChart('${crypto.id}', '4h')">4H</button>
                                    <button style="
                                        padding: 8px 12px;
                                        border: 1px solid rgba(255, 255, 255, 0.2);
                                        background: rgba(255, 255, 255, 0.05);
                                        color: white;
                                        border-radius: 8px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        font-size: 0.8rem;
                                    " onmouseover="this.style.background='rgba(0, 212, 170, 0.2)'; this.style.borderColor='rgba(0, 212, 170, 0.5)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onclick="showCryptoChart('${crypto.id}', '1d')">1D</button>
                                    <button style="
                                        padding: 8px 12px;
                                        border: 1px solid rgba(255, 255, 255, 0.2);
                                        background: rgba(255, 255, 255, 0.05);
                                        color: white;
                                        border-radius: 8px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        font-size: 0.8rem;
                                    " onmouseover="this.style.background='rgba(0, 212, 170, 0.2)'; this.style.borderColor='rgba(0, 212, 170, 0.5)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onclick="showCryptoChart('${crypto.id}', '1w')">1W</button>
                                </div>
                            </div>
                            
                            <div style="
                                background: rgba(0, 0, 0, 0.3);
                                border-radius: 12px;
                                padding: 15px;
                                margin-bottom: 15px;
                                min-height: 300px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                border: 1px solid rgba(255, 255, 255, 0.1);
                            ">
                                <div id="tradingview-chart-${crypto.id}" style="width: 100%; height: 300px;">
                                    <div style="
                                        display: flex;
                                        flex-direction: column;
                                        align-items: center;
                                        justify-content: center;
                                        height: 100%;
                                        color: #a0a0a0;
                                    ">
                                        <i class="fas fa-chart-line" style="font-size: 2.5rem; margin-bottom: 12px; opacity: 0.5;"></i>
                                        <p style="margin: 0; font-size: 1rem;">Carregando gráfico...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ações Rápidas Mobile -->
                            <div style="
                                display: flex;
                                gap: 8px;
                                flex-wrap: wrap;
                                justify-content: center;
                            ">
                                <a href="https://www.tradingview.com/symbols/${crypto.symbol.toUpperCase()}USD/" target="_blank" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 6px;
                                    padding: 10px 16px;
                                    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                                    color: white;
                                    text-decoration: none;
                                    border-radius: 10px;
                                    font-weight: 600;
                                    transition: all 0.3s ease;
                                    font-size: 0.9rem;
                                    box-shadow: 0 3px 10px rgba(0, 212, 170, 0.3);
                                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(0, 212, 170, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 10px rgba(0, 212, 170, 0.3)'">
                                    <i class="fas fa-external-link-alt"></i>
                                    <span>TradingView</span>
                                </a>
                                
                                <button onclick="openTradingViewFullscreen('${crypto.symbol.toUpperCase()}USD')" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 6px;
                                    padding: 10px 16px;
                                    background: rgba(255, 255, 255, 0.1);
                                    color: white;
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 10px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                    font-size: 0.9rem;
                                " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                                    <i class="fas fa-expand"></i>
                                    <span>Tela Cheia</span>
                                </button>
                                
                                <button onclick="toggleFavorite && toggleFavorite('${crypto.id}')" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 6px;
                                    padding: 10px 16px;
                                    background: rgba(255, 255, 255, 0.1);
                                    color: white;
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 10px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                    font-size: 0.9rem;
                                " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                                    <i class="fas fa-star"></i>
                                    <span>Favoritar</span>
                                </button>
                                
                                <button onclick="copyToClipboard('${crypto.symbol.toUpperCase()}USD')" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 6px;
                                    padding: 10px 16px;
                                    background: rgba(255, 255, 255, 0.1);
                                    color: white;
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 10px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                    font-size: 0.9rem;
                                " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                                    <i class="fas fa-copy"></i>
                                    <span>Copiar</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Análise de Swing Trade Mobile (se ativo) -->
                        ${currentFilter === 'swing-trade' ? `
                        <div style="
                            background: rgba(255, 255, 255, 0.02);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 20px;
                        ">
                            <div style="
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                margin-bottom: 20px;
                                flex-wrap: wrap;
                                gap: 15px;
                            ">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="
                                        width: 35px;
                                        height: 35px;
                                        background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
                                        border-radius: 10px;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-size: 1rem;
                                        color: white;
                                    ">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <h3 style="
                                        font-size: 1.3rem;
                                        font-weight: 700;
                                        margin: 0;
                                        background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                        -webkit-background-clip: text;
                                        -webkit-text-fill-color: transparent;
                                        background-clip: text;
                                    ">Análise de Swing Trade</h3>
                                </div>
                                
                                <div style="text-align: center;">
                                    <div style="
                                        width: 60px;
                                        height: 60px;
                                        border-radius: 50%;
                                        background: conic-gradient(${getScoreColor(getSwingTradeScore(crypto).percentage)} 0deg, ${getScoreColor(getSwingTradeScore(crypto).percentage)} ${(getSwingTradeScore(crypto).percentage/100)*360}deg, rgba(255,255,255,0.1) ${(getSwingTradeScore(crypto).percentage/100)*360}deg, rgba(255,255,255,0.1) 360deg);
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        margin: 0 auto 8px;
                                        position: relative;
                                    ">
                                        <div style="
                                            width: 45px;
                                            height: 45px;
                                            background: #1a1a1a;
                                            border-radius: 50%;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            font-weight: 800;
                                            font-size: 1rem;
                                            color: ${getScoreColor(getSwingTradeScore(crypto).percentage)};
                                        ">${getSwingTradeScore(crypto).percentage}%</div>
                                    </div>
                                    <div style="font-size: 0.8rem; color: #a0a0a0;">Score Total</div>
                                </div>
                            </div>
                            
                            <div style="
                                display: grid;
                                grid-template-columns: repeat(2, 1fr);
                                gap: 12px;
                            ">
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                        <i class="fas fa-chart-bar" style="color: #00d4aa; font-size: 1rem;"></i>
                                        <span style="font-size: 0.9rem; font-weight: 600; color: white;">Volume</span>
                                    </div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white; margin-bottom: 8px;">${getSwingTradeScore(crypto).volume}/25</div>
                                    <div style="
                                        width: 100%;
                                        height: 6px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 3px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).volume/25)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #00d4aa, #00f5d4);
                                            border-radius: 3px;
                                        "></div>
                                    </div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                        <i class="fas fa-rocket" style="color: #ff6b6b; font-size: 1rem;"></i>
                                        <span style="font-size: 0.9rem; font-weight: 600; color: white;">Momentum</span>
                                    </div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white; margin-bottom: 8px;">${getSwingTradeScore(crypto).momentum}/30</div>
                                    <div style="
                                        width: 100%;
                                        height: 6px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 3px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).momentum/30)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
                                            border-radius: 3px;
                                        "></div>
                                    </div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                        <i class="fas fa-chart-pie" style="color: #ffd700; font-size: 1rem;"></i>
                                        <span style="font-size: 0.9rem; font-weight: 600; color: white;">Market Cap</span>
                                    </div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white; margin-bottom: 8px;">${getSwingTradeScore(crypto).marketCap}/20</div>
                                    <div style="
                                        width: 100%;
                                        height: 6px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 3px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).marketCap/20)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #ffd700, #ffed4e);
                                            border-radius: 3px;
                                        "></div>
                                    </div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                        <i class="fas fa-bolt" style="color: #9c27b0; font-size: 1rem;"></i>
                                        <span style="font-size: 0.9rem; font-weight: 600; color: white;">Volatilidade</span>
                                    </div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white; margin-bottom: 8px;">${getSwingTradeScore(crypto).volatility}/15</div>
                                    <div style="
                                        width: 100%;
                                        height: 6px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 3px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).volatility/15)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #9c27b0, #ba68c8);
                                            border-radius: 3px;
                                        "></div>
                                    </div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                        <i class="fas fa-shield-alt" style="color: #4caf50; font-size: 1rem;"></i>
                                        <span style="font-size: 0.9rem; font-weight: 600; color: white;">Estabilidade</span>
                                    </div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white; margin-bottom: 8px;">${getSwingTradeScore(crypto).stability}/10</div>
                                    <div style="
                                        width: 100%;
                                        height: 6px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 3px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).stability/10)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #4caf50, #66bb6a);
                                            border-radius: 3px;
                                        "></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        <!-- Informações Técnicas Mobile -->
                        <div style="
                            background: rgba(255, 255, 255, 0.02);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 20px;
                        ">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="
                                    width: 35px;
                                    height: 35px;
                                    background: linear-gradient(135deg, #9c27b0, #ba68c8);
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-size: 1rem;
                                    color: white;
                                ">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <h3 style="
                                    font-size: 1.3rem;
                                    font-weight: 700;
                                    margin: 0;
                                    background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                    -webkit-background-clip: text;
                                    -webkit-text-fill-color: transparent;
                                    background-clip: text;
                                ">Informações Técnicas</h3>
                            </div>
                            
                            <div style="
                                display: grid;
                                grid-template-columns: 1fr;
                                gap: 12px;
                            ">
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="font-size: 0.8rem; color: #a0a0a0; margin-bottom: 5px;">Preço Máximo Histórico</div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white;">${formatCurrency(crypto.ath || 0)}</div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="font-size: 0.8rem; color: #a0a0a0; margin-bottom: 5px;">Data do ATH</div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white;">${crypto.ath_change_percentage ? new Date(crypto.ath_date).toLocaleDateString('pt-BR') : 'N/A'}</div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="font-size: 0.8rem; color: #a0a0a0; margin-bottom: 5px;">Supply Total</div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white;">${formatNumber(crypto.total_supply || 0)} ${crypto.symbol.toUpperCase()}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // Layout Desktop - Design Moderno e Organizado
                const rsi = calculateRSI(crypto);
                const rsiClass = rsi < 20 ? 'extreme' : rsi < 25 ? 'strong' : 'moderate';
                const athDistance = (crypto.ath && crypto.current_price) ? ((crypto.ath - crypto.current_price) / crypto.ath) * 100 : null;
                const high24h = crypto.high_24h || null;
                const low24h = crypto.low_24h || null;
                const volumeRatio = (crypto.total_volume && crypto.market_cap) ? (crypto.total_volume / crypto.market_cap) * 100 : null;
                
                modalBody.innerHTML = `
                    <div class="crypto-details-desktop">
                        <!-- Hero Section com Gradiente -->
                        <div class="crypto-hero-section" style="
                            background: linear-gradient(135deg, 
                                ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.1)' : 'rgba(255, 107, 107, 0.1)'}, 
                                rgba(0, 0, 0, 0.05));
                            border-radius: 20px;
                            padding: 30px;
                            margin-bottom: 25px;
                            border: 1px solid ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.2)' : 'rgba(255, 107, 107, 0.2)'};
                            position: relative;
                            overflow: hidden;
                        ">
                            <!-- Elementos decorativos -->
                            <div style="
                                position: absolute;
                                top: -50px;
                                right: -50px;
                                width: 100px;
                                height: 100px;
                                background: ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.1)' : 'rgba(255, 107, 107, 0.1)'};
                                border-radius: 50%;
                                z-index: 0;
                            "></div>
                            
                            <div style="display: flex; align-items: center; justify-content: space-between; position: relative; z-index: 1;">
                                <!-- Info da Cripto -->
                                <div style="display: flex; align-items: center; gap: 20px;">
                                    <div style="position: relative;">
                                        <img src="${crypto.image}" alt="${crypto.name}" style="
                                            width: 80px;
                                            height: 80px;
                                            border-radius: 20px;
                                            border: 3px solid ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.3)' : 'rgba(255, 107, 107, 0.3)'};
                                            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                                        ">
                                        <div style="
                                            position: absolute;
                                            top: -5px;
                                            right: -5px;
                                            width: 20px;
                                            height: 20px;
                                            background: ${priceChange24h >= 0 ? '#00d4aa' : '#ff6b6b'};
                                            border-radius: 50%;
                                            border: 3px solid #1a1a1a;
                                        "></div>
                                </div>
                                    
                                    <div>
                                        <h1 style="
                                            font-size: 2.5rem;
                                            font-weight: 800;
                                            margin: 0 0 8px 0;
                                            background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                            -webkit-background-clip: text;
                                            -webkit-text-fill-color: transparent;
                                            background-clip: text;
                                        ">${crypto.name}</h1>
                                        
                                        <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                                            <span style="
                                                background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                                                color: white;
                                                padding: 8px 16px;
                                                border-radius: 25px;
                                                font-weight: 700;
                                                font-size: 1.1rem;
                                                box-shadow: 0 4px 15px rgba(0, 212, 170, 0.3);
                                            ">${crypto.symbol.toUpperCase()}</span>
                                            
                                            <span style="
                                                background: rgba(255, 255, 255, 0.1);
                                                color: #a0a0a0;
                                                padding: 6px 12px;
                                                border-radius: 15px;
                                                font-size: 0.9rem;
                                                border: 1px solid rgba(255, 255, 255, 0.1);
                                            ">#${crypto.market_cap_rank || 'N/A'} no ranking</span>
                                        </div>
                                </div>
                            </div>
                            
                                <!-- Preço e Mudanças -->
                                <div style="text-align: right;">
                                    <div style="
                                        font-size: 3rem;
                                        font-weight: 900;
                                        margin-bottom: 10px;
                                        background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                        -webkit-background-clip: text;
                                        -webkit-text-fill-color: transparent;
                                        background-clip: text;
                                    ">${formatCurrency(crypto.current_price)}</div>
                                    
                                    <div style="display: flex; gap: 15px; justify-content: flex-end;">
                                        <div style="
                                            display: flex;
                                            align-items: center;
                                            gap: 8px;
                                            padding: 10px 16px;
                                            border-radius: 15px;
                                            background: ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.15)' : 'rgba(255, 107, 107, 0.15)'};
                                            border: 1px solid ${priceChange24h >= 0 ? 'rgba(0, 212, 170, 0.3)' : 'rgba(255, 107, 107, 0.3)'};
                                            color: ${priceChange24h >= 0 ? '#00d4aa' : '#ff6b6b'};
                                            font-weight: 700;
                                        ">
                                        <i class="fas ${priceChange24h >= 0 ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
                                            <span>${priceChange24h >= 0 ? '+' : ''}${priceChange24h.toFixed(2)}%</span>
                                            <span style="font-size: 0.8rem; opacity: 0.8;">24h</span>
                                    </div>
                                        
                                        <div style="
                                            display: flex;
                                            align-items: center;
                                            gap: 8px;
                                            padding: 10px 16px;
                                            border-radius: 15px;
                                            background: ${priceChange7d >= 0 ? 'rgba(0, 212, 170, 0.15)' : 'rgba(255, 107, 107, 0.15)'};
                                            border: 1px solid ${priceChange7d >= 0 ? 'rgba(0, 212, 170, 0.3)' : 'rgba(255, 107, 107, 0.3)'};
                                            color: ${priceChange7d >= 0 ? '#00d4aa' : '#ff6b6b'};
                                            font-weight: 700;
                                        ">
                                        <i class="fas ${priceChange7d >= 0 ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
                                            <span>${priceChange7d >= 0 ? '+' : ''}${priceChange7d.toFixed(2)}%</span>
                                            <span style="font-size: 0.8rem; opacity: 0.8;">7d</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Métricas Rápidas -->
                        <div style="
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                            gap: 15px;
                            margin-bottom: 25px;
                        ">
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                                transition: all 0.3s ease;
                                cursor: pointer;
                            " onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <div style="
                                    width: 50px;
                                    height: 50px;
                                    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                                    border-radius: 15px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin: 0 auto 15px;
                                    font-size: 1.5rem;
                                    color: white;
                                ">
                                        <i class="fas fa-chart-pie"></i>
                                    </div>
                                <div style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 8px;">Cap. de Mercado</div>
                                <div style="font-size: 1.3rem; font-weight: 700; color: white;">${formatCurrency(crypto.market_cap)}</div>
                                </div>
                                
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                                transition: all 0.3s ease;
                                cursor: pointer;
                            " onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <div style="
                                    width: 50px;
                                    height: 50px;
                                    background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
                                    border-radius: 15px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin: 0 auto 15px;
                                    font-size: 1.5rem;
                                    color: white;
                                ">
                                        <i class="fas fa-chart-bar"></i>
                                    </div>
                                <div style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 8px;">Volume 24h</div>
                                <div style="font-size: 1.3rem; font-weight: 700; color: white;">${formatCurrency(crypto.total_volume)}</div>
                                </div>
                                
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                                transition: all 0.3s ease;
                                cursor: pointer;
                            " onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <div style="
                                    width: 50px;
                                    height: 50px;
                                    background: linear-gradient(135deg, #00d4aa, #00f5d4);
                                    border-radius: 15px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin: 0 auto 15px;
                                    font-size: 1.5rem;
                                    color: white;
                                ">
                                        <i class="fas fa-coins"></i>
                                    </div>
                                <div style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 8px;">Circulação</div>
                                <div style="font-size: 1.3rem; font-weight: 700; color: white;">${formatNumber(crypto.circulating_supply)}</div>
                                <div style="font-size: 0.8rem; color: #a0a0a0; margin-top: 5px;">${crypto.symbol.toUpperCase()}</div>
                                </div>
                                
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                                transition: all 0.3s ease;
                                cursor: pointer;
                            " onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <div style="
                                    width: 50px;
                                    height: 50px;
                                    background: linear-gradient(135deg, #ffd700, #ffed4e);
                                    border-radius: 15px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin: 0 auto 15px;
                                    font-size: 1.5rem;
                                    color: white;
                                ">
                                        <i class="fas fa-trophy"></i>
                                    </div>
                                <div style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 8px;">ATH</div>
                                <div style="font-size: 1.3rem; font-weight: 700; color: white;">${formatCurrency(crypto.ath || 0)}</div>
                                    </div>
                                </div>
                        
                        <!-- Métricas Técnicas -->
                        <div style="
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                            gap: 15px;
                            margin-bottom: 25px;
                        ">
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                            ">
                                <div class="rsi-value rsi-${rsiClass}" style="
                                    text-align: center;
                                    padding: 12px 16px;
                                    border-radius: 12px;
                                    font-weight: 700;
                                    font-size: 1.2rem;
                                    border: 2px solid;
                                    margin-bottom: 10px;
                                    display: inline-block;
                                ">RSI: ${rsi.toFixed(1)}</div>
                                <div style="font-size: 0.9rem; color: #a0a0a0;">Índice de Força Relativa</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                            ">
                                <div style="
                                    font-size: 1.5rem;
                                    font-weight: 700;
                                    color: ${athDistance !== null && athDistance > 50 ? '#ff6b6b' : '#00d4aa'};
                                    margin-bottom: 10px;
                                ">${athDistance !== null ? `${athDistance.toFixed(1)}%` : 'N/A'}</div>
                                <div style="font-size: 0.9rem; color: #a0a0a0;">Distância do ATH</div>
                        </div>
                        
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                            ">
                                <div style="
                                    font-size: 1.5rem;
                                    font-weight: 700;
                                    color: white;
                                    margin-bottom: 10px;
                                ">${volumeRatio !== null ? `${volumeRatio.toFixed(1)}%` : 'N/A'}</div>
                                <div style="font-size: 0.9rem; color: #a0a0a0;">Vol/Market Cap</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                            ">
                                <div style="
                                    font-size: 1.5rem;
                                    font-weight: 700;
                                    color: white;
                                    margin-bottom: 10px;
                                ">${high24h !== null ? formatCurrency(high24h) : 'N/A'}</div>
                                <div style="font-size: 0.9rem; color: #a0a0a0;">Máximo 24h</div>
                            </div>
                            
                            <div style="
                                background: rgba(255, 255, 255, 0.03);
                                border: 1px solid rgba(255, 255, 255, 0.1);
                                border-radius: 15px;
                                padding: 20px;
                                text-align: center;
                            ">
                                <div style="
                                    font-size: 1.5rem;
                                    font-weight: 700;
                                    color: white;
                                    margin-bottom: 10px;
                                ">${low24h !== null ? formatCurrency(low24h) : 'N/A'}</div>
                                <div style="font-size: 0.9rem; color: #a0a0a0;">Mínimo 24h</div>
                            </div>
                        </div>
                        
                        <!-- Seção do Gráfico -->
                        <div style="
                            background: rgba(255, 255, 255, 0.02);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 20px;
                            padding: 25px;
                            margin-bottom: 25px;
                        ">
                            <div style="
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                margin-bottom: 20px;
                                flex-wrap: wrap;
                                gap: 15px;
                            ">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="
                                        width: 40px;
                                        height: 40px;
                                        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                                        border-radius: 12px;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-size: 1.2rem;
                                        color: white;
                                    ">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                    <h3 style="
                                        font-size: 1.5rem;
                                        font-weight: 700;
                                        margin: 0;
                                        background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                        -webkit-background-clip: text;
                                        -webkit-text-fill-color: transparent;
                                        background-clip: text;
                                    ">Gráfico ${crypto.symbol.toUpperCase()}/USD</h3>
                            </div>
                            
                                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    <button style="
                                        padding: 10px 16px;
                                        border: 1px solid rgba(255, 255, 255, 0.2);
                                        background: rgba(255, 255, 255, 0.05);
                                        color: white;
                                        border-radius: 10px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        font-size: 0.9rem;
                                    " onmouseover="this.style.background='rgba(0, 212, 170, 0.2)'; this.style.borderColor='rgba(0, 212, 170, 0.5)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onclick="showCryptoChart('${crypto.id}', '1h')">1H</button>
                                    <button style="
                                        padding: 10px 16px;
                                        border: 1px solid rgba(0, 212, 170, 0.5);
                                        background: rgba(0, 212, 170, 0.2);
                                        color: #00d4aa;
                                        border-radius: 10px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        font-size: 0.9rem;
                                    " onclick="showCryptoChart('${crypto.id}', '4h')">4H</button>
                                    <button style="
                                        padding: 10px 16px;
                                        border: 1px solid rgba(255, 255, 255, 0.2);
                                        background: rgba(255, 255, 255, 0.05);
                                        color: white;
                                        border-radius: 10px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        font-size: 0.9rem;
                                    " onmouseover="this.style.background='rgba(0, 212, 170, 0.2)'; this.style.borderColor='rgba(0, 212, 170, 0.5)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onclick="showCryptoChart('${crypto.id}', '1d')">1D</button>
                                    <button style="
                                        padding: 10px 16px;
                                        border: 1px solid rgba(255, 255, 255, 0.2);
                                        background: rgba(255, 255, 255, 0.05);
                                        color: white;
                                        border-radius: 10px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        font-size: 0.9rem;
                                    " onmouseover="this.style.background='rgba(0, 212, 170, 0.2)'; this.style.borderColor='rgba(0, 212, 170, 0.5)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onclick="showCryptoChart('${crypto.id}', '1w')">1W</button>
                                </div>
                            </div>
                            
                            <div style="
                                background: rgba(0, 0, 0, 0.3);
                                border-radius: 15px;
                                padding: 20px;
                                margin-bottom: 20px;
                                min-height: 400px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                border: 1px solid rgba(255, 255, 255, 0.1);
                            ">
                                <div id="tradingview-chart-${crypto.id}" style="width: 100%; height: 400px;">
                                    <div style="
                                        display: flex;
                                        flex-direction: column;
                                        align-items: center;
                                        justify-content: center;
                                        height: 100%;
                                        color: #a0a0a0;
                                    ">
                                        <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i>
                                        <p style="margin: 0; font-size: 1.1rem;">Carregando gráfico...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ações Rápidas -->
                            <div style="
                                display: flex;
                                gap: 12px;
                                flex-wrap: wrap;
                                justify-content: center;
                            ">
                                <a href="https://www.tradingview.com/symbols/${crypto.symbol.toUpperCase()}USD/" target="_blank" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 8px;
                                    padding: 12px 20px;
                                    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                                    color: white;
                                    text-decoration: none;
                                    border-radius: 12px;
                                    font-weight: 600;
                                    transition: all 0.3s ease;
                                    box-shadow: 0 4px 15px rgba(0, 212, 170, 0.3);
                                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0, 212, 170, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0, 212, 170, 0.3)'">
                                    <i class="fas fa-external-link-alt"></i>
                                    <span>Ver no TradingView</span>
                                </a>
                                
                                <button onclick="openTradingViewFullscreen('${crypto.symbol.toUpperCase()}USD')" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 8px;
                                    padding: 12px 20px;
                                    background: rgba(255, 255, 255, 0.1);
                                    color: white;
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 12px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                                    <i class="fas fa-expand"></i>
                                    <span>Tela Cheia</span>
                                </button>
                                
                                <button onclick="toggleFavorite && toggleFavorite('${crypto.id}')" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 8px;
                                    padding: 12px 20px;
                                    background: rgba(255, 255, 255, 0.1);
                                    color: white;
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 12px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                                    <i class="fas fa-star"></i>
                                    <span>Favoritar</span>
                                </button>
                                
                                <button onclick="copyToClipboard('${crypto.symbol.toUpperCase()}USD')" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 8px;
                                    padding: 12px 20px;
                                    background: rgba(255, 255, 255, 0.1);
                                    color: white;
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 12px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                                    <i class="fas fa-copy"></i>
                                    <span>Copiar Símbolo</span>
                                </button>
                                
                                <a href="https://www.coingecko.com/pt/moedas/${crypto.id}" target="_blank" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 8px;
                                    padding: 12px 20px;
                                    background: rgba(255, 255, 255, 0.1);
                                    color: white;
                                    text-decoration: none;
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 12px;
                                    font-weight: 600;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                                    <i class="fas fa-info-circle"></i>
                                    <span>CoinGecko</span>
                                </a>
                            </div>
                        </div>
                        
                        <!-- Análise de Swing Trade (se ativo) -->
                        ${currentFilter === 'swing-trade' ? `
                        <div style="
                            background: rgba(255, 255, 255, 0.02);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 20px;
                            padding: 25px;
                            margin-bottom: 25px;
                        ">
                            <div style="
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                margin-bottom: 25px;
                                flex-wrap: wrap;
                                gap: 15px;
                            ">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="
                                        width: 40px;
                                        height: 40px;
                                        background: linear-gradient(135deg, #ff6b35, #ff8e8e);
                                        border-radius: 12px;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-size: 1.2rem;
                                        color: white;
                                    ">
                                    <i class="fas fa-brain"></i>
                                    </div>
                                    <h3 style="
                                        font-size: 1.5rem;
                                        font-weight: 700;
                                        margin: 0;
                                        background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                        -webkit-background-clip: text;
                                        -webkit-text-fill-color: transparent;
                                        background-clip: text;
                                    ">Análise de Swing Trade</h3>
                                </div>
                                
                                <div style="text-align: center;">
                                    <div style="
                                        width: 80px;
                                        height: 80px;
                                        border-radius: 50%;
                                        background: ${getScoreColor(getSwingTradeScore(crypto).percentage)};
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        margin: 0 auto 8px;
                                        font-size: 1.5rem;
                                        font-weight: 800;
                                        color: white;
                                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
                                    ">${getSwingTradeScore(crypto).percentage}%</div>
                                    <div style="font-size: 0.9rem; color: #a0a0a0;">Score Total</div>
                                </div>
                            </div>
                            
                            <div style="
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                                gap: 15px;
                            ">
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 15px;
                                    padding: 20px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                        <i class="fas fa-chart-bar" style="color: #00d4aa; font-size: 1.2rem;"></i>
                                        <span style="font-weight: 600; color: white;">Volume</span>
                                    </div>
                                    <div style="font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 10px;">${getSwingTradeScore(crypto).volume}/25</div>
                                    <div style="
                                        width: 100%;
                                        height: 8px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 4px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).volume/25)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #00d4aa, #00f5d4);
                                            border-radius: 4px;
                                        "></div>
                                    </div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 15px;
                                    padding: 20px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                        <i class="fas fa-rocket" style="color: #ff6b6b; font-size: 1.2rem;"></i>
                                        <span style="font-weight: 600; color: white;">Momentum</span>
                                    </div>
                                    <div style="font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 10px;">${getSwingTradeScore(crypto).momentum}/30</div>
                                    <div style="
                                        width: 100%;
                                        height: 8px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 4px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).momentum/30)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
                                            border-radius: 4px;
                                        "></div>
                                    </div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 15px;
                                    padding: 20px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                        <i class="fas fa-chart-pie" style="color: #ffd700; font-size: 1.2rem;"></i>
                                        <span style="font-weight: 600; color: white;">Market Cap</span>
                                    </div>
                                    <div style="font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 10px;">${getSwingTradeScore(crypto).marketCap}/20</div>
                                    <div style="
                                        width: 100%;
                                        height: 8px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 4px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).marketCap/20)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #ffd700, #ffed4e);
                                            border-radius: 4px;
                                        "></div>
                                    </div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 15px;
                                    padding: 20px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                        <i class="fas fa-bolt" style="color: #9c27b0; font-size: 1.2rem;"></i>
                                        <span style="font-weight: 600; color: white;">Volatilidade</span>
                                    </div>
                                    <div style="font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 10px;">${getSwingTradeScore(crypto).volatility}/15</div>
                                    <div style="
                                        width: 100%;
                                        height: 8px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 4px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).volatility/15)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #9c27b0, #ba68c8);
                                            border-radius: 4px;
                                        "></div>
                                    </div>
                                </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 15px;
                                    padding: 20px;
                                ">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                        <i class="fas fa-shield-alt" style="color: #4caf50; font-size: 1.2rem;"></i>
                                        <span style="font-weight: 600; color: white;">Estabilidade</span>
                                    </div>
                                    <div style="font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 10px;">${getSwingTradeScore(crypto).stability}/10</div>
                                    <div style="
                                        width: 100%;
                                        height: 8px;
                                        background: rgba(255, 255, 255, 0.1);
                                        border-radius: 4px;
                                        overflow: hidden;
                                    ">
                                        <div style="
                                            width: ${(getSwingTradeScore(crypto).stability/10)*100}%;
                                            height: 100%;
                                            background: linear-gradient(90deg, #4caf50, #66bb6a);
                                            border-radius: 4px;
                                        "></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        <!-- Informações Técnicas -->
                        <div style="
                            background: rgba(255, 255, 255, 0.02);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 20px;
                            padding: 25px;
                        ">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                                <div style="
                                    width: 40px;
                                    height: 40px;
                                    background: linear-gradient(135deg, #2196f3, #42a5f5);
                                    border-radius: 12px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-size: 1.2rem;
                                    color: white;
                                ">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <h3 style="
                                    font-size: 1.5rem;
                                    font-weight: 700;
                                    margin: 0;
                                    background: linear-gradient(135deg, #ffffff, #e0e0e0);
                                    -webkit-background-clip: text;
                                    -webkit-text-fill-color: transparent;
                                    background-clip: text;
                                ">Informações Técnicas</h3>
                                    </div>
                            
                            <div style="
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                                gap: 20px;
                            ">
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 5px;">Preço Máximo Histórico</div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white;">${formatCurrency(crypto.ath || 0)}</div>
                                    </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 5px;">Data do ATH</div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white;">${crypto.ath_date ? new Date(crypto.ath_date).toLocaleDateString('pt-BR') : 'N/A'}</div>
                                    </div>
                                
                                <div style="
                                    background: rgba(255, 255, 255, 0.03);
                                    border: 1px solid rgba(255, 255, 255, 0.1);
                                    border-radius: 12px;
                                    padding: 15px;
                                ">
                                    <div style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 5px;">Fornecimento Total</div>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: white;">${formatNumber(crypto.total_supply || 0)} ${crypto.symbol.toUpperCase()}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            modal.style.display = 'block';
            
            // Carregar gráfico do TradingView após o modal ser exibido
            setTimeout(() => {
                loadTradingViewChart(crypto.id, '4h');
            }, 100);
        }
        
        // Função para carregar gráfico do TradingView
        function loadTradingViewChart(crypto) {
            const chartContainer = document.getElementById(`tradingview-chart-${crypto.id}`);
            if (!chartContainer) return;
            
            // Limpar container anterior
            chartContainer.innerHTML = '';
            
            // Criar widget do TradingView
            new TradingView.widget({
                "width": "100%",
                "height": "100%",
                "symbol": `${crypto.symbol.toUpperCase()}USD`,
                "interval": "D",
                "timezone": "America/Sao_Paulo",
                "theme": "dark",
                "style": "1",
                "locale": "pt_BR",
                "toolbar_bg": "#f1f3f6",
                "enable_publishing": false,
                "hide_top_toolbar": false,
                "hide_legend": false,
                "save_image": false,
                "container_id": `tradingview-chart-${crypto.id}`,
                "studies": [
                    "RSI@tv-basicstudies",
                    "MACD@tv-basicstudies",
                    "BB@tv-basicstudies"
                ],
                "show_popup_button": true,
                "popup_width": "1000",
                "popup_height": "650",
                "custom_css_url": "",
                "disabled_features": [
                    "use_localstorage_for_settings"
                ],
                "enabled_features": [
                    "study_templates"
                ],
                "overrides": {
                    "mainSeriesProperties.candleStyle.upColor": "#00d4aa",
                    "mainSeriesProperties.candleStyle.downColor": "#ff6b6b",
                    "mainSeriesProperties.candleStyle.wickUpColor": "#00d4aa",
                    "mainSeriesProperties.candleStyle.wickDownColor": "#ff6b6b"
                }
            });
        }
        
        function closeModal() {
            const modal = document.getElementById('crypto-modal');
            modal.style.display = 'none';
            
            // Limpar gráficos do TradingView para evitar conflitos
            clearTradingViewCharts();
        }
        
        // Função para limpar gráficos do TradingView
        function clearTradingViewCharts() {
            const chartContainers = document.querySelectorAll('[id^="tradingview-chart-"]');
            chartContainers.forEach(container => {
                container.innerHTML = '';
            });
        }
        
        // Função para abrir gráfico do TradingView em tela cheia
        function openTradingViewFullscreen(symbol) {
            const url = `https://www.tradingview.com/symbols/${symbol}/`;
            window.open(url, '_blank', 'width=1200,height=800,scrollbars=yes,resizable=yes');
        }
        
        function setupAutoUpdate() {
            // Usar intervalo diferente para mobile e desktop
            const mainInterval = isMobileData ? MOBILE_UPDATE_INTERVAL : UPDATE_INTERVAL;
            const intervalText = isMobileData ? '5 minutos' : '30 segundos';
            
            // Atualização principal
            setInterval(() => {
                if (isMobileData) {
                    // Para mobile, usar API da Binance
                    loadCryptoDataFromBinance();
                } else {
                    // Para desktop/WiFi, usar API da CoinGecko
                    loadCryptoData();
                }
            }, mainInterval);
            
            // Atualização em tempo real para todos os dispositivos
            const realTimeInterval = isMobile ? MOBILE_REAL_TIME_INTERVAL : DESKTOP_REAL_TIME_INTERVAL;
            realTimeUpdateInterval = setInterval(() => {
                updateRealTimePrices();
            }, realTimeInterval);
            
            // Mostrar indicador de tempo real para todos
            if (realTimeIndicator) {
                realTimeIndicator.style.display = 'flex';
            }
            
            console.log(`🔄 Atualizações configuradas: ${intervalText} para dados principais, ${realTimeInterval/1000}s para tempo real`);
        }
        
        // Funções utilitárias
        function formatCurrency(amount) {
            if (amount === null || amount === undefined) return 'N/A';
            
            const currency = getCurrentCurrency();
            const symbol = currency === 'BRL' ? 'R$' : '$';
            
            if (amount >= 1e12) {
                return `${symbol}${(amount / 1e12).toFixed(2)}T`;
            } else if (amount >= 1e9) {
                return `${symbol}${(amount / 1e9).toFixed(2)}B`;
            } else if (amount >= 1e6) {
                return `${symbol}${(amount / 1e6).toFixed(2)}M`;
            } else if (amount >= 1e3) {
                return `${symbol}${(amount / 1e3).toFixed(2)}K`;
            } else {
                return `${symbol}${amount.toFixed(2)}`;
            }
        }
        
        function formatNumber(num) {
            if (num === null || num === undefined) return 'N/A';
            
            if (num >= 1e12) {
                return `${(num / 1e12).toFixed(2)}T`;
            } else if (num >= 1e9) {
                return `${(num / 1e9).toFixed(2)}B`;
            } else if (num >= 1e6) {
                return `${(num / 1e6).toFixed(2)}M`;
            } else if (num >= 1e3) {
                return `${(num / 1e3).toFixed(2)}K`;
            } else {
                return num.toLocaleString();
            }
        }
        
        // Função para formatar percentuais de forma segura
        function formatPercentage(value) {
            if (value === null || value === undefined || isNaN(value)) {
                return '0.00%';
            }
            const numValue = parseFloat(value) || 0;
            return `${numValue >= 0 ? '+' : ''}${numValue.toFixed(2)}%`;
        }
        
        // 🚀 Função para garantir que os dados de cripto sejam seguros (COM LOGS DE DEBUG)
        function sanitizeCryptoData(crypto) {
            const sanitized = {
                ...crypto,
                price_change_percentage_24h: crypto.price_change_percentage_24h || 0,
                price_change_percentage_7d_in_currency: crypto.price_change_percentage_7d_in_currency || 0,
                current_price: crypto.current_price || 0,
                market_cap: crypto.market_cap || 0,
                total_volume: crypto.total_volume || 0,
                circulating_supply: crypto.circulating_supply || 0
            };
            
            // 🚀 LOG DE DEBUG: Verificar dados sanitizados para criptos com momentum alto
            if (Math.abs(sanitized.price_change_percentage_24h) > 15 || 
                Math.abs(sanitized.price_change_percentage_7d_in_currency) > 25) {
                console.log(`🚀 Dados sanitizados para ${crypto.name}:`, {
                    price_change_24h: sanitized.price_change_percentage_24h,
                    price_change_7d: sanitized.price_change_percentage_7d_in_currency,
                    price_change_30d: sanitized.price_change_percentage_30d_in_currency,
                    current_price: sanitized.current_price,
                    market_cap: sanitized.market_cap,
                    total_volume: sanitized.total_volume
                });
            }
            
            return sanitized;
        }
        
        // Currency management functions
        let currentCurrency = 'BRL'; // Default to BRL
        
        function getCurrentCurrency() {
            return currentCurrency;
        }
        
        function setCurrency(currency) {
            currentCurrency = currency;
            localStorage.setItem('selectedCurrency', currency);
            updateCurrencyDisplay();
            refreshAllPrices();
        }
        
        function toggleCurrency() {
            const newCurrency = currentCurrency === 'BRL' ? 'USD' : 'BRL';
            setCurrency(newCurrency);
        }
        
        function updateCurrencyDisplay() {
            const currencySymbol = document.querySelector('.currency-symbol');
            if (currencySymbol) {
                currencySymbol.textContent = currentCurrency === 'BRL' ? 'R$' : '$';
            }
        }
        
        function loadSavedCurrency() {
            const saved = localStorage.getItem('selectedCurrency');
            if (saved && (saved === 'BRL' || saved === 'USD')) {
                currentCurrency = saved;
            }
            updateCurrencyDisplay();
        }
        
        function refreshAllPrices() {
            // Refresh all price displays
            if (cryptoData && cryptoData.length > 0) {
                displayCryptoData();
            }
        }
        
        // Function to get the appropriate price based on selected currency
        function getCurrentPrice(crypto) {
            if (!crypto) return 0;
            
            if (currentCurrency === 'BRL') {
                return crypto.current_price_brl || crypto.current_price * 5.5; // Fallback conversion
            } else {
                return crypto.current_price_usd || crypto.current_price;
            }
        }
        
        // Function to get the appropriate market cap based on selected currency
        function getCurrentMarketCap(crypto) {
            if (!crypto) return 0;
            
            if (currentCurrency === 'BRL') {
                return crypto.market_cap_brl || crypto.market_cap * 5.5; // Fallback conversion
            } else {
                return crypto.market_cap_usd || crypto.market_cap;
            }
        }
        
        // Function to get the appropriate volume based on selected currency
        function getCurrentVolume(crypto) {
            if (!crypto) return 0;
            
            if (currentCurrency === 'BRL') {
                return crypto.total_volume_brl || crypto.total_volume * 5.5; // Fallback conversion
            } else {
                return crypto.total_volume_usd || crypto.total_volume;
            }
        }
        
        // Function to fetch data for both currencies
        async function fetchDataForBothCurrencies() {
            try {
                const [usdResponse, brlResponse] = await Promise.all([
                    fetch(`${COINGECKO_API_BASE}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false&locale=en&x_cg_demo_api_key=${COINGECKO_API_KEY}`),
                    fetch(`${COINGECKO_API_BASE}/coins/markets?vs_currency=brl&order=market_cap_desc&per_page=100&page=1&sparkline=false&locale=en&x_cg_demo_api_key=${COINGECKO_API_KEY}`)
                ]);
                
                if (!usdResponse.ok || !brlResponse.ok) {
                    throw new Error('Failed to fetch data for both currencies');
                }
                
                const [usdData, brlData] = await Promise.all([
                    usdResponse.json(),
                    brlResponse.json()
                ]);
                
                // Merge the data to include both USD and BRL prices
                const mergedData = usdData.map(usdCoin => {
                    const brlCoin = brlData.find(b => b.id === usdCoin.id);
                    return {
                        ...usdCoin,
                        current_price_usd: usdCoin.current_price,
                        current_price_brl: brlCoin ? brlCoin.current_price : usdCoin.current_price * 5.5, // Fallback conversion
                        market_cap_usd: usdCoin.market_cap,
                        market_cap_brl: brlCoin ? brlCoin.market_cap : usdCoin.market_cap * 5.5,
                        total_volume_usd: usdCoin.total_volume,
                        total_volume_brl: brlCoin ? brlCoin.total_volume : usdCoin.total_volume * 5.5
                    };
                });
                
                return mergedData;
            } catch (error) {
                console.error('Error fetching data for both currencies:', error);
                return null;
            }
        }
        
        function showLoading() {
            loadingElement.style.display = 'block';
            cryptoTableBody.innerHTML = '';
        }
        
        function hideLoading() {
            loadingElement.style.display = 'none';
        }
        
        function showError() {
            errorElement.style.display = 'block';
        }
        
        function hideError() {
            errorElement.style.display = 'none';
        }
        
        // Função para recarregar dados (usada no botão de erro)
        window.loadCryptoData = loadCryptoData;
        window.showCryptoDetails = showCryptoDetails;
        window.closeModal = closeModal;
        
        // Funções auxiliares para Swing Trade
        function getScoreColor(percentage) {
            if (percentage >= 80) return '#00d4aa'; // Verde para scores altos
            if (percentage >= 70) return '#0099cc'; // Azul para scores bons
            if (percentage >= 60) return '#ffa500'; // Laranja para scores médios
            if (percentage >= 50) return '#ff6b35'; // Laranja escuro para scores baixos
            return '#ff6b6b'; // Vermelho para scores muito baixos
        }
        
        function getScoreColorClass(percentage) {
            if (percentage >= 80) return 'excellent'; // Verde para scores altos
            if (percentage >= 70) return 'good'; // Azul para scores bons
            if (percentage >= 60) return 'average'; // Laranja para scores médios
            if (percentage >= 50) return 'below-average'; // Laranja escuro para scores baixos
            return 'poor'; // Vermelho para scores muito baixos
        }
        
        function showSwingTradeInfo() {
            // Criar banner informativo sobre swing trade
            let banner = document.getElementById('swing-trade-banner');
            if (!banner) {
                banner = document.createElement('div');
                banner.id = 'swing-trade-banner';
                banner.className = 'swing-trade-banner';
                banner.innerHTML = `
                    <!-- Elementos decorativos -->
                    <div class="swing-trade-decoration decoration-1"></div>
                    <div class="swing-trade-decoration decoration-2"></div>
                    <div class="swing-trade-decoration decoration-3"></div>
                    
                    <!-- Indicador de status -->
                    <div class="swing-trade-status">
                        <i class="fas fa-check-circle"></i>
                        <span>Sistema de Swing Trade Ativo - Analisando ${filteredData.length}+ criptomoedas em tempo real</span>
                    </div>
                    
                    <div class="banner-header">
                        <i class="fas fa-brain"></i>
                        <h3>🎯 Swing Trade Inteligente</h3>
                    </div>
                    
                    <div class="banner-description">
                        <p>Descubra as melhores oportunidades de swing trade com nossa análise inteligente baseada em algoritmos avançados e machine learning:</p>
                        <ul>
                            <li><span>📊 Volume e Liquidez do Mercado</span></li>
                            <li><span>🚀 Momentum e Tendência de Preços</span></li>
                            <li><span>💰 Capitalização de Mercado</span></li>
                            <li><span>⚡ Volatilidade Controlada</span></li>
                            <li><span>🛡️ Estabilidade do Ranking</span></li>
                        </ul>
                    </div>
                    
                    <div class="banner-stats">
                        <div class="stat">
                            <span class="stat-number">${filteredData.length}</span>
                            <span class="stat-label">Moedas Selecionadas</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">${Math.round(filteredData.reduce((acc, crypto) => acc + getSwingTradeScore(crypto).percentage, 0) / filteredData.length)}%</span>
                            <span class="stat-label">Score Médio</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">🎯</span>
                            <span class="stat-label">Ordenado por Score</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">AI</span>
                            <span class="stat-label">Análise Inteligente</span>
                        </div>
                    </div>
                    
                    <!-- Botão de ação -->
                    <div class="swing-trade-action">
                        <button class="swing-trade-btn-large" onclick="scrollToTable()">
                            <i class="fas fa-rocket"></i>
                            <span>Ver Resultados da Análise</span>
                        </button>
                    </div>
                `;
                
                // Inserir antes da tabela
                const tableContainer = document.querySelector('.crypto-table-container');
                tableContainer.parentNode.insertBefore(banner, tableContainer);
            }
            banner.style.display = 'block';
            
            // Mostrar indicador flutuante
            showSwingTradeFloatingIndicator();
        }
        
        function hideSwingTradeInfo() {
            const banner = document.getElementById('swing-trade-banner');
            if (banner) {
                banner.style.display = 'none';
            }
            
            // Ocultar indicador flutuante
            hideSwingTradeFloatingIndicator();
        }
        
        // 🚀 Função para mostrar informações de análise inteligente (COM LOGS DE DEBUG)
        function showAnalysisInfo() {
            console.log(`🚀 Mostrando informações de análise para filtro: ${currentFilter}`);
            
            // Otimização: Usar requestAnimationFrame para não bloquear a UI
            requestAnimationFrame(() => {
                // Criar banner informativo sobre análise inteligente
                let banner = document.getElementById('analysis-info');
                if (!banner) {
                    banner = document.createElement('div');
                    banner.id = 'analysis-info';
                    banner.className = 'analysis-info-banner';
                    banner.innerHTML = `
                        <!-- Elementos decorativos -->
                        <div class="analysis-decoration decoration-1"></div>
                        <div class="analysis-decoration decoration-2"></div>
                        <div class="analysis-decoration decoration-3"></div>
                        
                        <!-- Indicador de status -->
                        <div class="analysis-status">
                            <i class="fas fa-check-circle"></i>
                            <span>Sistema de Análise Inteligente Ativo - ${getCurrentFilterDisplayName()}</span>
                        </div>
                        
                        <div class="banner-header">
                            <i class="fas fa-brain"></i>
                            <h3>🧠 Análise Inteligente de Mercado</h3>
                        </div>
                        
                        <div class="banner-description">
                            <p>Descubra as melhores oportunidades de compra com nossa análise inteligente baseada em múltiplos indicadores técnicos:</p>
                            <ul>
                                <li><span>📊 Momentum e Tendência de Preços</span></li>
                                <li><span>📈 Volume e Liquidez do Mercado</span></li>
                                <li><span>🎯 Força da Tendência</span></li>
                                <li><span>⚖️ Análise de Risco</span></li>
                                <li><span>🌍 Posição no Mercado Global</span></li>
                            </ul>
                        </div>
                        
                        <div class="banner-stats">
                            <div class="stat">
                                <span class="stat-number">${filteredData.length}</span>
                                <span class="stat-label">Moedas Selecionadas</span>
                            </div>
                            <div class="stat>
                                <span class="stat-number">${getAverageAnalysisScore()}%</span>
                                <span class="stat-label">Score Médio</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">${getCurrentFilterDisplayName()}</span>
                                <span class="stat-label">Categoria</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">AI</span>
                                <span class="stat-label">Análise Inteligente</span>
                            </div>
                        </div>
                        
                        <!-- Botão de ação -->
                        <div class="analysis-action">
                            <button class="analysis-btn-large" onclick="scrollToTable()">
                                <i class="fas fa-chart-line"></i>
                                <span>Ver Resultados da Análise</span>
                            </button>
                        </div>
                    `;
                    
                    // Inserir antes da tabela
                    const tableContainer = document.querySelector('.crypto-table-container');
                    if (tableContainer && tableContainer.parentNode) {
                        tableContainer.parentNode.insertBefore(banner, tableContainer);
                        console.log(`🚀 Banner de análise inserido com sucesso`);
                    } else {
                        console.warn(`⚠️ Container da tabela não encontrado`);
                    }
                }
                
                banner.style.display = 'block';
                console.log(`🚀 Banner de análise exibido`);
            });
        }
        
        // Função para ocultar informações de análise inteligente
        function hideAnalysisInfo() {
            const infoElement = document.getElementById('analysis-info');
            if (infoElement) {
                infoElement.style.display = 'none';
            }
        }
        
        // 🚀 Função para obter o nome de exibição do filtro atual (COM LOGS DE DEBUG)
        function getCurrentFilterDisplayName() {
            console.log(`🚀 Obtendo nome de exibição para filtro: ${currentFilter}`);
            
            let displayName;
            switch (currentFilter) {
                case 'strong-buy': 
                    displayName = '🔥 ALTA FORTE';
                    break;
                case 'medium-buy': 
                    displayName = '📈 ALTA MÉDIA';
                    break;
                case 'neutral': 
                    displayName = '➡️ NEUTRO';
                    break;
                case 'medium-sell': 
                    displayName = '📉 BAIXA MÉDIA';
                    break;
                case 'strong-sell': 
                    displayName = '💥 BAIXA FORTE';
                    break;
                default: 
                    displayName = 'Análise';
                    break;
            }
            
            console.log(`🚀 Nome de exibição: ${displayName}`);
            return displayName;
        }
        
        // 🚀 Função para calcular o score médio de análise (COM LOGS DE DEBUG)
        function getAverageAnalysisScore() {
            if (!filteredData || filteredData.length === 0) return 0;
            
            console.log(`🚀 Calculando score médio para ${filteredData.length} criptos`);
            
            // Otimização: Calcular apenas se necessário
            if (filteredData.length > 100) {
                // Para grandes volumes, usar amostragem
                const sampleSize = Math.min(50, Math.floor(filteredData.length * 0.1));
                const sample = filteredData.slice(0, sampleSize);
                const totalScore = sample.reduce((acc, crypto) => {
                    return acc + getCachedAnalysis(crypto, 'buy').total;
                }, 0);
                const averageScore = Math.round(totalScore / sample.length);
                console.log(`🚀 Score médio (amostra): ${averageScore}`);
                return averageScore;
            } else {
                // Para volumes menores, calcular tudo
                const totalScore = filteredData.reduce((acc, crypto) => {
                    return acc + getCachedAnalysis(crypto, 'buy').total;
                }, 0);
                const averageScore = Math.round(totalScore / filteredData.length);
                console.log(`🚀 Score médio (completo): ${averageScore}`);
                return averageScore;
            }
        }
        
        // Função para rolar até a tabela
        function scrollToTable() {
            const tableContainer = document.querySelector('.crypto-table-container');
            if (tableContainer) {
                tableContainer.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }
        
        // Função para mostrar indicador flutuante do Swing Trade
        function showSwingTradeFloatingIndicator() {
            let indicator = document.getElementById('swing-trade-floating-indicator');
            if (!indicator) {
                indicator = document.createElement('div');
                indicator.id = 'swing-trade-floating-indicator';
                indicator.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
                    color: white;
                    padding: 15px 20px;
                    border-radius: var(--border-radius-xl);
                    box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    font-weight: 600;
                    font-size: 0.95rem;
                    border: 2px solid rgba(255, 255, 255, 0.2);
                    backdrop-filter: blur(15px);
                    animation: slideInRight 0.5s ease;
                `;
                
                indicator.innerHTML = `
                    <i class="fas fa-brain" style="font-size: 1.2rem; animation: pulse 2s infinite;"></i>
                    <span>🎯 Modo Swing Trade Ativo</span>
                `;
                
                document.body.appendChild(indicator);
            }
            
            indicator.style.display = 'flex';
        }
        
        // Função para ocultar indicador flutuante do Swing Trade
        function hideSwingTradeFloatingIndicator() {
            const indicator = document.getElementById('swing-trade-floating-indicator');
            if (indicator) {
                indicator.style.display = 'none';
            }
        }
        

        
        // Função para mostrar carregamento do Swing Trade
        function showSwingTradeLoading() {
            // Criar overlay de carregamento
            let loadingOverlay = document.getElementById('swing-trade-loading');
            if (!loadingOverlay) {
                loadingOverlay = document.createElement('div');
                loadingOverlay.id = 'swing-trade-loading';
                loadingOverlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    backdrop-filter: blur(10px);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 9999;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                `;
                
                loadingOverlay.innerHTML = `
                    <div style="text-align: center; color: white;">
                        <div style="width: 80px; height: 80px; border: 4px solid rgba(245, 158, 11, 0.3); border-top: 4px solid var(--accent-color); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                        <h3 style="font-size: 1.5rem; margin-bottom: 10px; background: linear-gradient(135deg, var(--accent-color), var(--primary-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Analisando Criptomoedas...</h3>
                        <p style="color: var(--text-secondary); font-size: 1.1rem;">Calculando scores de Swing Trade com IA</p>
                    </div>
                `;
                
                document.body.appendChild(loadingOverlay);
            }
            
            // Mostrar overlay
            loadingOverlay.style.opacity = '1';
            
            // Remover após 2 segundos
            setTimeout(() => {
                loadingOverlay.style.opacity = '0';
                setTimeout(() => {
                    if (loadingOverlay.parentNode) {
                        loadingOverlay.parentNode.removeChild(loadingOverlay);
                    }
                }, 300);
            }, 2000);
        }
        
        // ===== FUNÇÕES DE ATUALIZAÇÃO EM TEMPO REAL =====
        
        function savePreviousPrices() {
            previousPrices.clear();
            cryptoData.forEach(crypto => {
                previousPrices.set(crypto.id, {
                    price: crypto.current_price,
                    change24h: crypto.price_change_percentage_24h,
                    change7d: crypto.price_change_percentage_7d_in_currency,
                    volume: crypto.total_volume,
                    marketCap: crypto.market_cap
                });
            });
        }
        
                // 🚀 FUNÇÃO OTIMIZADA: Atualizar Preços em Tempo Real (COM THROTTLING)
        async function updateRealTimePrices() {
            if (isUpdating) return; // Evitar conflitos com atualização principal
            
            // 🚀 NOVA OTIMIZAÇÃO: Verificar se deve atualizar (throttling)
            if (!shouldUpdate()) {
                return;
            }
            
            // Verificar se há conexão com internet
            if (!navigator.onLine) {
                console.log('📡 Sem conexão com internet - pulando atualização em tempo real');
                return;
            }
            
            // Sistema de pausa automática após muitos erros
            if (!window.realTimeErrorCount) window.realTimeErrorCount = 0;
            if (!window.lastRealTimeSuccess) window.lastRealTimeSuccess = Date.now();
            
            try {
                // 🚀 OTIMIZAÇÃO: Buscar apenas dados essenciais para atualização rápida
                const response = await makeRequest(`${COINGECKO_API_BASE}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false&price_change_percentage=24h,7d`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const newData = await response.json();
                    
                    // 🚀 NOVA OTIMIZAÇÃO: Filtrar apenas mudanças significativas
                    const significantChanges = optimizePriceUpdates(cryptoData, newData);
                    
                    if (significantChanges.length > 0) {
                        // 🚀 NOVA OTIMIZAÇÃO: Usar throttling para atualização de preços
                        throttlePriceUpdate(() => {
                            updatePricesInRealTime(significantChanges);
                        });
                    }
                    
                    // Resetar contador de erros em caso de sucesso
                    window.realTimeErrorCount = 0;
                    window.lastRealTimeSuccess = Date.now();
                }
            } catch (error) {
                window.realTimeErrorCount++;
                
                // Pausar atualizações se houver muitos erros consecutivos
                if (window.realTimeErrorCount >= 5) {
                    console.log('⏸️ Muitos erros consecutivos - pausando atualizações em tempo real por 2 minutos');
                    stopRealTimeUpdates();
                    
                    // Mostrar indicador de pausa
                    const realTimeIndicator = getCachedElement('#real-time-indicator');
                    if (realTimeIndicator) {
                        realTimeIndicator.innerHTML = `
                            <i class="fas fa-pause" style="color: #ff6b6b;"></i>
                            <span>Atualizações pausadas - Retomando em 2min</span>
                        `;
                        realTimeIndicator.style.display = 'flex';
                    }
                    
                    // Retomar automaticamente após 2 minutos
                    setTimeout(() => {
                        console.log('▶️ Retomando atualizações em tempo real...');
                        resumeRealTimeUpdates();
                        window.realTimeErrorCount = 0;
                        
                        // Restaurar indicador normal
                        if (realTimeIndicator) {
                            realTimeIndicator.innerHTML = `
                                <i class="fas fa-sync-alt fa-spin"></i>
                                <span>Atualização em Tempo Real</span>
                            `;
                        }
                    }, 120000);
                    
                    return;
                }
                
                // Reduzir logs de erro para evitar spam no console
                if (!window.lastRealTimeError || Date.now() - window.lastRealTimeError > 30000) {
                    console.log(`⚠️ Erro na atualização em tempo real (${window.realTimeErrorCount}/5 - será silenciado por 30s):`, error.message);
                    window.lastRealTimeError = Date.now();
                }
            }
        }
        // 🚀 FUNÇÃO OTIMIZADA: Atualizar Preços em Tempo Real (COM CACHE DE DOM E BATCHING)
        function updatePricesInRealTime(newData) {
            // 🚀 NOVA OTIMIZAÇÃO: Processar em lotes para não bloquear a UI
            const batchSize = window.innerWidth <= 768 ? 5 : 10; // Lotes menores em mobile
            let processed = 0;
            
            // 🚀 NOVA OTIMIZAÇÃO: Coletar todas as mudanças antes de atualizar DOM
            const domUpdates = [];
            
            function processBatch() {
                const end = Math.min(processed + batchSize, newData.length);
                
                for (let i = processed; i < end; i++) {
                    const newCrypto = newData[i];
                    const oldCrypto = cryptoData.find(c => c.id === newCrypto.id);
                    if (oldCrypto) {
                        const oldPrice = oldCrypto.current_price;
                        const newPrice = newCrypto.current_price;
                        
                        // Atualizar dados
                        oldCrypto.current_price = newPrice;
                        oldCrypto.price_change_percentage_24h = newCrypto.price_change_percentage_24h;
                        oldCrypto.price_change_percentage_7d_in_currency = newCrypto.price_change_percentage_7d_in_currency;
                        oldCrypto.total_volume = newCrypto.total_volume;
                        oldCrypto.market_cap = newCrypto.market_cap;
                        
                        // Invalidar cache de análise para esta crypto
                        invalidateCryptoAnalysisCache(newCrypto.id);
                        
                        // Coletar atualização de DOM para fazer em lote
                        domUpdates.push({ crypto: oldCrypto, oldPrice, newPrice });
                    }
                }
                
                processed = end;
                
                if (processed < newData.length) {
                    // Processar próximo lote em background
                    requestAnimationFrame(processBatch);
                } else {
                    // 🚀 NOVA OTIMIZAÇÃO: Aplicar todas as mudanças de DOM de uma vez
                    requestAnimationFrame(() => {
                        domUpdates.forEach(({ crypto, oldPrice, newPrice }) => {
                            updatePriceDisplay(crypto, oldPrice, newPrice);
                        });
                        
                        // Finalizar atualização
                        updateGlobalStatsInRealTime(newData);
                    });
                }
            }
            
            // Iniciar processamento em lotes
            processBatch();
        }
        
        function updatePriceDisplay(crypto, oldPrice, newPrice) {
            const row = document.querySelector(`tr[onclick*="${crypto.id}"]`);
            if (!row) return;
            
            // Atualizar preço
            const priceCell = row.querySelector('.price');
            if (priceCell) {
                const priceChange = newPrice - oldPrice;
                const isPositive = priceChange >= 0;
                
                // Adicionar classe de animação
                priceCell.classList.add('price-updating');
                
                // Atualizar valor
                priceCell.textContent = formatCurrency(newPrice);
                
                // Adicionar indicador visual de mudança
                if (Math.abs(priceChange) > 0.01) { // Mudança maior que 1 centavo
                    priceCell.classList.add(isPositive ? 'price-up' : 'price-down');
                    
                    // Remover classes após animação
                    setTimeout(() => {
                        priceCell.classList.remove('price-up', 'price-down', 'price-updating');
                    }, 2000);
                }
            }
            
            // Atualizar mudanças percentuais
            const change24hCell = row.querySelector('td:nth-child(4) .percentage');
            const change7dCell = row.querySelector('td:nth-child(5) .percentage');
            
            if (change24hCell) {
                const change24h = crypto.price_change_percentage_24h;
                change24hCell.textContent = `${change24h >= 0 ? '+' : ''}${change24h.toFixed(2)}%`;
                change24hCell.className = `percentage ${change24h >= 0 ? 'positive' : 'negative'}`;
            }
            
            if (change7dCell) {
                const change7d = crypto.price_change_percentage_7d_in_currency;
                change7dCell.textContent = `${change7d >= 0 ? '+' : ''}${change7d.toFixed(2)}%`;
                change7dCell.className = `percentage ${change7d >= 0 ? 'positive' : 'negative'}`;
            }
            
            // Atualizar volume e market cap
            const volumeCell = row.querySelector('.volume');
            const marketCapCell = row.querySelector('.market-cap');
            
            if (volumeCell) {
                volumeCell.textContent = formatCurrency(crypto.total_volume);
            }
            
            if (marketCapCell) {
                marketCapCell.textContent = formatCurrency(crypto.market_cap);
            }
        }
        
        function updateGlobalStatsInRealTime(newData) {
            // Calcular novos totais baseados na moeda atual
            const totalMarketCap = newData.reduce((sum, crypto) => sum + getCurrentMarketCap(crypto), 0);
            const totalVolume = newData.reduce((sum, crypto) => sum + getCurrentVolume(crypto), 0);
            
            // Atualizar elementos do header
            const marketCapElement = document.getElementById('total-market-cap');
            const volumeElement = document.getElementById('total-volume');
            
            if (marketCapElement) {
                marketCapElement.textContent = formatCurrency(totalMarketCap);
            }
            
            if (volumeElement) {
                volumeElement.textContent = formatCurrency(totalVolume);
            }
        }
        
        // Função para parar atualizações em tempo real (útil para economizar recursos)
        function stopRealTimeUpdates() {
            if (realTimeUpdateInterval) {
                clearInterval(realTimeUpdateInterval);
                realTimeUpdateInterval = null;
                console.log('Atualizações em tempo real paradas');
                
                // Ocultar indicador
                if (realTimeIndicator) {
                    realTimeIndicator.style.display = 'none';
                }
            }
        }
        
        // Função para retomar atualizações em tempo real
        function resumeRealTimeUpdates() {
            if (!realTimeUpdateInterval) {
                const realTimeInterval = isMobile ? MOBILE_REAL_TIME_INTERVAL : DESKTOP_REAL_TIME_INTERVAL;
                realTimeUpdateInterval = setInterval(() => {
                    updateRealTimePrices();
                }, realTimeInterval);
                console.log('Atualizações em tempo real retomadas');
                
                // Mostrar indicador
                if (realTimeIndicator) {
                    realTimeIndicator.style.display = 'flex';
                }
            }
        }
        
        // Adicionar ao objeto window para uso global
        window.stopRealTimeUpdates = stopRealTimeUpdates;
        window.resumeRealTimeUpdates = resumeRealTimeUpdates;
        

        
        // Listener para mudanças na conectividade
        window.addEventListener('online', () => {
            console.log('🌐 Conexão restaurada - retomando atualizações');
            if (window.realTimeErrorCount > 0) {
                window.realTimeErrorCount = 0;
                resumeRealTimeUpdates();
            }
        });
        
        window.addEventListener('offline', () => {
            console.log('📡 Conexão perdida - pausando atualizações');
            stopRealTimeUpdates();
        });
        
        // Função para adicionar indicador de scroll horizontal em mobile
        function addScrollIndicator() {
            if (!isMobile) return;
            
            const tableContainer = document.querySelector('.crypto-table-container');
            if (!tableContainer) return;
            
            // Criar indicador de scroll direito
            const rightScrollHint = document.createElement('div');
            rightScrollHint.className = 'scroll-hint';
            rightScrollHint.innerHTML = `
                <i class="fas fa-chevron-right"></i>
                <span>Deslize →</span>
            `;
            
            // Criar indicador de scroll esquerdo
            const leftScrollHint = document.createElement('div');
            leftScrollHint.className = 'scroll-hint left';
            leftScrollHint.innerHTML = `
                <i class="fas fa-chevron-left"></i>
                <span>← Deslize</span>
            `;
            
            tableContainer.appendChild(rightScrollHint);
            tableContainer.appendChild(leftScrollHint);
            
            // Mostrar indicadores inicialmente
            rightScrollHint.style.display = 'block';
            leftScrollHint.style.display = 'none';
            
            // Adicionar evento de scroll para mostrar/ocultar indicadores
            tableContainer.addEventListener('scroll', function() {
                const scrollLeft = this.scrollLeft;
                const maxScrollLeft = this.scrollWidth - this.clientWidth;
                
                // Mostrar/ocultar indicador direito
                if (scrollLeft >= maxScrollLeft - 10) {
                    rightScrollHint.style.display = 'none';
                } else {
                    rightScrollHint.style.display = 'block';
                }
                
                // Mostrar/ocultar indicador esquerdo
                if (scrollLeft <= 10) {
                    leftScrollHint.style.display = 'none';
                } else {
                    leftScrollHint.style.display = 'block';
                }
            });
            
            // Remover indicadores após alguns segundos de inatividade
            let hideTimeout;
            const hideIndicators = () => {
                hideTimeout = setTimeout(() => {
                    rightScrollHint.style.opacity = '0';
                    leftScrollHint.style.opacity = '0';
                    setTimeout(() => {
                        if (rightScrollHint.parentNode) {
                            rightScrollHint.parentNode.removeChild(rightScrollHint);
                        }
                        if (leftScrollHint.parentNode) {
                            leftScrollHint.parentNode.removeChild(leftScrollHint);
                        }
                    }, 500);
                }, 8000);
            };
            
            // Resetar timeout quando houver scroll
            tableContainer.addEventListener('scroll', () => {
                clearTimeout(hideTimeout);
                rightScrollHint.style.opacity = '1';
                leftScrollHint.style.opacity = '1';
                hideIndicators();
            });
            
            // Iniciar contador para ocultar
            hideIndicators();
        }
        
        // Função para detectar problemas de rede móvel
        function detectMobileNetworkIssues() {
            if (!isMobile) return false;
            
            // Verificar se há conexão com internet
            if (!navigator.onLine) {
                return 'Sem conexão com internet';
            }
            
            // Verificar se é uma conexão móvel lenta
            if ('connection' in navigator) {
                const connection = navigator.connection;
                if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {
                    return 'Conexão móvel muito lenta';
                }
            }
            
            return false;
        }
        
        // Função para detectar se está usando dados móveis
        function detectMobileDataUsage() {
            if (!isMobile) return false;
            
            // Verificar se há conexão com internet
            if (!navigator.onLine) return false;
            
            // Verificar se é uma conexão móvel
            if ('connection' in navigator) {
                const connection = navigator.connection;
                
                // Se não tem WiFi, provavelmente é dados móveis
                if (connection.type === 'cellular') {
                    isMobileData = true;
                    console.log('📱 Dados móveis detectados');
                    
                    // Detectar conexões muito lentas
                    const isVerySlowConnection = connection.rtt > 200 || 
                                               connection.downlink < 1 || 
                                               connection.effectiveType === 'slow-2g';
                    
                    if (isVerySlowConnection) {
                        console.log('⚠️ Conexão muito lenta detectada! Ajustando configurações...');
                        showWarning('⚠️ Conexão muito lenta detectada. Ajustando para melhor performance...');
                        
                        // Ajustar intervalos para conexões muito lentas
                        MOBILE_UPDATE_INTERVAL = 10 * 60 * 1000; // 10 minutos para conexões muito lentas
                        console.log('⏱️ Intervalo de atualização ajustado para 10 minutos (conexão muito lenta)');
                    }
                    
                    return true;
                }
                
                // Verificar se é uma conexão lenta (provavelmente dados móveis)
                if (connection.effectiveType === '2g' || connection.effectiveType === '3g') {
                    isMobileData = true;
                    console.log('📱 Dados móveis lentos detectados');
                    
                    // Ajustar para conexões lentas
                    if (connection.effectiveType === '2g' || connection.effectiveType === 'slow-2g') {
                        MOBILE_UPDATE_INTERVAL = 8 * 60 * 1000; // 8 minutos para 2G
                        console.log('⏱️ Intervalo ajustado para 8 minutos (conexão 2G)');
                    }
                    
                    return true;
                }
            }
            
            // Fallback: se não consegue detectar, assume que é dados móveis em dispositivos móveis
            if (isMobile) {
                isMobileData = true;
                console.log('📱 Assumindo dados móveis (detecção automática)');
                return true;
            }
            
            return false;
        }
        

        
        // Função para mostrar aviso
        function showWarning(message) {
            // Criar aviso temporário
            const warning = document.createElement('div');
            warning.className = 'warning-message';
            warning.innerHTML = `
                <div class="warning-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(warning);
            
            // Remover após 5 segundos
            setTimeout(() => {
                if (warning.parentNode) {
                    warning.parentNode.removeChild(warning);
                }
            }, 5000);
        }
        
        // Função para tentar múltiplas estratégias de carregamento
        async function tryMultipleLoadStrategies() {
            console.log('Tentando múltiplas estratégias de carregamento...');
            console.log('📱 Dados móveis:', isMobileData ? 'Sim' : 'Não');
            
            // Estratégia 1: API principal
            try {
                console.log('🔄 Tentando Estratégia 1: API principal...');
                const response = await makeRequest(`${COINGECKO_API_BASE}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=true&price_change_percentage=24h,7d`, {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // Salvar preços anteriores para comparação
                    savePreviousPrices();
                    
                    cryptoData = data;
                    filteredData = [...cryptoData];
                    
                    // Limpar cache de análises para novos dados
                    clearAnalysisCache();
                    
                    await loadGlobalMarketData();
                    saveToCache(data);
                    displayCryptoData();
                    updateRecommendationsDashboard(); // Atualizar dashboard de recomendações
                    console.log('✅ Estratégia 1 (API principal) funcionou');
                    return true;
                }
            } catch (error) {
                console.log('❌ Estratégia 1 falhou:', error);
            }
            
            // Estratégia 2: API com menos dados (sem sparkline)
            try {
                console.log('🔄 Tentando Estratégia 2: API sem sparkline...');
                const response = await makeRequest(`${COINGECKO_API_BASE}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false&price_change_percentage=24h,7d`, {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // Salvar preços anteriores para comparação
                    savePreviousPrices();
                    
                    cryptoData = data;
                    filteredData = [...cryptoData];
                    
                    // Limpar cache de análises para novos dados
                    clearAnalysisCache();
                    
                    await loadGlobalMarketData();
                    saveToCache(data);
                    displayCryptoData();
                    updateRecommendationsDashboard(); // Atualizar dashboard de recomendações
                    console.log('✅ Estratégia 2 (API sem sparkline) funcionou');
                    return true;
                }
            } catch (error) {
                console.log('❌ Estratégia 2 falhou:', error);
            }
            
                    // MOBILE: Usar apenas CoinGecko com chave API
        if (isMobileData) {
            console.log('📱 MOBILE: Usando exclusivamente CoinGecko com chave API...');
            
            try {
                const success = await loadCryptoDataFromCoinGecko();
                if (success) {
                    console.log('✅ CoinGecko funcionou no mobile!');
                    return true;
                } else {
                    console.log('❌ CoinGecko falhou no mobile');
                    return false;
                }
            } catch (error) {
                console.log('❌ Erro ao carregar dados da CoinGecko no mobile:', error.message);
                return false;
            }
        }
            
            // Estratégia 3: Cache local
            if (loadFromCache()) {
                displayCryptoData();
                updateRecommendationsDashboard(); // Atualizar dashboard de recomendações
                console.log('✅ Estratégia 3 (Cache local) funcionou');
                return true;
            }
            
            // Estratégia 4: Dados mock
            if (loadMockData()) {
                displayCryptoData();
                updateRecommendationsDashboard(); // Atualizar dashboard de recomendações
                console.log('✅ Estratégia 4 (Dados mock) funcionou');
                return true;
            }
            
            console.log('❌ Todas as estratégias falharam');
            return false;
        }
        
        // Função para testar conectividade em dispositivos móveis
        async function testMobileConnectivity() {
            if (!isMobile) return;
            
            showWarning('🔍 Testando conectividade...');
            
            try {
                // Teste 1: Verificar se está online
                if (!navigator.onLine) {
                    showWarning('❌ Sem conexão com internet');
                    return;
                }
                
                // Teste 2: Detectar tipo de conexão
                let connectionInfo = 'Desconhecida';
                if ('connection' in navigator) {
                    const connection = navigator.connection;
                    connectionInfo = `${connection.type || 'Desconhecido'} - ${connection.effectiveType || 'Desconhecido'}`;
                    
                    // Análise detalhada da qualidade da conexão
                    console.log('📊 Análise da conexão:', {
                        type: connection.type,
                        effectiveType: connection.effectiveType,
                        rtt: connection.rtt,
                        downlink: connection.downlink,
                        saveData: connection.saveData
                    });
                }
                showWarning(`📡 Tipo de conexão: ${connectionInfo}`);
                
                // Mostrar qual API será usada
                const apiSource = isMobileData ? 'CoinGecko API (Chave)' : 'CoinGecko API (Chave)';
                const updateInterval = isMobileData ? `${MOBILE_UPDATE_INTERVAL / 60000} minutos` : `${UPDATE_INTERVAL / 1000} segundos`;
                showWarning(`🔌 API: ${apiSource} - Atualizações: ${updateInterval}`);
                
                // Teste 3: Tentar fazer uma requisição simples
                showWarning('🔄 Testando conectividade básica...');
                const startTime = Date.now();
                const testResponse = await makeRequest('https://httpbin.org/get', {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' }
                });
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                
                if (testResponse.ok) {
                    // Análise da qualidade da conexão baseada no tempo de resposta
                    let connectionQuality = 'Excelente';
                    let recommendations = [];
                    
                    if (responseTime > 8000) {
                        connectionQuality = 'Muito Lenta';
                        recommendations.push('Considere usar WiFi');
                        recommendations.push('Verifique cobertura da operadora');
                        if (isMobileData) {
                            MOBILE_UPDATE_INTERVAL = 15 * 60 * 1000; // 15 minutos
                            console.log('⏱️ Intervalo ajustado para 15 minutos (conexão muito lenta)');
                        }
                    } else if (responseTime > 5000) {
                        connectionQuality = 'Lenta';
                        recommendations.push('Conexão pode ser instável');
                        if (isMobileData) {
                            MOBILE_UPDATE_INTERVAL = 10 * 60 * 1000; // 10 minutos
                            console.log('⏱️ Intervalo ajustado para 10 minutos (conexão lenta)');
                        }
                    } else if (responseTime > 3000) {
                        connectionQuality = 'Média';
                        recommendations.push('Conexão aceitável para uso móvel');
                    } else {
                        connectionQuality = 'Boa';
                        recommendations.push('Conexão ideal para atualizações frequentes');
                    }
                    
                    showWarning(`✅ Conectividade: ${connectionQuality} (${responseTime}ms) - ${recommendations[0] || 'OK'}`);
                    
                    // Teste 4: Tentar API da CoinGecko
                    showWarning('🔄 Testando API CoinGecko...');
                    const coingeckoResponse = await makeRequest(`${COINGECKO_API_BASE}/ping`);
                    if (coingeckoResponse.ok) {
                        showWarning('✅ API CoinGecko acessível');
                        
                        // Teste 5: Tentar carregar dados completos
                        showWarning('🔄 Tentando carregar dados completos...');
                        setTimeout(() => {
                            loadCryptoData();
                        }, 1000);
                    } else {
                        showWarning('⚠️ API CoinGecko não acessível');
                        
                        // Tentar estratégia alternativa
                        showWarning('🔄 Tentando estratégia alternativa...');
                        setTimeout(() => {
                            loadCryptoData();
                        }, 1000);
                    }
                } else {
                    showWarning('❌ Problema de conectividade básica');
                }
                
            } catch (error) {
                console.error('Erro no teste de conectividade:', error);
                showWarning(`❌ Erro no teste de conectividade: ${error.message}`);
                
                // Tentar carregar dados mesmo com erro
                showWarning('🔄 Tentando carregar dados com fallback...');
                setTimeout(() => {
                    loadCryptoData();
                }, 1000);
            }
        }
        

        
        // Função para limpar cache e tentar novamente
        function clearCacheAndRetry() {
            try {
                // Limpar localStorage
                if (supportsLocalStorage()) {
                    localStorage.removeItem('cryptoCache');
                    console.log('🗑️ Cache localStorage limpo');
                }
                
                // Limpar cache em memória
                if (window.memoryCache) {
                    delete window.memoryCache;
                    console.log('🗑️ Cache em memória limpo');
                }
                
                // Resetar contadores
                retryCount = 0;
                lastUpdate = 0;
                
                showWarning('🔄 Cache limpo! Tentando carregar dados novamente...');
                
                // Tentar carregar dados novamente
                setTimeout(() => {
                    loadCryptoData();
                }, 1000);
                
            } catch (error) {
                console.error('Erro ao limpar cache:', error);
                showWarning('❌ Erro ao limpar cache');
            }
        }
        
        // Expor função globalmente
        window.clearCacheAndRetry = clearCacheAndRetry;
        
        // Função para debug detalhado da conectividade
        function debugConnectivity() {
            console.log('🔍 === DEBUG DE CONECTIVIDADE ===');
            console.log('📱 Dispositivo móvel:', isMobile);
            console.log('📡 Dados móveis:', isMobileData);
            console.log('🔌 API sendo usada:', isMobileData ? 'Binance API' : 'CoinGecko API');
            console.log('⏱️ Intervalo de atualização:', isMobileData ? '5 minutos' : '30 segundos');
            console.log('🌐 Online:', navigator.onLine);
            console.log('⏱️ Última atualização:', new Date(lastUpdate).toLocaleString());
            console.log('🔄 Tentativas:', retryCount);
            console.log('💾 Dados em cache:', cryptoData.length);
            
            if ('connection' in navigator) {
                const connection = navigator.connection;
                console.log('📶 Tipo de conexão:', connection.type);
                console.log('⚡ Velocidade efetiva:', connection.effectiveType);
                console.log('📊 Downlink:', connection.downlink, 'Mbps');
                console.log('📈 RTT:', connection.rtt, 'ms');
                console.log('🔋 Economia de dados:', connection.saveData);
            }
            
            // Informações específicas da API da Binance
            if (isMobileData) {
                console.log('🔌 === INFO DA API DA BINANCE ===');
                console.log('🌐 URL da API:', BINANCE_API_BASE);
                console.log('⏱️ Timeout configurado: 15 segundos');
                console.log('📊 Endpoint sendo usado: /ticker/24hr');
                console.log('💱 Filtro aplicado: Pares USDT');
                console.log('📈 Dados convertidos para formato CoinGecko');
                console.log('🔄 Fallback para CoinGecko se falhar');
            }
            
            console.log('💾 localStorage disponível:', supportsLocalStorage());
            console.log('🌐 Fetch disponível:', supportsFetch());
            console.log('================================');
            
            // Mostrar aviso para o usuário
            if (isMobileData) {
                showWarning('🔍 Debug completo executado! Verifique o console para detalhes da API da Binance.');
            } else {
                showWarning('🔍 Debug completo executado! Verifique o console para detalhes.');
            }
        }
        
        // Expor função de debug globalmente
        window.debugConnectivity = debugConnectivity;
        
        // Função para alternar favoritos
        function toggleFavorite(cryptoId) {
            const star = event.target;
            star.classList.toggle('active');
            
            // Salvar no localStorage
            let favorites = JSON.parse(localStorage.getItem('cryptoFavorites') || '[]');
            if (star.classList.contains('active')) {
                if (!favorites.includes(cryptoId)) {
                    favorites.push(cryptoId);
                }
            } else {
                favorites = favorites.filter(id => id !== cryptoId);
            }
            localStorage.setItem('cryptoFavorites', JSON.stringify(favorites));
            
            // Mostrar feedback visual
            if (star.classList.contains('active')) {
                showWarning('⭐ Adicionado aos favoritos!');
            } else {
                showWarning('💔 Removido dos favoritos');
            }
        }
        
        // Função para carregar favoritos salvos
        function loadFavorites() {
            const favorites = JSON.parse(localStorage.getItem('cryptoFavorites') || '[]');
            favorites.forEach(cryptoId => {
                const star = document.querySelector(`[onclick*="${cryptoId}"] .favorite-star`);
                if (star) {
                    star.classList.add('active');
                }
            });
        }
        // Função para buscar dados da API da Binance (otimizada para mobile)
        async function loadCryptoDataFromBinance() {
            try {
                console.log('🔄 Carregando dados da API da Binance para mobile...');
                console.log('📱 Status da conexão:', navigator.onLine ? 'Online' : 'Offline');
                console.log('📱 Tipo de conexão:', navigator.connection ? navigator.connection.effectiveType : 'Desconhecido');
                
                if (!navigator.onLine) { 
                    throw new Error('Dispositivo offline'); 
                }

                // Detectar conexão lenta
                const connection = navigator.connection;
                const isSlowConnection = connection && (
                    connection.effectiveType === 'slow-2g' || 
                    connection.effectiveType === '2g' || 
                    connection.effectiveType === '3g'
                );

                // ESTRATÉGIA DE EMERGÊNCIA: Timeouts muito mais agressivos para iPhone
                let timeout;
                if (isSlowConnection) {
                    timeout = 120000; // 2 MINUTOS para conexões muito lentas
                } else if (connection && connection.effectiveType === '4g') {
                    timeout = 90000; // 1.5 MINUTOS para 4G
                } else {
                    timeout = 60000; // 1 MINUTO para conexões normais
                }
                console.log(`🚨 ESTRATÉGIA DE EMERGÊNCIA: Timeout configurado: ${timeout/1000}s (${isSlowConnection ? 'Conexão muito lenta' : connection?.effectiveType || 'Normal'})`);

                const controller = new AbortController();
                const timeoutId = setTimeout(() => {
                    console.log('⏰ Timeout atingido, abortando requisição...');
                    controller.abort();
                }, timeout);

                // Tentar múltiplas vezes com backoff exponencial
                let lastError;
                for (let attempt = 1; attempt <= 3; attempt++) {
                    try {
                        console.log(`🔄 Tentativa ${attempt}/3 para conectar com Binance...`);
                        
                        const startTime = Date.now();
                        const response = await fetch(`${BINANCE_API_BASE}/ticker/24hr`, {
                            method: 'GET',
                            signal: controller.signal,
                            headers: { 
                                'Accept': 'application/json',
                                'Content-Type': 'application/json',
                                'Cache-Control': 'no-cache'
                            },
                            // Configurações específicas para conexões móveis
                            mode: 'cors',
                            credentials: 'omit'
                        });
                        
                        const endTime = Date.now();
                        const responseTime = endTime - startTime;
                        
                        clearTimeout(timeoutId);
                        console.log(`📡 Resposta da Binance recebida em ${responseTime}ms:`, response.status, response.statusText);
                        
                        if (!response.ok) {
                            const errorText = await response.text();
                            console.error('❌ Erro na resposta da Binance:', errorText);
                            throw new Error(`Erro na API da Binance: ${response.status} - ${errorText}`);
                        }

                        const binanceData = await response.json();
                        console.log('📊 Dados brutos da Binance recebidos:', binanceData.length, 'pares');
                        
                        if (!Array.isArray(binanceData) || binanceData.length === 0) {
                            throw new Error('Dados inválidos recebidos da Binance');
                        }

                        const usdtPairs = binanceData.filter(item => 
                            item.symbol && 
                            item.symbol.endsWith('USDT') && 
                            item.lastPrice && 
                            item.lastPrice !== '0'
                        );
                        
                        console.log('💱 Pares USDT válidos encontrados:', usdtPairs.length);
                        
                        if (usdtPairs.length === 0) {
                            throw new Error('Nenhum par USDT válido encontrado na Binance');
                        }

                        const convertedData = usdtPairs
                            .slice(0, 100)
                            .map(item => {
                                try {
                                    const price = parseFloat(item.lastPrice);
                                    const change = parseFloat(item.priceChangePercent);
                                    const volume = parseFloat(item.volume);
                                    const quoteVolume = parseFloat(item.quoteVolume);
                                    
                                    if (isNaN(price) || isNaN(change) || isNaN(volume)) {
                                        console.warn('⚠️ Dados inválidos ignorados:', item.symbol, item);
                                        return null;
                                    }

                                    return {
                                        id: item.symbol.toLowerCase().replace('usdt', ''),
                                        symbol: item.symbol.replace('USDT', ''),
                                        name: item.symbol.replace('USDT', ''),
                                        current_price: price,
                                        price_change_percentage_24h: change,
                                        total_volume: volume,
                                        quote_volume: quoteVolume,
                                        market_cap: quoteVolume, // Usar volume em USDT como aproximação
                                        market_cap_rank: 0,
                                        sparkline_in_7d: { price: [] },
                                        last_updated: new Date().toISOString()
                                    };
                                } catch (conversionError) {
                                    console.warn('⚠️ Erro ao converter item:', item.symbol, conversionError);
                                    return null;
                                }
                            })
                            .filter(item => item !== null);

                        if (convertedData.length === 0) {
                            throw new Error('Falha ao converter dados da Binance');
                        }

                        console.log(`✅ Dados convertidos com sucesso: ${convertedData.length} criptomoedas`);
                        
                        // Ordenar por volume e adicionar ranking
                        convertedData.sort((a, b) => (b.total_volume || 0) - (a.total_volume || 0));
                        convertedData.forEach((item, index) => {
                            item.market_cap_rank = index + 1;
                        });

                        // Atualizar dados e interface
                        savePreviousPrices();
                        cryptoData = convertedData;
                        filteredData = [...cryptoData];
                        
                        await loadGlobalMarketDataFromBinance();
                        saveToCache(convertedData);
                        displayCryptoData();
                        
                        localStorage.setItem('currentMobileAPI', 'Binance');

                        console.log('🎉 Dados da Binance carregados com sucesso!');
                        
                        return true;
                        
                    } catch (attemptError) {
                        lastError = attemptError;
                        console.warn(`⚠️ Tentativa ${attempt} falhou:`, attemptError.message);
                        
                        if (attempt < 3) {
                            const delay = Math.pow(2, attempt) * 1000; // Backoff exponencial: 2s, 4s
                            console.log(`⏳ Aguardando ${delay}ms antes da próxima tentativa...`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                        }
                    }
                }

                // Se todas as tentativas falharam
                throw lastError || new Error('Todas as tentativas falharam');

            } catch (error) {
                console.error('❌ Erro detalhado ao carregar dados da Binance:', error);
                console.error('❌ Stack trace:', error.stack);
                
                let errorMessage = 'Erro na API da Binance';
                if (error.name === 'AbortError') {
                    errorMessage = 'Timeout na API da Binance (conexão muito lenta)';
                } else if (error.message.includes('Failed to fetch')) {
                    errorMessage = 'Falha na conexão com Binance (verifique sua conexão)';
                } else if (error.message.includes('CORS')) {
                    errorMessage = 'Erro de CORS na Binance';
                } else if (error.message.includes('Timeout')) {
                    errorMessage = 'Conexão muito lenta com Binance';
                } else {
                    errorMessage = `Erro na API da Binance: ${error.message}`;
                }
                
                showWarning(`❌ ${errorMessage}`);
                
                console.log('🔄 Tentando fallback para CoinMarketCap...');
                try {
                    const fallbackSuccess = await loadCryptoDataFromCoinMarketCap();
                    if (fallbackSuccess) { 
                        showWarning('✅ Fallback para CoinMarketCap funcionou'); 
                        return true; 
                    }
                } catch (fallbackError) { 
                    console.error('❌ Fallback para CoinMarketCap falhou:', fallbackError); 
                }
                
                console.log('🔄 Tentando fallback para CoinGecko...');
                try {
                    const fallbackSuccess = await loadCryptoData();
                    if (fallbackSuccess) {
                        showWarning('✅ Fallback para CoinGecko funcionou');
                        return true;
                    }
                } catch (fallbackError) {
                    console.error('❌ Fallback para CoinGecko também falhou:', fallbackError);
                }
                
                return false;
            }
        }
        
        // Função para carregar dados da API da CoinMarketCap (alternativa robusta para mobile)
        async function loadCryptoDataFromCoinMarketCap() {
            try {
                console.log('🔄 Carregando dados da API da CoinMarketCap para mobile...');
                if (!navigator.onLine) { 
                    throw new Error('Dispositivo offline'); 
                }
                
                const connection = navigator.connection;
                const isSlowConnection = connection && (
                    connection.effectiveType === 'slow-2g' || 
                    connection.effectiveType === '2g' || 
                    connection.effectiveType === '3g'
                );
                // ESTRATÉGIA DE EMERGÊNCIA: Timeouts muito mais agressivos para iPhone
                let timeout;
                if (isSlowConnection) {
                    timeout = 120000; // 2 MINUTOS para conexões muito lentas
                } else if (connection && connection.effectiveType === '4g') {
                    timeout = 90000; // 1.5 MINUTOS para 4G
                } else {
                    timeout = 60000; // 1 MINUTO para conexões normais
                }
                
                console.log(`🚨 ESTRATÉGIA DE EMERGÊNCIA: Timeout configurado: ${timeout/1000}s (${isSlowConnection ? 'Conexão muito lenta' : connection?.effectiveType || 'Normal'})`);
                
                const controller = new AbortController();
                const timeoutId = setTimeout(() => {
                    console.log('⏰ Timeout atingido, abortando requisição...');
                    controller.abort();
                }, timeout);
                
                let lastError;
                for (let attempt = 1; attempt <= 3; attempt++) {
                    try {
                        console.log(`🔄 Tentativa ${attempt}/3 para conectar com CoinMarketCap...`);
                        const startTime = Date.now();
                        
                        const response = await fetch(`${COINMARKETCAP_API_BASE}/cryptocurrency/listings/latest?limit=100&convert=USD`, {
                            method: 'GET',
                            signal: controller.signal,
                            headers: { 
                                'Accept': 'application/json',
                                'X-CMC_PRO_API_KEY': COINMARKETCAP_API_KEY,
                                'Cache-Control': 'no-cache'
                            },
                            mode: 'cors',
                            credentials: 'omit'
                        });
                        
                        const endTime = Date.now();
                        const responseTime = endTime - startTime;
                        clearTimeout(timeoutId);
                        
                        console.log(`📡 Resposta da CoinMarketCap recebida em ${responseTime}ms:`, response.status, response.statusText);
                        
                        if (!response.ok) {
                            const errorText = await response.text();
                            console.error('❌ Erro na resposta da CoinMarketCap:', errorText);
                            throw new Error(`Erro na API da CoinMarketCap: ${response.status} - ${errorText}`);
                        }
                        
                        const cmcData = await response.json();
                        console.log('📊 Dados brutos da CoinMarketCap recebidos:', cmcData.data ? cmcData.data.length : 0, 'criptomoedas');
                        
                        if (!cmcData.data || !Array.isArray(cmcData.data) || cmcData.data.length === 0) { 
                            throw new Error('Dados inválidos recebidos da CoinMarketCap'); 
                        }
                        
                        const convertedData = cmcData.data.map(item => {
                            try {
                                const price = parseFloat(item.quote?.USD?.price || 0);
                                const change = parseFloat(item.quote?.USD?.percent_change_24h || 0);
                                const volume = parseFloat(item.quote?.USD?.volume_24h || 0);
                                const marketCap = parseFloat(item.quote?.USD?.market_cap || 0);
                                
                                if (isNaN(price) || price <= 0) {
                                    console.warn('⚠️ Dados inválidos ignorados:', item.symbol, item);
                                    return null;
                                }
                                
                                return {
                                    id: item.slug || item.symbol.toLowerCase(),
                                    symbol: item.symbol,
                                    name: item.name,
                                    current_price: price,
                                    price_change_percentage_24h: change,
                                    total_volume: volume,
                                    quote_volume: volume,
                                    market_cap: marketCap,
                                    market_cap_rank: item.cmc_rank || 0,
                                    sparkline_in_7d: { price: [] },
                                    last_updated: new Date().toISOString()
                                };
                            } catch (conversionError) {
                                console.warn('⚠️ Erro ao converter item:', item.symbol, conversionError);
                                return null;
                            }
                        }).filter(item => item !== null);
                        
                        if (convertedData.length === 0) { 
                            throw new Error('Falha ao converter dados da CoinMarketCap'); 
                        }
                        
                        console.log(`✅ Dados convertidos com sucesso: ${convertedData.length} criptomoedas`);
                        
                        // Ordenar por market cap
                        convertedData.sort((a, b) => (b.market_cap || 0) - (a.market_cap || 0));
                        
                        savePreviousPrices(); 
                        cryptoData = convertedData; 
                        filteredData = [...cryptoData];
                        
                        // Simular dados globais
                        await loadGlobalMarketDataFromCoinMarketCap();
                        
                        saveToCache(convertedData); 
                        displayCryptoData();
                        
                        localStorage.setItem('currentMobileAPI', 'CoinMarketCap');

                        console.log('🎉 Dados da CoinMarketCap carregados com sucesso!'); 
                        return true;
                        
                    } catch (attemptError) {
                        lastError = attemptError;
                        console.warn(`⚠️ Tentativa ${attempt} falhou:`, attemptError.message);
                        if (attempt < 3) {
                            const delay = Math.pow(2, attempt) * 1000; // Backoff exponencial: 2s, 4s
                            console.log(`⏳ Aguardando ${delay}ms antes da próxima tentativa...`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                        }
                    }
                }
                
                throw lastError || new Error('Todas as tentativas falharam');
                
            } catch (error) {
                console.error('❌ Erro detalhado ao carregar dados da CoinMarketCap:', error);
                console.error('❌ Stack trace:', error.stack);
                
                let errorMessage = 'Erro na API da CoinMarketCap';
                if (error.name === 'AbortError') { 
                    errorMessage = 'Timeout na API da CoinMarketCap (conexão muito lenta)'; 
                } else if (error.message.includes('Failed to fetch')) { 
                    errorMessage = 'Falha na conexão com CoinMarketCap (verifique sua conexão)'; 
                } else if (error.message.includes('CORS')) { 
                    errorMessage = 'Erro de CORS na CoinMarketCap'; 
                } else if (error.message.includes('Timeout') || error.message.includes('Timeout')) { 
                    errorMessage = 'Conexão muito lenta com CoinMarketCap'; 
                } else { 
                    errorMessage = `Erro na API da CoinMarketCap: ${error.message}`; 
                }
                
                showWarning(`❌ ${errorMessage}`);
                return false;
            }
        }
        
                // Função para carregar dados da CoinGecko como fallback (com chave API)
        async function loadCryptoDataFromCoinGecko() {
            try {
                console.log('🔄 Carregando dados da API da CoinGecko como fallback (com chave API)...');
                if (!navigator.onLine) { 
                    throw new Error('Dispositivo offline'); 
                }
                
                const connection = navigator.connection;
                const isSlowConnection = connection && (
                    connection.effectiveType === 'slow-2g' || 
                    connection.effectiveType === '2g' || 
                    connection.effectiveType === '3g'
                );
                // ESTRATÉGIA DE EMERGÊNCIA: Timeouts muito mais agressivos para iPhone
                let timeout;
                if (isSlowConnection) {
                    timeout = 120000; // 2 MINUTOS para conexões muito lentas
                } else if (connection && connection.effectiveType === '4g') {
                    timeout = 90000; // 1.5 MINUTOS para 4G
                } else {
                    timeout = 60000; // 1 MINUTO para conexões normais
                }
                 
                console.log(`🚨 ESTRATÉGIA DE EMERGÊNCIA: Timeout configurado: ${timeout/1000}s (${isSlowConnection ? 'Conexão muito lenta' : connection?.effectiveType || 'Normal'})`);
                 
                const controller = new AbortController();
                const timeoutId = setTimeout(() => {
                    console.log('⏰ Timeout atingido, abortando requisição...');
                    controller.abort();
                }, timeout);
                
                const startTime = Date.now();
                
                // Usar sua chave API do CoinGecko para melhor confiabilidade
                const COINGECKO_API_KEY = 'CG-QGmu3Fbqu6bCfsY2Ntrnq8rK';
                
                let response;
                let data;
                
                // Try to fetch data for both currencies first
                const dualCurrencyData = await fetchDataForBothCurrencies();
                if (dualCurrencyData) {
                    response = { ok: true, status: 200, statusText: 'OK' };
                    data = dualCurrencyData;
                } else {
                    // Fallback to single currency if dual currency fetch fails
                    console.log('🔄 Fallback para moeda única...');
                    response = await fetch(`${COINGECKO_API_BASE}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false&locale=en&x_cg_demo_api_key=${COINGECKO_API_KEY}`, {
                        method: 'GET',
                        signal: controller.signal,
                        headers: { 
                            'Accept': 'application/json',
                            'X-CG-Demo-API-Key': COINGECKO_API_KEY,
                            'Cache-Control': 'no-cache'
                        },
                        mode: 'cors',
                        credentials: 'omit'
                    });
                    
                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('❌ Erro na resposta da CoinGecko:', errorText);
                        throw new Error(`Erro na API da CoinGecko: ${response.status} - ${errorText}`);
                    }
                    
                    data = await response.json();
                }
                
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                clearTimeout(timeoutId);
                
                console.log(`📡 Resposta da CoinGecko recebida em ${responseTime}ms:`, response.status, response.statusText);
                
                if (!data || data.length === 0) {
                    throw new Error('Dados inválidos recebidos da CoinGecko');
                }
                if (!data || data.length === 0) {
                    throw new Error('Dados inválidos recebidos da CoinGecko');
                }
                
                console.log(`✅ Dados da CoinGecko recebidos: ${data.length} criptomoedas`);
                
                cryptoData = data;
                filteredData = [...cryptoData];
                
                // Limpar cache de análises para novos dados
                clearAnalysisCache();
                
                saveToCache(data);
                displayCryptoData();
                
                // Carregar dados globais
                await loadGlobalMarketData();
                
                localStorage.setItem('currentMobileAPI', 'CoinGecko');
                

                console.log('🎉 Dados da CoinGecko carregados com sucesso usando chave API!');
                return true;
                
            } catch (error) {
                console.error('❌ Erro ao carregar dados da CoinGecko como fallback:', error);
                return false;
            }
        }
        
        // Função para carregar dados da API da CryptoCompare (mais robusta para iPhone)
        async function loadCryptoDataFromCryptoCompare() {
            try {
                console.log('🔄 Carregando dados da API da CryptoCompare para iPhone...');
                if (!navigator.onLine) { 
                    throw new Error('Dispositivo offline'); 
                }
                
                const connection = navigator.connection;
                const isSlowConnection = connection && (
                    connection.effectiveType === 'slow-2g' || 
                    connection.effectiveType === '2g' || 
                    connection.effectiveType === '3g'
                );
                
                // ESTRATÉGIA DE EMERGÊNCIA: Timeouts muito mais agressivos para iPhone
                let timeout;
                if (isSlowConnection) {
                    timeout = 120000; // 2 MINUTOS para conexões muito lentas
                } else if (connection && connection.effectiveType === '4g') {
                    timeout = 90000; // 1.5 MINUTOS para 4G
                } else {
                    timeout = 60000; // 1 MINUTO para conexões normais
                }
                
                console.log(`🚨 ESTRATÉGIA DE EMERGÊNCIA: Timeout configurado: ${timeout/1000}s (${isSlowConnection ? 'Conexão muito lenta' : connection?.effectiveType || 'Normal'})`);
                
                // ESTRATÉGIA DE EMERGÊNCIA: Usar XMLHttpRequest em vez de fetch para iPhone
                console.log('🚨 ESTRATÉGIA DE EMERGÊNCIA: Usando XMLHttpRequest para iPhone...');
                
                return new Promise((resolve, reject) => {
                    const xhr = new XMLHttpRequest();
                    const timeoutId = setTimeout(() => {
                        console.log('⏰ Timeout de emergência atingido!');
                        xhr.abort();
                        reject(new Error('Timeout de emergência na API da CryptoCompare'));
                    }, timeout);
                    
                    xhr.open('GET', `${CRYPTOCOMPARE_API_BASE}/top/mktcapfull?limit=100&tsym=USD`, true);
                    xhr.setRequestHeader('Accept', 'application/json');
                    xhr.setRequestHeader('Cache-Control', 'no-cache');
                    
                    // Configurações específicas para iPhone
                    xhr.timeout = timeout;
                    xhr.withCredentials = false;
                    
                    xhr.onload = function() {
                        clearTimeout(timeoutId);
                        if (xhr.status === 200) {
                            try {
                                const ccData = JSON.parse(xhr.responseText);
                                console.log('📊 Dados brutos da CryptoCompare recebidos:', ccData.Data ? ccData.Data.length : 0, 'criptomoedas');
                                
                                if (!ccData.Data || !Array.isArray(ccData.Data) || ccData.Data.length === 0) { 
                                    reject(new Error('Dados inválidos recebidos da CryptoCompare')); 
                                    return;
                                }
                                
                                const convertedData = ccData.Data.map(item => {
                                    try {
                                        const raw = item.RAW?.USD;
                                        if (!raw) return null;
                                        
                                        const price = parseFloat(raw.PRICE || 0);
                                        const change = parseFloat(raw.CHANGEPCT24HOUR || 0);
                                        const volume = parseFloat(raw.VOLUME24HOUR || 0);
                                        const marketCap = parseFloat(raw.MKTCAP || 0);
                                        
                                        if (isNaN(price) || price <= 0) {
                                            console.warn('⚠️ Dados inválidos ignorados:', item.CoinInfo.Name, item);
                                            return null;
                                        }
                                        
                                        return {
                                            id: item.CoinInfo.Name.toLowerCase(),
                                            symbol: item.CoinInfo.Name,
                                            name: item.CoinInfo.FullName,
                                            current_price: price,
                                            price_change_percentage_24h: change,
                                            total_volume: volume,
                                            quote_volume: volume,
                                            market_cap: marketCap,
                                            market_cap_rank: item.RAW.USD.RANK || 0,
                                            sparkline_in_7d: { price: [] },
                                            last_updated: new Date().toISOString()
                                        };
                                    } catch (conversionError) {
                                        console.warn('⚠️ Erro ao converter item:', item.CoinInfo.Name, conversionError);
                                        return null;
                                    }
                                }).filter(item => item !== null);
                                
                                if (convertedData.length === 0) { 
                                    reject(new Error('Falha ao converter dados da CryptoCompare')); 
                                    return;
                                }
                                
                                console.log(`✅ Dados convertidos com sucesso: ${convertedData.length} criptomoedas`);
                                
                                // Ordenar por market cap
                                convertedData.sort((a, b) => (b.market_cap || 0) - (a.market_cap || 0));
                                
                                savePreviousPrices(); 
                                cryptoData = convertedData; 
                                filteredData = [...cryptoData];
                                
                                // Simular dados globais
                                loadGlobalMarketDataFromCryptoCompare();
                                
                                saveToCache(convertedData); 
                                displayCryptoData();
                                
                                localStorage.setItem('currentMobileAPI', 'CryptoCompare');
        
        
                                console.log('🎉 Dados da CryptoCompare carregados com sucesso usando estratégia de emergência!'); 
                                resolve(true);
                                
                            } catch (parseError) {
                                reject(new Error(`Erro ao processar resposta: ${parseError.message}`));
                            }
                        } else {
                            reject(new Error(`HTTP ${xhr.status}: ${xhr.statusText}`));
                        }
                    };
                    
                    xhr.onerror = function() {
                        clearTimeout(timeoutId);
                        reject(new Error('Erro de rede na requisição XMLHttpRequest'));
                    };
                    
                    xhr.ontimeout = function() {
                        clearTimeout(timeoutId);
                        reject(new Error('Timeout na requisição XMLHttpRequest'));
                    };
                    
                    xhr.onabort = function() {
                        clearTimeout(timeoutId);
                        reject(new Error('Requisição abortada'));
                    };
                    
                    console.log('📡 Enviando requisição XMLHttpRequest para CryptoCompare...');
                    xhr.send();
                });
                
            } catch (error) {
                console.error('❌ Erro detalhado ao carregar dados da CryptoCompare:', error);
                console.error('❌ Stack trace:', error.stack);
                
                let errorMessage = 'Erro na API da CryptoCompare';
                if (error.message.includes('Timeout de emergência')) { 
                    errorMessage = 'Timeout de emergência na API da CryptoCompare (conexão extremamente lenta)'; 
                } else if (error.message.includes('Failed to fetch')) { 
                    errorMessage = 'Falha na conexão com CryptoCompare (verifique sua conexão)'; 
                } else if (error.message.includes('CORS')) { 
                    errorMessage = 'Erro de CORS na CryptoCompare'; 
                } else if (error.message.includes('Timeout')) { 
                    errorMessage = 'Conexão muito lenta com CryptoCompare'; 
                } else { 
                    errorMessage = `Erro na API da CryptoCompare: ${error.message}`; 
                }
                
                showWarning(`❌ ${errorMessage}`);
                return false;
            }
        }
        
        // Função para carregar dados globais do mercado da CryptoCompare
        async function loadGlobalMarketDataFromCryptoCompare() {
            try {
                console.log('🔄 Carregando dados globais do mercado da CryptoCompare...');
                
                // Simular dados globais baseados nos dados das criptomoedas
                const totalMarketCap = cryptoData.reduce((sum, crypto) => sum + (crypto.market_cap || 0), 0);
                const totalVolume = cryptoData.reduce((sum, crypto) => sum + (crypto.total_volume || 0), 0);
                const marketCapChange = cryptoData.reduce((sum, crypto) => sum + (crypto.price_change_percentage_24h || 0), 0) / cryptoData.length;
                
                globalMarketData = {
                    total_market_cap: { usd: totalMarketCap },
                    total_volume: { usd: totalVolume },
                    market_cap_change_percentage_24h: marketCapChange,
                    market_cap_change_24h_usd: totalMarketCap * (marketCapChange / 100),
                    last_updated: new Date().toISOString()
                };
                
                console.log('✅ Dados globais da CryptoCompare carregados:', globalMarketData);
                
            } catch (error) {
                console.error('❌ Erro ao carregar dados globais da CryptoCompare:', error);
                // Usar dados padrão se falhar
                globalMarketData = {
                    total_market_cap: { usd: 0 },
                    total_volume: { usd: 0 },
                    market_cap_change_percentage_24h: 0,
                    market_cap_change_24h_usd: 0,
                    last_updated: new Date().toISOString()
                };
            }
        }
        
        // Função para carregar dados globais do mercado da Binance
        async function loadGlobalMarketDataFromBinance() {
            try {
                // Buscar estatísticas globais da Binance
                const response = await makeRequest(`${BINANCE_API_BASE}/ticker/24hr`);
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // Calcular estatísticas globais
                    let totalMarketCap = 0;
                    let totalVolume = 0;
                    let totalChange24h = 0;
                    let activeCoins = 0;
                    
                    data.forEach(item => {
                        if (item.symbol.endsWith('USDT')) {
                            const price = parseFloat(item.lastPrice);
                            const volume = parseFloat(item.quoteVolume);
                            const change = parseFloat(item.priceChangePercent);
                            
                            totalMarketCap += volume; // Aproximação
                            totalVolume += volume;
                            totalChange24h += change;
                            activeCoins++;
                        }
                    });
                    
                    // Atualizar dados globais
                    globalMarketData = {
                        total_market_cap: { usd: totalMarketCap },
                        total_volume: { usd: totalVolume },
                        market_cap_percentage: { usd: totalChange24h / activeCoins },
                        market_cap_change_percentage_24h_usd: totalChange24h / activeCoins
                    };
                    
                    console.log('✅ Dados globais da Binance carregados');
                }
            } catch (error) {
                console.error('❌ Erro ao carregar dados globais da Binance:', error);
            }
        }
        
        // Função para carregar dados globais do mercado da CoinMarketCap
        async function loadGlobalMarketDataFromCoinMarketCap() {
            try {
                console.log('🔄 Carregando dados globais do mercado da CoinMarketCap...');
                
                // Simular dados globais baseados nos dados das criptomoedas
                const totalMarketCap = cryptoData.reduce((sum, crypto) => sum + (crypto.market_cap || 0), 0);
                const totalVolume = cryptoData.reduce((sum, crypto) => sum + (crypto.total_volume || 0), 0);
                const marketCapChange = cryptoData.reduce((sum, crypto) => sum + (crypto.price_change_percentage_24h || 0), 0) / cryptoData.length;
                
                globalMarketData = {
                    total_market_cap: { usd: totalMarketCap },
                    total_volume: { usd: totalVolume },
                    market_cap_change_percentage_24h: marketCapChange,
                    market_cap_change_24h_usd: totalMarketCap * (marketCapChange / 100),
                    last_updated: new Date().toISOString()
                };
                
                console.log('✅ Dados globais da CoinMarketCap carregados:', globalMarketData);
                
            } catch (error) {
                console.error('❌ Erro ao carregar dados globais da CoinMarketCap:', error);
                // Usar dados padrão se falhar
                globalMarketData = {
                    total_market_cap: { usd: 0 },
                    total_volume: { usd: 0 },
                    market_cap_change_percentage_24h: 0,
                    market_cap_change_24h_usd: 0,
                    last_updated: new Date().toISOString()
                };
            }
        }
        // Função para testar especificamente a API da CoinMarketCap
        async function testCoinMarketCapAPI() {
            try {
                console.log('🧪 === TESTE ESPECÍFICO DA API DA COINMARKETCAP ===');
                showWarning('🧪 Testando API da CoinMarketCap...');
                
                // Teste 1: Verificar conectividade
                console.log('📡 Teste 1: Verificando conectividade...');
                if (!navigator.onLine) { 
                    throw new Error('Dispositivo offline'); 
                }
                
                // Teste 2: Verificar qualidade da conexão
                const connection = navigator.connection;
                if (connection) {
                    console.log('📱 Tipo de conexão:', connection.effectiveType);
                    console.log('📶 RTT estimado:', connection.rtt, 'ms');
                    console.log('📊 Largura de banda:', connection.downlink, 'Mbps');
                    console.log('🔋 Economia de dados:', connection.saveData);
                }
                
                // Teste 3: Teste principal com timeout adaptativo
                console.log('⏱️ Teste 3: Testando endpoint principal...');
                const isSlowConnection = connection && (
                    connection.effectiveType === 'slow-2g' || 
                    connection.effectiveType === '2g' || 
                    connection.effectiveType === '3g'
                );
                const timeout = isSlowConnection ? 30000 : 20000;
                
                console.log(`⏱️ Timeout configurado: ${timeout}ms (${isSlowConnection ? 'Conexão lenta' : 'Conexão normal'})`);
                
                const controller = new AbortController();
                const timeoutId = setTimeout(() => {
                    console.log('⏰ Timeout atingido!');
                    controller.abort();
                }, timeout);
                
                const startTime = Date.now();
                const response = await fetch(`${COINMARKETCAP_API_BASE}/cryptocurrency/listings/latest?limit=10&convert=USD`, {
                    method: 'GET',
                    signal: controller.signal,
                    headers: { 
                        'Accept': 'application/json',
                        'X-CMC_PRO_API_KEY': COINMARKETCAP_API_KEY,
                        'Cache-Control': 'no-cache'
                    },
                    mode: 'cors',
                    credentials: 'omit'
                });
                
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                clearTimeout(timeoutId);
                
                console.log(`📊 Tempo de resposta total: ${responseTime}ms`);
                console.log(`📡 Status da resposta: ${response.status} ${response.statusText}`);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`HTTP ${response.status}: ${errorText}`);
                }
                
                const data = await response.json();
                console.log(`✅ Dados recebidos: ${data.data ? data.data.length : 0} criptomoedas`);
                
                console.log('🔍 Teste 4: Validando dados...');
                if (data.data && data.data.length > 0) {
                    const sample = data.data[0];
                    console.log('📋 Exemplo de dados:', { 
                        symbol: sample.symbol, 
                        name: sample.name,
                        price: sample.quote?.USD?.price, 
                        change: sample.quote?.USD?.percent_change_24h 
                    });
                }
                
                let performanceRating = 'Excelente';
                if (responseTime > 15000) performanceRating = 'Lenta';
                else if (responseTime > 8000) performanceRating = 'Média';
                else if (responseTime > 4000) performanceRating = 'Boa';
                
                console.log(`📈 Performance: ${performanceRating} (${responseTime}ms)`);
                showWarning(`✅ API da CoinMarketCap funcionando! Tempo: ${responseTime}ms, Criptomoedas: ${data.data ? data.data.length : 0}, Performance: ${performanceRating}`);
                return true;
                
            } catch (error) {
                console.error('❌ Erro no teste da CoinMarketCap:', error);
                
                let errorMsg = 'Erro na API da CoinMarketCap';
                if (error.name === 'AbortError') {
                    errorMsg = 'Timeout na API da CoinMarketCap (conexão muito lenta)';
                } else if (error.message.includes('Failed to fetch')) {
                    errorMsg = 'Falha na conexão com CoinMarketCap (verifique sua conexão)';
                } else if (error.message.includes('CORS')) {
                    errorMsg = 'Erro de CORS na CoinMarketCap';
                } else if (error.message.includes('HTTP')) {
                    errorMsg = `Erro HTTP: ${error.message}`;
                } else if (error.message.includes('Timeout')) {
                    errorMsg = 'Conexão muito lenta com CoinMarketCap';
                } else {
                    errorMsg = `Erro: ${error.message}`;
                }
                
                showWarning(`❌ ${errorMsg}`);
                
                if (error.name === 'AbortError') {
                    console.log('💡 Sugestão: Sua conexão está muito lenta. Tente:');
                    console.log('   - Verificar se está em área com boa cobertura');
                    console.log('   - Desativar economia de dados no celular');
                    console.log('   - Tentar em horário de menor tráfego');
                } else if (error.message.includes('Failed to fetch')) {
                    console.log('💡 Sugestões: Problema de conectividade. Tente:');
                    console.log('   - Verificar se o celular está online');
                    console.log('   - Testar em WiFi primeiro');
                    console.log('   - Verificar configurações de rede');
                }
                
                return false;
            }
        }
        

        
        // Função para testar especificamente a API da CryptoCompare (mais robusta para iPhone)
        async function testCryptoCompareAPI() {
            try {
                console.log('🧪 === TESTE ESPECÍFICO DA API DA CRYPTOCOMPARE (IPHONE) ===');
                showWarning('🧪 Testando API da CryptoCompare para iPhone...');
                
                // Teste 1: Verificar conectividade
                console.log('📡 Teste 1: Verificando conectividade...');
                if (!navigator.onLine) { 
                    throw new Error('Dispositivo offline'); 
                }
                
                // Teste 2: Verificar qualidade da conexão
                const connection = navigator.connection;
                if (connection) {
                    console.log('📱 Tipo de conexão:', connection.effectiveType);
                    console.log('📶 RTT estimado:', connection.rtt, 'ms');
                    console.log('📊 Largura de banda:', connection.downlink, 'Mbps');
                    console.log('🔋 Economia de dados:', connection.saveData);
                }
                
                // Teste 3: Teste de ping simples
                console.log('🏓 Teste 3: Testando ping para CryptoCompare...');
                const pingStart = Date.now();
                try {
                    const pingResponse = await fetch(`${CRYPTOCOMPARE_API_BASE}/ping`, {
                        method: 'GET',
                        signal: AbortSignal.timeout(15000) // 15s para ping
                    });
                    const pingEnd = Date.now();
                    const pingTime = pingEnd - pingStart;
                    console.log(`🏓 Ping para CryptoCompare: ${pingTime}ms`);
                    
                    if (pingTime > 8000) {
                        console.warn('⚠️ Ping muito alto - conexão pode estar lenta');
                    }
                } catch (pingError) {
                    console.warn('⚠️ Ping falhou, mas continuando com teste principal...');
                }
                
                // Teste 4: Teste principal com timeout adaptativo
                console.log('⏱️ Teste 4: Testando endpoint principal...');
                const isSlowConnection = connection && (
                    connection.effectiveType === 'slow-2g' || 
                    connection.effectiveType === '2g' || 
                    connection.effectiveType === '3g'
                );
                const timeout = isSlowConnection ? 35000 : 25000; // Timeouts mais generosos para iPhone
                
                console.log(`⏱️ Timeout configurado: ${timeout}ms (${isSlowConnection ? 'Conexão lenta' : 'Conexão normal'})`);
                
                const controller = new AbortController();
                const timeoutId = setTimeout(() => {
                    console.log('⏰ Timeout atingido!');
                    controller.abort();
                }, timeout);
                
                const startTime = Date.now();
                const response = await fetch(`${CRYPTOCOMPARE_API_BASE}/top/mktcapfull?limit=10&tsym=USD`, {
                    method: 'GET',
                    signal: controller.signal,
                    headers: { 
                        'Accept': 'application/json',
                        'Cache-Control': 'no-cache'
                    },
                    mode: 'cors',
                    credentials: 'omit'
                });
                
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                clearTimeout(timeoutId);
                
                console.log(`📊 Tempo de resposta total: ${responseTime}ms`);
                console.log(`📡 Status da resposta: ${response.status} ${response.statusText}`);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`HTTP ${response.status}: ${errorText}`);
                }
                
                const data = await response.json();
                console.log(`✅ Dados recebidos: ${data.Data ? data.Data.length : 0} criptomoedas`);
                
                console.log('🔍 Teste 5: Validando dados...');
                if (data.Data && data.Data.length > 0) {
                    const sample = data.Data[0];
                    console.log('📋 Exemplo de dados:', { 
                        symbol: sample.CoinInfo?.Name, 
                        name: sample.CoinInfo?.FullName,
                        price: sample.RAW?.USD?.PRICE, 
                        change: sample.RAW?.USD?.CHANGEPCT24HOUR 
                    });
                }
                
                let performanceRating = 'Excelente';
                if (responseTime > 20000) performanceRating = 'Lenta';
                else if (responseTime > 12000) performanceRating = 'Média';
                else if (responseTime > 8000) performanceRating = 'Boa';
                
                console.log(`📈 Performance: ${performanceRating} (${responseTime}ms)`);
                showWarning(`✅ API da CryptoCompare funcionando! Tempo: ${responseTime}ms, Criptomoedas: ${data.Data ? data.Data.length : 0}, Performance: ${performanceRating}`);
                
                console.log('🎯 Esta API é especialmente otimizada para iPhone e deve funcionar melhor que as outras!');
                return true;
                
            } catch (error) {
                console.error('❌ Erro no teste da CryptoCompare:', error);
                
                let errorMsg = 'Erro na API da CryptoCompare';
                if (error.name === 'AbortError') {
                    errorMsg = 'Timeout na API da CryptoCompare (conexão muito lenta)';
                } else if (error.message.includes('Failed to fetch')) {
                    errorMsg = 'Falha na conexão com CryptoCompare (verifique sua conexão)';
                } else if (error.message.includes('CORS')) {
                    errorMsg = 'Erro de CORS na CryptoCompare';
                } else if (error.message.includes('HTTP')) {
                    errorMsg = `Erro HTTP: ${error.message}`;
                } else if (error.message.includes('Timeout')) {
                    errorMsg = 'Conexão muito lenta com CryptoCompare';
                } else {
                    errorMsg = `Erro: ${error.message}`;
                }
                
                showWarning(`❌ ${errorMsg}`);
                
                if (error.name === 'AbortError') {
                    console.log('💡 Sugestão para iPhone: Sua conexão está muito lenta. Tente:');
                    console.log('   - Verificar se está em área com boa cobertura 4G/5G');
                    console.log('   - Desativar economia de dados no iPhone');
                    console.log('   - Tentar em horário de menor tráfego');
                    console.log('   - Verificar configurações de rede do iPhone');
                } else if (error.message.includes('Failed to fetch')) {
                    console.log('💡 Sugestões para iPhone: Problema de conectividade. Tente:');
                    console.log('   - Verificar se o iPhone está online');
                    console.log('   - Testar em WiFi primeiro');
                    console.log('   - Verificar configurações de rede do iPhone');
                    console.log('   - Tentar em modo avião e desativar');
                }
                
                return false;
            }
        }
        
        // Função para testar especificamente a API da Binance
        async function testBinanceAPI() {
            try {
                console.log('🧪 === TESTE ESPECÍFICO DA API DA BINANCE ===');
                showWarning('🧪 Testando API da Binance...');
                
                // Teste 1: Verificar conectividade
                console.log('📡 Teste 1: Verificando conectividade...');
                if (!navigator.onLine) { 
                    throw new Error('Dispositivo offline'); 
                }
                
                // Teste 2: Verificar qualidade da conexão
                const connection = navigator.connection;
                if (connection) {
                    console.log('📱 Tipo de conexão:', connection.effectiveType);
                    console.log('📶 RTT estimado:', connection.rtt, 'ms');
                    console.log('📊 Largura de banda:', connection.downlink, 'Mbps');
                    console.log('🔋 Economia de dados:', connection.saveData);
                }
                
                // Teste 3: Teste de ping simples
                console.log('🏓 Teste 3: Testando ping para Binance...');
                const pingStart = Date.now();
                try {
                    const pingResponse = await fetch(`${BINANCE_API_BASE}/ping`, {
                        method: 'GET',
                        signal: AbortSignal.timeout(10000) // 10s para ping
                    });
                    const pingEnd = Date.now();
                    const pingTime = pingEnd - pingStart;
                    console.log(`🏓 Ping para Binance: ${pingTime}ms`);
                    
                    if (pingTime > 5000) {
                        console.warn('⚠️ Ping muito alto - conexão pode estar lenta');
                    }
                } catch (pingError) {
                    console.warn('⚠️ Ping falhou, mas continuando com teste principal...');
                }
                
                // Teste 4: Teste principal com timeout adaptativo
                console.log('⏱️ Teste 4: Testando endpoint principal...');
                const isSlowConnection = connection && (
                    connection.effectiveType === 'slow-2g' || 
                    connection.effectiveType === '2g' || 
                    connection.effectiveType === '3g'
                );
                const timeout = isSlowConnection ? 25000 : 15000;
                
                console.log(`⏱️ Timeout configurado: ${timeout}ms (${isSlowConnection ? 'Conexão lenta' : 'Conexão normal'})`);
                
                const controller = new AbortController();
                const timeoutId = setTimeout(() => {
                    console.log('⏰ Timeout atingido!');
                    controller.abort();
                }, timeout);
                
                const startTime = Date.now();
                const response = await fetch(`${BINANCE_API_BASE}/ticker/24hr`, {
                    method: 'GET',
                    signal: controller.signal,
                    headers: { 
                        'Accept': 'application/json',
                        'Cache-Control': 'no-cache'
                    },
                    mode: 'cors',
                    credentials: 'omit'
                });
                
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                
                clearTimeout(timeoutId);
                
                console.log(`📊 Tempo de resposta total: ${responseTime}ms`);
                console.log(`📡 Status da resposta: ${response.status} ${response.statusText}`);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`HTTP ${response.status}: ${errorText}`);
                }
                
                const data = await response.json();
                console.log(`✅ Dados recebidos: ${data.length} pares`);
                
                // Teste 5: Validar dados
                console.log('🔍 Teste 5: Validando dados...');
                const usdtPairs = data.filter(item => 
                    item.symbol && 
                    item.symbol.endsWith('USDT') && 
                    item.lastPrice && 
                    item.lastPrice !== '0'
                );
                
                console.log(`💱 Pares USDT válidos: ${usdtPairs.length}`);
                
                if (usdtPairs.length > 0) {
                    const sample = usdtPairs[0];
                    console.log('📋 Exemplo de dados:', {
                        symbol: sample.symbol,
                        price: sample.lastPrice,
                        change: sample.priceChangePercent,
                        volume: sample.volume
                    });
                }
                
                // Análise de performance
                let performanceRating = 'Excelente';
                if (responseTime > 10000) performanceRating = 'Lenta';
                else if (responseTime > 5000) performanceRating = 'Média';
                else if (responseTime > 2000) performanceRating = 'Boa';
                
                console.log(`📈 Performance: ${performanceRating} (${responseTime}ms)`);
                
                showWarning(`✅ API da Binance funcionando! Tempo: ${responseTime}ms, Pares: ${usdtPairs.length}, Performance: ${performanceRating}`);
                return true;
                
            } catch (error) {
                console.error('❌ Erro no teste da Binance:', error);
                
                let errorMsg = 'Erro na API da Binance';
                if (error.name === 'AbortError') {
                    errorMsg = 'Timeout na API da Binance (conexão muito lenta)';
                } else if (error.message.includes('Failed to fetch')) {
                    errorMsg = 'Falha na conexão com Binance (verifique sua conexão)';
                } else if (error.message.includes('CORS')) {
                    errorMsg = 'Erro de CORS na Binance';
                } else if (error.message.includes('HTTP')) {
                    errorMsg = `Erro HTTP: ${error.message}`;
                } else if (error.message.includes('Timeout')) {
                    errorMsg = 'Conexão muito lenta com Binance';
                } else {
                    errorMsg = `Erro: ${error.message}`;
                }
                
                showWarning(`❌ ${errorMsg}`);
                
                // Sugestões baseadas no erro
                if (error.name === 'AbortError') {
                    console.log('💡 Sugestão: Sua conexão está muito lenta. Tente:');
                    console.log('   - Verificar se está em área com boa cobertura');
                    console.log('   - Desativar economia de dados no celular');
                    console.log('   - Tentar em horário de menor tráfego');
                } else if (error.message.includes('Failed to fetch')) {
                    console.log('💡 Sugestões: Problema de conectividade. Tente:');
                    console.log('   - Verificar se o celular está online');
                    console.log('   - Testar em WiFi primeiro');
                    console.log('   - Verificar configurações de rede');
                }
                
                return false;
            }
        }
        </script>
</body>
</html>